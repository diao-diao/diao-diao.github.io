<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>51nd0re1</title>
  
  <subtitle>我是一只web狗</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-07-27T04:09:27.496Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>51nd0re1</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JavaWeb-2020/7/26-学习笔记</title>
    <link href="http://yoursite.com/2020/07/26/JavaWeb-2020-7-26-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/26/JavaWeb-2020-7-26-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-07-26T01:57:00.000Z</published>
    <updated>2020-07-27T04:09:27.496Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h1><h2 id="获取请求参数通用方式"><a href="#获取请求参数通用方式" class="headerlink" title="获取请求参数通用方式"></a>获取请求参数通用方式</h2><ol><li><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span> getParameter(<span class="keyword">String</span> <span class="keyword">name</span>)</span><br></pre></td></tr></table></figure><p>根据参数名称获取参数值</p></li><li><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] getParameterValues(<span class="keyword">String</span> <span class="keyword">name</span>)</span><br></pre></td></tr></table></figure><p>根据参数名称获取参数值的数组<br>hobby=xx&amp;hobby=game，多用于复选框</p></li><li><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">Enumeration</span>&lt;<span class="variable">String</span>&gt; <span class="function"><span class="title">getParameterNames</span>()</span></span><br></pre></td></tr></table></figure><p>获取所有请求的参数名称</p></li><li><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">String</span>[]&gt; getParameterMap()</span><br></pre></td></tr></table></figure><p>获取所有请求的键值对集合</p></li></ol><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><h4 id="getParameter"><a href="#getParameter" class="headerlink" title="getParameter"></a>getParameter</h4><p>创建一个regist2.html<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/hello/request6"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>再创建RequestDemo6<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo6"</span>,urlPatterns = <span class="string">"/request6"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo6</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//post获取请求参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值</span></span><br><span class="line">        <span class="type">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"post"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"username"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//get获取请求参数</span></span><br><span class="line">        <span class="type">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"get"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"username"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>首先在html的method为POST请求时，测试一下，打开提交表单，得到反馈<br>运行结果<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">post</span></span><br><span class="line"><span class="attribute">username</span></span><br></pre></td></tr></table></figure><br>再把method改为GET请求<br>运行结果<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get</span><br><span class="line">username</span><br></pre></td></tr></table></figure><br>这样就可以看到<code>getParameter</code>是通用的操作<br>无论是get还是post都可以使用</p><p>这种写法其实比较麻烦，所以可以将RequestDemon6改为<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo6"</span>,urlPatterns = <span class="string">"/request6"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo6</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//post获取请求参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值</span></span><br><span class="line">        <span class="type">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"post"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"username"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//get获取请求参数</span></span><br><span class="line"><span class="comment">//        String username = request.getParameter("username");</span></span><br><span class="line"><span class="comment">//        System.out.println("get");</span></span><br><span class="line"><span class="comment">//        System.out.println("username");</span></span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="getParameterValues"><a href="#getParameterValues" class="headerlink" title="getParameterValues"></a>getParameterValues</h4><p>刚才提到这个适用于复选框</p><p>修改regist2.html<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/hello/request6"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"game"</span>&gt;</span>游戏</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"study"</span>&gt;</span>学习</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>同时修改Servlet<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo6"</span>,urlPatterns = <span class="string">"/request6"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo6</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//post获取请求参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值</span></span><br><span class="line">        <span class="type">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line"><span class="comment">//        System.out.println("post");</span></span><br><span class="line"><span class="comment">//        System.out.println("username");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值的数组</span></span><br><span class="line">        <span class="type">String</span>[] hobbies = request.getParameterValues(<span class="string">"hobby"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">String</span> hobby:hobbies)&#123;</span><br><span class="line">            <span class="type">System</span>.out.println(hobby);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//get获取请求参数</span></span><br><span class="line"><span class="comment">//        String username = request.getParameter("username");</span></span><br><span class="line"><span class="comment">//        System.out.println("get");</span></span><br><span class="line"><span class="comment">//        System.out.println("username");</span></span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>再次访问regist2.html，勾选游戏和学习，点击注册<br>运行结果<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">game</span></span><br><span class="line"><span class="attribute">study</span></span><br></pre></td></tr></table></figure></p><h4 id="getParameterNames"><a href="#getParameterNames" class="headerlink" title="getParameterNames"></a>getParameterNames</h4><p>修改Servlet<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package Request;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Enumeration;</span><br><span class="line"></span><br><span class="line">@<span class="constructor">WebServlet(<span class="params">name</span> = <span class="string">"RequestDemo6"</span>,<span class="params">urlPatterns</span> = <span class="string">"/request6"</span>)</span></span><br><span class="line">public <span class="keyword">class</span> RequestDemo6 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void <span class="keyword">do</span><span class="constructor">Post(HttpServletRequest <span class="params">request</span>, HttpServletResponse <span class="params">response</span>)</span> throws ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//post获取请求参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值</span></span><br><span class="line">        String username = request.get<span class="constructor">Parameter(<span class="string">"username"</span>)</span>;</span><br><span class="line"><span class="comment">//        System.out.println("post");</span></span><br><span class="line"><span class="comment">//        System.out.println("username");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据参数名称获取参数值的数组</span></span><br><span class="line">        String<span class="literal">[]</span> hobbies = request.get<span class="constructor">ParameterValues(<span class="string">"hobby"</span>)</span>;</span><br><span class="line"><span class="comment">//        for(String hobby:hobbies)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(hobby);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取所有请求的参数名称</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = request.get<span class="constructor">ParameterNames()</span>;</span><br><span class="line">        <span class="keyword">while</span> (parameterNames.has<span class="constructor">MoreElements()</span>)&#123;</span><br><span class="line">            String name = parameterNames.next<span class="constructor">Element()</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(name);</span><br><span class="line">            String value = request.get<span class="constructor">Parameter(<span class="params">name</span>)</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(value);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"--------------------------------"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void <span class="keyword">do</span><span class="constructor">Get(HttpServletRequest <span class="params">request</span>, HttpServletResponse <span class="params">response</span>)</span> throws ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//get获取请求参数</span></span><br><span class="line"><span class="comment">//        String username = request.getParameter("username");</span></span><br><span class="line"><span class="comment">//        System.out.println("get");</span></span><br><span class="line"><span class="comment">//        System.out.println("username");</span></span><br><span class="line">        this.<span class="keyword">do</span><span class="constructor">Post(<span class="params">request</span>,<span class="params">response</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>访问regist2.html</p><p>运行结果<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">username</span><br><span class="line">51nd0re1</span><br><span class="line">--------------------------------</span><br><span class="line">password</span><br><span class="line">123</span><br><span class="line">--------------------------------</span><br><span class="line">hobby</span><br><span class="line">game</span><br><span class="line">--------------------------------</span><br></pre></td></tr></table></figure></p><p>会发现一个问题，hobby明明勾选了两个但是却只输出了一个，这是因为getParameter是String类型，而不是数组</p><h4 id="getParameterMap"><a href="#getParameterMap" class="headerlink" title="getParameterMap"></a>getParameterMap</h4><p>修改Servlet<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">package Request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line">@WebServlet(<span class="type">name</span> = "RequestDemo6",urlPatterns = "/request6")</span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> RequestDemo6 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected <span class="type">void</span> doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //post获取请求参数</span><br><span class="line"></span><br><span class="line">        //根据参数名称获取参数值</span><br><span class="line">        String username = request.getParameter("username");</span><br><span class="line">//        <span class="keyword">System</span>.<span class="keyword">out</span>.println("post");</span><br><span class="line">//        <span class="keyword">System</span>.<span class="keyword">out</span>.println("username");</span><br><span class="line"></span><br><span class="line">        //根据参数名称获取参数值的数组</span><br><span class="line">        String[] hobbies = request.getParameterValues("hobby");</span><br><span class="line">//        <span class="keyword">for</span>(String hobby:hobbies)&#123;</span><br><span class="line">//            <span class="keyword">System</span>.<span class="keyword">out</span>.println(hobby);</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //获取所有请求的参数名称</span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = request.getParameterNames();</span><br><span class="line">//        <span class="keyword">while</span> (parameterNames.hasMoreElements())&#123;</span><br><span class="line">//            String <span class="type">name</span> = parameterNames.nextElement();</span><br><span class="line">//            <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="type">name</span>);</span><br><span class="line">//            String <span class="keyword">value</span> = request.getParameter(<span class="type">name</span>);</span><br><span class="line">//            <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">value</span>);</span><br><span class="line">//            <span class="keyword">System</span>.<span class="keyword">out</span>.println("--------------------------------");</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line">        //获取所有参数的map集合</span><br><span class="line">        Map&lt;String,String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">        //循环</span><br><span class="line">        <span class="keyword">Set</span>&lt;String&gt; keySet = parameterMap.keySet();</span><br><span class="line">        <span class="keyword">for</span>(String <span class="type">name</span> : keySet)&#123;</span><br><span class="line">            //根据key获取值</span><br><span class="line">            String[] <span class="keyword">values</span> = parameterMap.<span class="keyword">get</span>(<span class="type">name</span>);</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="type">name</span>);</span><br><span class="line">            <span class="keyword">for</span>(String <span class="keyword">value</span> : <span class="keyword">values</span>)&#123;</span><br><span class="line">                <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">value</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.println("--------------------");</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected <span class="type">void</span> doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //<span class="keyword">get</span>获取请求参数</span><br><span class="line">//        String username = request.getParameter("username");</span><br><span class="line">//        <span class="keyword">System</span>.<span class="keyword">out</span>.println("get");</span><br><span class="line">//        <span class="keyword">System</span>.<span class="keyword">out</span>.println("username");</span><br><span class="line">        this.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">username</span><br><span class="line">51nd0re1</span><br><span class="line">--------------------</span><br><span class="line">password</span><br><span class="line">123</span><br><span class="line">--------------------</span><br><span class="line">hobby</span><br><span class="line">game</span><br><span class="line">study</span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><br>这里看到已经获取到了game和study，这样就解决了上一个获取不完整的问题</p><h2 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h2><p>get方式  tomcat8已经将中文乱码问题解决了</p><p>post方式解决办法</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo7"</span>,urlPatterns = <span class="string">"/request7"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo7</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//1.设置流的编码</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取请求参数</span></span><br><span class="line">        <span class="type">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">System</span>.out.println(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置为utf-8即可</p><h2 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h2><p>一种在服务器内部的资源跳转方式</p><ol><li><p>通过request对象获取请求转发器对象：<code>RequestDispatcher getRequestDispatcher(String path)</code></p></li><li><p>使用RequestDispatcher对象来进行转发</p></li></ol><h3 id="演示-1"><a href="#演示-1" class="headerlink" title="演示"></a>演示</h3><p>RequestDemo8<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">RequestDispatcher</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo8"</span>,urlPatterns = <span class="string">"/request8"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo8</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"demo8被访问了----"</span>);</span><br><span class="line">        <span class="comment">//转发到demo9资源</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        RequestDispatcher requestDispatcher = request.getRequestDispatcher("/request9");</span></span><br><span class="line"><span class="comment">//        requestDispatcher.forward(request, response);</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/request9"</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>RequestDemo9<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo9"</span>,urlPatterns = <span class="string">"/request9"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo9</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"demo9被访问了----"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>访问request8<br>运行结果<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">demo8被访问了<span class="comment">----</span></span><br><span class="line">demo9被访问了<span class="comment">----</span></span><br></pre></td></tr></table></figure></p><p>特点</p><ol><li>浏览器地址栏路径不发生变化</li><li>只能转发到当前的服务器内部资源中</li><li>转发是一次请求</li></ol><h2 id="共享数据"><a href="#共享数据" class="headerlink" title="共享数据"></a>共享数据</h2><ul><li><p>域对象：一个有作用范围的对象，可以在范围内共享数据</p></li><li><p>request域：代表一次请求的范围，一般用于请求转发的多个资源中共享数据</p></li></ul><p>方法：</p><ol><li><p>setAttribute(String name,Object obj)：存储数据</p></li><li><p>Object getAttitude(String name):通过键获取值</p></li><li><p>removeAttribute(String name):通过键移除键值对</p></li></ol><h3 id="演示-2"><a href="#演示-2" class="headerlink" title="演示"></a>演示</h3><p>修改request8<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">RequestDispatcher</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo8"</span>,urlPatterns = <span class="string">"/request8"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo8</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"demo8被访问了----"</span>);</span><br><span class="line">        <span class="comment">//转发到demo9资源</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        RequestDispatcher requestDispatcher = request.getRequestDispatcher("/request9");</span></span><br><span class="line"><span class="comment">//        requestDispatcher.forward(request, response);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//存储数据到request域中</span></span><br><span class="line">        request.setAttribute(<span class="string">"msg"</span>,<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/request9"</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>在转发之前将数据存储到request域中</p><p>修改request9<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo9"</span>,urlPatterns = <span class="string">"/request9"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo9</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        <span class="type">Object</span> msg = request.getAttribute(<span class="string">"msg"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(msg);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"demo9被访问了----"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>访问request8<br>运行结果<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">demo8被访问了<span class="comment">----</span></span><br><span class="line">hello</span><br><span class="line">demo9被访问了<span class="comment">----</span></span><br></pre></td></tr></table></figure></p><p>这里可以知道，只有在转发的情况下才可以进行数据共享</p><h2 id="获取ServletContext"><a href="#获取ServletContext" class="headerlink" title="获取ServletContext"></a>获取ServletContext</h2><figure class="highlight plain"><figcaption><span>getServletContext()```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">演示</span><br></pre></td></tr></table></figure><p>package Request;</p><p>import javax.servlet.ServletContext;<br>import javax.servlet.ServletException;<br>import javax.servlet.annotation.WebServlet;<br>import javax.servlet.http.HttpServlet;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br>import java.io.IOException;<br>import java.util.*;</p><p>@WebServlet(name = “RequestDemo10”,urlPatterns = “/request10”)<br>public class RequestDemo10 extends HttpServlet {<br>    @Override<br>    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {<br>        ServletContext servletContext = request.getServletContext();</p><pre><code>    System.out.println(servletContext);}@Overrideprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    this.doPost(request,response);}</code></pre><p>}</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行结果</span><br></pre></td></tr></table></figure><p>org.apache.catalina.core.ApplicationContextFacade@672c0e6b<br>```</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Request&quot;&gt;&lt;a href=&quot;#Request&quot; class=&quot;headerlink&quot; title=&quot;Request&quot;&gt;&lt;/a&gt;Request&lt;/h1&gt;&lt;h2 id=&quot;获取请求参数通用方式&quot;&gt;&lt;a href=&quot;#获取请求参数通用方式&quot; class=&quot;head
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/26-学习日记</title>
    <link href="http://yoursite.com/2020/07/26/PHP-2020-7-26-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/26/PHP-2020-7-26-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-26T01:50:00.000Z</published>
    <updated>2020-07-27T01:56:58.101Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL读取数据"><a href="#MySQL读取数据" class="headerlink" title="MySQL读取数据"></a>MySQL读取数据</h1><h2 id="从MySQL数据库读取数据"><a href="#从MySQL数据库读取数据" class="headerlink" title="从MySQL数据库读取数据"></a>从MySQL数据库读取数据</h2><p>使用SELECT语句用于从数据表中读取数据<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">column_name</span>(s) <span class="keyword">FROM</span> <span class="built_in">table_name</span></span><br></pre></td></tr></table></figure><br>可以用*来读取所有数据表中的字段<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="built_in">table_name</span></span><br></pre></td></tr></table></figure></p><h2 id="使用MySQLi"><a href="#使用MySQLi" class="headerlink" title="使用MySQLi"></a>使用MySQLi</h2><p>操作基本一致<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// Check connection</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$sql = <span class="string">"SELECT id, firstname, lastname FROM MyGuests"</span>;</span></span><br><span class="line"><span class="php">$result = $conn-&gt;query($sql);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($result-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 输出数据</span></span></span><br><span class="line"><span class="php">    <span class="keyword">while</span>($row = $result-&gt;fetch_assoc()) &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"id: "</span> . $row[<span class="string">"id"</span>]. <span class="string">" - Name: "</span> . $row[<span class="string">"firstname"</span>]. <span class="string">" "</span> . $row[<span class="string">"lastname"</span>]. <span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"0 结果"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">id:</span> <span class="number">1</span> - <span class="string">Name:</span> John Doe</span><br><span class="line"><span class="string">id:</span> <span class="number">2</span> - <span class="string">Name:</span> John Doe</span><br><span class="line"><span class="string">id:</span> <span class="number">3</span> - <span class="string">Name:</span> Mary Moe</span><br><span class="line"><span class="string">id:</span> <span class="number">4</span> - <span class="string">Name:</span> Julie Dooley</span><br><span class="line"><span class="string">id:</span> <span class="number">5</span> - <span class="string">Name:</span> John Doe</span><br><span class="line"><span class="string">id:</span> <span class="number">6</span> - <span class="string">Name:</span> Mary Moe</span><br><span class="line"><span class="string">id:</span> <span class="number">7</span> - <span class="string">Name:</span> Julie Dooley</span><br></pre></td></tr></table></figure><br>首先，我们设置了 SQL 语句从 MyGuests数据表中读取 id, firstname 和 lastname 三个字段。之后我们使用该 SQL 语句从数据库中取出结果集并赋给复制给变量 $result。</p><p>函数 num_rows() 判断返回的数据。</p><p>如果返回的是多条数据，函数 fetch_assoc() 将结合集放入到关联数组并循环输出。 while() 循环出结果集，并输出 id, firstname 和 lastname 三个字段值。</p><p>面向过程<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// Check connection</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$sql = <span class="string">"SELECT id, firstname, lastname FROM MyGuests"</span>;</span></span><br><span class="line"><span class="php">$result = mysqli_query($conn, $sql);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (mysqli_num_rows($result) &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 输出数据</span></span></span><br><span class="line"><span class="php">    <span class="keyword">while</span>($row = mysqli_fetch_assoc($result)) &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"id: "</span> . $row[<span class="string">"id"</span>]. <span class="string">" - Name: "</span> . $row[<span class="string">"firstname"</span>]. <span class="string">" "</span> . $row[<span class="string">"lastname"</span>]. <span class="string">"&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"0 结果"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">mysqli_close($conn);</span></span><br></pre></td></tr></table></figure><br>运行结果一样</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li><p>函数 num_rows() 判断返回的数据</p></li><li><p>函数 fetch_assoc() 将结合集放入到关联数组并循环输出</p></li><li><p>在使用函数 fetch_assoc()时，定义一个变量，并采用键值对中值的方式去访问数据</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL读取数据&quot;&gt;&lt;a href=&quot;#MySQL读取数据&quot; class=&quot;headerlink&quot; title=&quot;MySQL读取数据&quot;&gt;&lt;/a&gt;MySQL读取数据&lt;/h1&gt;&lt;h2 id=&quot;从MySQL数据库读取数据&quot;&gt;&lt;a href=&quot;#从MySQL数据库读取数
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/25-学习日记</title>
    <link href="http://yoursite.com/2020/07/25/PHP-2020-7-25-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/25/PHP-2020-7-25-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-25T01:41:00.000Z</published>
    <updated>2020-07-27T01:56:55.754Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL预处理语句"><a href="#MySQL预处理语句" class="headerlink" title="MySQL预处理语句"></a>MySQL预处理语句</h1><p>预处理语句对于防止MySQL注入是非常有用的</p><h2 id="预处理语句及绑定参数"><a href="#预处理语句及绑定参数" class="headerlink" title="预处理语句及绑定参数"></a>预处理语句及绑定参数</h2><p>预处理语句用于执行多个相同的SQL语句，并且执行效率更高</p><p>工作原理</p><ol><li>预处理：创建SQL语句模板并发送到数据库。预留的值使用参数”?”标记<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO MyGuests (<span class="name">firstname</span>, lastname, email) VALUES(?, ?, ?)</span><br></pre></td></tr></table></figure></li><li><p>数据库解析，编译，对SQL语句模板执行查询优化，并存储结果不输出</p></li><li><p>执行，最后将应用绑定的值传递给参数”?”，数据库执行语句。应用可以多次执行语句，如果参数的值不一样。相比于直接执行SQL语句，预处理语句有几个主要优点</p></li></ol><h2 id="预处理语句"><a href="#预处理语句" class="headerlink" title="预处理语句"></a>预处理语句</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 预处理及绑定</span></span></span><br><span class="line"><span class="php">$stmt = $conn-&gt;prepare(<span class="string">"INSERT INTO MyGuests (firstname, lastname, email) VALUES (?, ?, ?)"</span>);</span></span><br><span class="line"><span class="php">$stmt-&gt;bind_param(<span class="string">"sss"</span>, $firstname, $lastname, $email);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 设置参数并执行</span></span></span><br><span class="line"><span class="php">$firstname = <span class="string">"John"</span>;</span></span><br><span class="line"><span class="php">$lastname = <span class="string">"Doe"</span>;</span></span><br><span class="line"><span class="php">$email = <span class="string">"john@example.com"</span>;</span></span><br><span class="line"><span class="php">$stmt-&gt;execute();</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$firstname = <span class="string">"Mary"</span>;</span></span><br><span class="line"><span class="php">$lastname = <span class="string">"Moe"</span>;</span></span><br><span class="line"><span class="php">$email = <span class="string">"mary@example.com"</span>;</span></span><br><span class="line"><span class="php">$stmt-&gt;execute();</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$firstname = <span class="string">"Julie"</span>;</span></span><br><span class="line"><span class="php">$lastname = <span class="string">"Dooley"</span>;</span></span><br><span class="line"><span class="php">$email = <span class="string">"julie@example.com"</span>;</span></span><br><span class="line"><span class="php">$stmt-&gt;execute();</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$stmt-&gt;close();</span></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新记录插入成功</span><br></pre></td></tr></table></figure></p><p>可以看到之前的步骤没变过</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO MyGuests (<span class="name">firstname</span>, lastname, email) VALUES(?, ?, ?)</span><br></pre></td></tr></table></figure><p>使用了问好，来作为标记参数，可以为整形，字符串，浮点数和布尔值</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stmt</span>-&gt;bind_param(<span class="string">"sss"</span>, <span class="variable">$firstname</span>, <span class="variable">$lastname</span>, <span class="variable">$email</span>);</span><br></pre></td></tr></table></figure><p>该函数绑定了参数，并使用sss告诉数据类型为字符串</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li><p>预处理语句大大降低了分析时间，只做了一次查询；</p></li><li><p>绑定参数减少了服务器宽带，只需要发送查询的参数，而不是整个语句；</p></li><li><p>预处理语句针对SQL注入非常有用，因为参数值发送后使用不同的协议，保证数据的合法性</p></li><li><p>通过告诉数据库参数的数据类型，可以降低 SQL 注入的风险</p></li><li><p>prepare()方法用于向数据库传预定义语句；bind_param()方法用于绑定预定义语句的参数</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL预处理语句&quot;&gt;&lt;a href=&quot;#MySQL预处理语句&quot; class=&quot;headerlink&quot; title=&quot;MySQL预处理语句&quot;&gt;&lt;/a&gt;MySQL预处理语句&lt;/h1&gt;&lt;p&gt;预处理语句对于防止MySQL注入是非常有用的&lt;/p&gt;
&lt;h2 id=&quot;预处理
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/24-学习日记</title>
    <link href="http://yoursite.com/2020/07/24/PHP-2020-7-24-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/24/PHP-2020-7-24-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-24T13:45:07.000Z</published>
    <updated>2020-07-24T13:57:02.701Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL-插入多条数据"><a href="#MySQL-插入多条数据" class="headerlink" title="MySQL 插入多条数据"></a>MySQL 插入多条数据</h1><p>PHP MySQL中可以使用<code>mysqli_multi_query()</code>函数来执行多条SQL语句</p><p>面向对象<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建链接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检查链接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line">$sql = "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>);<span class="string">";</span></span></span><br><span class="line">$sql .= "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'Mary'</span>, <span class="string">'Moe'</span>, <span class="string">'mary@example.com'</span>);<span class="string">";</span></span></span><br><span class="line">$sql .= "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'Julie'</span>, <span class="string">'Dooley'</span>, <span class="string">'julie@example.com'</span>)<span class="string">";</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;multi_query($sql) === <span class="keyword">TRUE</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新记录插入成功</span><br></pre></td></tr></table></figure><br><img src="/img/JavaWeb/7-24学习日记/1.jpg" alt="avatar"></p><p>面向过程<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建链接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检查链接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line">$sql = "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>);<span class="string">";</span></span></span><br><span class="line">$sql .= "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'Mary'</span>, <span class="string">'Moe'</span>, <span class="string">'mary@example.com'</span>);<span class="string">";</span></span></span><br><span class="line">$sql .= "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'Julie'</span>, <span class="string">'Dooley'</span>, <span class="string">'julie@example.com'</span>)<span class="string">";</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (mysqli_multi_query($conn, $sql)) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . mysqli_error($conn);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">mysqli_close($conn);</span></span><br></pre></td></tr></table></figure></p><p>PDO<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="php">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span></span><br><span class="line"><span class="php">    <span class="comment">// set the PDO error mode to exception</span></span></span><br><span class="line"><span class="php">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">    <span class="comment">// 开始事务</span></span></span><br><span class="line"><span class="php">    $conn-&gt;beginTransaction();</span></span><br><span class="line"><span class="php">    <span class="comment">// SQL 语句</span></span></span><br><span class="line">    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email) </span><br><span class="line"><span class="php">    VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>)<span class="string">");</span></span></span><br><span class="line">    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email) </span><br><span class="line"><span class="php">    VALUES (<span class="string">'Mary'</span>, <span class="string">'Moe'</span>, <span class="string">'mary@example.com'</span>)<span class="string">");</span></span></span><br><span class="line">    $conn-&gt;exec("INSERT INTO MyGuests (firstname, lastname, email) </span><br><span class="line"><span class="php">    VALUES (<span class="string">'Julie'</span>, <span class="string">'Dooley'</span>, <span class="string">'julie@example.com'</span>)<span class="string">");</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">    <span class="comment">// 提交事务</span></span></span><br><span class="line"><span class="php">    $conn-&gt;commit();</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(PDOException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 如果执行失败回滚</span></span></span><br><span class="line"><span class="php">    $conn-&gt;rollback();</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$conn = <span class="keyword">null</span>;</span></span><br></pre></td></tr></table></figure></p><h2 id="预处理语句"><a href="#预处理语句" class="headerlink" title="预处理语句"></a>预处理语句</h2><p>mysql还提供了第二种方式用于插入语句</p><p>可以预处理语句和绑定参数</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    $sql = <span class="string">"INSERT INTO MyGuests(firstname, lastname, email)  VALUES(?, ?, ?)"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 为 mysqli_stmt_prepare() 初始化 statement 对象</span></span></span><br><span class="line"><span class="php">    $stmt = mysqli_stmt_init($conn);</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">//预处理语句</span></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span> (mysqli_stmt_prepare($stmt, $sql)) &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 绑定参数</span></span></span><br><span class="line"><span class="php">        mysqli_stmt_bind_param($stmt, <span class="string">'sss'</span>, $firstname, $lastname, $email);</span></span><br><span class="line"></span><br><span class="line"><span class="php">        <span class="comment">// 设置参数并执行</span></span></span><br><span class="line"><span class="php">        $firstname = <span class="string">'John'</span>;</span></span><br><span class="line"><span class="php">        $lastname = <span class="string">'Doe'</span>;</span></span><br><span class="line"><span class="php">        $email = <span class="string">'john@example.com'</span>;</span></span><br><span class="line"><span class="php">        mysqli_stmt_execute($stmt);</span></span><br><span class="line"></span><br><span class="line"><span class="php">        $firstname = <span class="string">'Mary'</span>;</span></span><br><span class="line"><span class="php">        $lastname = <span class="string">'Moe'</span>;</span></span><br><span class="line"><span class="php">        $email = <span class="string">'mary@example.com'</span>;</span></span><br><span class="line"><span class="php">        mysqli_stmt_execute($stmt);</span></span><br><span class="line"></span><br><span class="line"><span class="php">        $firstname = <span class="string">'Julie'</span>;</span></span><br><span class="line"><span class="php">        $lastname = <span class="string">'Dooley'</span>;</span></span><br><span class="line"><span class="php">        $email = <span class="string">'julie@example.com'</span>;</span></span><br><span class="line"><span class="php">        mysqli_stmt_execute($stmt);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li>在使用<code>mysqli_multi_query()</code>时，每个SQL语句必须用分号隔开</li><li>在预处理之前，先使用<code>mysqli_stmt_init</code>来初始化statement对象</li><li><code>mysqli_stmt_prepare</code>用于绑定参数</li><li><code>mysqli_stmt_bind_param()</code>该函数绑定参数查询并将参数传递给数据库</li><li>第二个参数是 “sss”，s 字符告诉 mysql 参数是字符串；i是整数；d是双精度浮点数；b是布尔值</li><li><code>mysqli_stmt_execute</code>用于执行预定义语句</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL-插入多条数据&quot;&gt;&lt;a href=&quot;#MySQL-插入多条数据&quot; class=&quot;headerlink&quot; title=&quot;MySQL 插入多条数据&quot;&gt;&lt;/a&gt;MySQL 插入多条数据&lt;/h1&gt;&lt;p&gt;PHP MySQL中可以使用&lt;code&gt;mysqli_mul
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/23-学习日记</title>
    <link href="http://yoursite.com/2020/07/23/PHP-2020-7-23-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/23/PHP-2020-7-23-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-23T13:28:00.000Z</published>
    <updated>2020-07-24T13:38:30.714Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL插入数据"><a href="#MySQL插入数据" class="headerlink" title="MySQL插入数据"></a>MySQL插入数据</h1><p>使用INSERT INTO语句来向MySQL表添加新的记录<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">INSERT</span></span> INTO table_name (column1, column2, column3,...)</span><br><span class="line"><span class="function"><span class="title">VALUES</span></span> (value1, value2, value3,...)</span><br></pre></td></tr></table></figure></p><p>方法基本上和创建数据表一致<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line">$sql = "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>)<span class="string">";</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新记录插入成功</span><br></pre></td></tr></table></figure></p><p><img src="/img/JavaWeb/7-24学习日记/0.png" alt="avatar"></p><p>面向过程<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line">$sql = "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>)<span class="string">";</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . mysqli_error($conn);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">mysqli_close($conn);</span></span><br></pre></td></tr></table></figure></p><p>PDO<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="php">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span></span><br><span class="line"><span class="php">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></span></span><br><span class="line"><span class="php">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span></span><br><span class="line">    $sql = "INSERT INTO MyGuests (firstname, lastname, email)</span><br><span class="line"><span class="php">    VALUES (<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="string">'john@example.com'</span>)<span class="string">";</span></span></span><br><span class="line"><span class="php">    <span class="comment">// 使用 exec() ，没有结果返回 </span></span></span><br><span class="line"><span class="php">    $conn-&gt;exec($sql);</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(PDOException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$conn = <span class="keyword">null</span>;</span></span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li>PHP 中 SQL 查询语句必须使用引号</li><li>在 SQL 查询语句中的字符串值必须加引号</li><li>数值的值不需要引号</li><li>NULL 值不需要引号</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;MySQL插入数据&quot;&gt;&lt;a href=&quot;#MySQL插入数据&quot; class=&quot;headerlink&quot; title=&quot;MySQL插入数据&quot;&gt;&lt;/a&gt;MySQL插入数据&lt;/h1&gt;&lt;p&gt;使用INSERT INTO语句来向MySQL表添加新的记录&lt;br&gt;&lt;figure c
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>JavaWeb-2020/7/23-学习笔记</title>
    <link href="http://yoursite.com/2020/07/23/JavaWeb-2020-7-23-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/23/JavaWeb-2020-7-23-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-07-23T06:28:50.000Z</published>
    <updated>2020-07-23T08:04:48.748Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h1><h2 id="Reuqest原理"><a href="#Reuqest原理" class="headerlink" title="Reuqest原理"></a>Reuqest原理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;service...&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li><p>tomcat服务器会根据请求url中的资源路径，创建对应的ServletDemo1的对象</p></li><li><p>tomcat服务器，会创建request和response对象，request对象中封装请求消息数据</p></li><li><p>tomcat将request和response两个对象传递给service方法，并且调用service方法</p></li><li><p>程序员可以通过request对象来获取请求消息数据，可以通过response对象来设置响应消息数据</p></li><li><p>服务器在给浏览器做出响应之前，会从response对象中拿程序员设置的响应消息数据</p></li></ol><h3 id="request与response对象"><a href="#request与response对象" class="headerlink" title="request与response对象"></a>request与response对象</h3><ol><li><p>request和response对象是由服务器创建的。程序员使用它们</p></li><li><p>request对象是来获取请求消息，response对象是来设置响应消息</p></li></ol><h2 id="继承体系结构"><a href="#继承体系结构" class="headerlink" title="继承体系结构"></a>继承体系结构</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    protected void <span class="keyword">do</span><span class="constructor">Get(HttpServletRequest <span class="params">request</span>, HttpServletResponse <span class="params">response</span>)</span> throws ServletException, IOException &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当访问时就会输出request对象</p><p>运行结果<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.connector</span><span class="selector-class">.RequestFacade</span>@<span class="keyword">799ee87</span></span><br></pre></td></tr></table></figure><br>可以看到是apache包下的对象，@后是hash值</p><p>体系结构为：</p><ul><li><p>ServletRequest —接口</p></li><li><p>HttpServletRequest —接口</p></li><li><p>org.apache.catalina.connector.RequestFacade 类(tomcat)</p></li></ul><h2 id="请求数据"><a href="#请求数据" class="headerlink" title="请求数据"></a>请求数据</h2><p>获取请求消息数据可以有</p><ul><li><p>获取请求行数据</p></li><li><p>获取请求头数据</p></li><li><p>获取请求体数据</p></li></ul><h3 id="获取请求行数据"><a href="#获取请求行数据" class="headerlink" title="获取请求行数据"></a>获取请求行数据</h3><p>例如<br>GET /day14/demo3?name=51nd0re1 HTTP/1.1</p><h4 id="请求方式为-GET"><a href="#请求方式为-GET" class="headerlink" title="请求方式为 GET"></a>请求方式为 GET</h4><p>使用<code>String getMethod()</code>方法来获取</p><h4 id="获取虚拟目录-day14"><a href="#获取虚拟目录-day14" class="headerlink" title="*获取虚拟目录(/day14)"></a>*获取虚拟目录(/day14)</h4><p>使用<code>String getContextPath()</code>方法来获取</p><h4 id="获取Servlet路径-demo3"><a href="#获取Servlet路径-demo3" class="headerlink" title="获取Servlet路径(/demo3)"></a>获取Servlet路径(/demo3)</h4><p>使用<code>String getServletPath()</code>方法来获取</p><h4 id="获取get方式的请求参数-name-51nd0re1"><a href="#获取get方式的请求参数-name-51nd0re1" class="headerlink" title="获取get方式的请求参数(name=51nd0re1)"></a>获取get方式的请求参数(name=51nd0re1)</h4><p>使用<code>String getQueryString()</code>方法来获取</p><h4 id="获取请求URI-day14-demo3"><a href="#获取请求URI-day14-demo3" class="headerlink" title="*获取请求URI(/day14/demo3)"></a>*获取请求URI(/day14/demo3)</h4><p>使用<code>String getRequestURI()</code>方法来获取</p><p>还有一个获取URL的方法<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String getRequestURL()</span><br><span class="line"></span><br><span class="line">返回结果为</span><br><span class="line">http:<span class="regexp">//</span>localhost<span class="regexp">/day14/</span>demo3</span><br></pre></td></tr></table></figure></p><h4 id="获取协议及版本"><a href="#获取协议及版本" class="headerlink" title="获取协议及版本"></a>获取协议及版本</h4><p>使用<code>String getProtocol()</code>方法来获取</p><h4 id="获取客户机IP地址"><a href="#获取客户机IP地址" class="headerlink" title="获取客户机IP地址"></a>获取客户机IP地址</h4><p>使用<code>String getRemoteAddr()</code>方法来获取</p><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package Request;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author 51nd0re1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="constructor">WebServlet(<span class="params">name</span> = <span class="string">"RequestDemo1"</span>,<span class="params">urlPatterns</span> = <span class="string">"/request1"</span>)</span></span><br><span class="line">public <span class="keyword">class</span> RequestDemo1 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void <span class="keyword">do</span><span class="constructor">Post(HttpServletRequest <span class="params">request</span>, HttpServletResponse <span class="params">response</span>)</span> throws ServletException, IOException &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"POST"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void <span class="keyword">do</span><span class="constructor">Get(HttpServletRequest <span class="params">request</span>, HttpServletResponse <span class="params">response</span>)</span> throws ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.获取请求方法</span></span><br><span class="line">        String <span class="keyword">method</span>=request.get<span class="constructor">Method()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="keyword">method</span>);</span><br><span class="line">        <span class="comment">//2.获取虚拟目录</span></span><br><span class="line">        String context = request.get<span class="constructor">ContextPath()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(context);</span><br><span class="line">        <span class="comment">//3.获取Servletl路径</span></span><br><span class="line">        String servletPath = request.get<span class="constructor">ServletPath()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(servletPath);</span><br><span class="line">        <span class="comment">//4.获取get方式请求参数</span></span><br><span class="line">        String queryString = request.get<span class="constructor">QueryString()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(queryString);</span><br><span class="line">        <span class="comment">//5.获取请求URI/URL</span></span><br><span class="line">        String requestURI = request.get<span class="constructor">RequestURI()</span>;</span><br><span class="line">        StringBuffer requestURL = request.get<span class="constructor">RequestURL()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(requestURI);</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(requestURL);</span><br><span class="line">        <span class="comment">//6.获取版本</span></span><br><span class="line">        String protocal = request.get<span class="constructor">Protocol()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(protocal);</span><br><span class="line">        <span class="comment">//7.获取客户机IP</span></span><br><span class="line">        String remoteAddr = request.get<span class="constructor">RemoteAddr()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(remoteAddr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问<a href="http://localhost:8080/hello/request1?name=51nd0re1" target="_blank" rel="noopener">http://localhost:8080/hello/request1?name=51nd0re1</a></p><p>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET</span><br><span class="line">/hello</span><br><span class="line">/request1</span><br><span class="line">name=<span class="number">51</span>nd0re1</span><br><span class="line">/hello/request1</span><br><span class="line">http:<span class="comment">//localhost:8080/hello/request1</span></span><br><span class="line">HTTP/<span class="number">1.1</span></span><br><span class="line"><span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>:<span class="number">1</span></span><br></pre></td></tr></table></figure></p><h3 id="获取请求头数据"><a href="#获取请求头数据" class="headerlink" title="获取请求头数据"></a>获取请求头数据</h3><figure class="highlight plain"><figcaption><span>getHeader(String name)```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过请求头的名称获取请求头的值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;Enumeration&lt;String&gt; getHeaderNames()</span><br></pre></td></tr></table></figure><p>获取所有的请求头名称</p><h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><p>访问之后<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Enumeration</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo2"</span>,urlPatterns = <span class="string">"/request2"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//1.获取所有请求头名称</span></span><br><span class="line">        <span class="type">Enumeration</span>&lt;<span class="type">String</span>&gt; headerNames = request.getHeaderNames();</span><br><span class="line">        <span class="comment">//2.遍历</span></span><br><span class="line">        <span class="keyword">while</span>(headerNames.hasMoreElements())&#123;</span><br><span class="line">            <span class="type">String</span> name = headerNames.nextElement();</span><br><span class="line">            <span class="comment">//根据名称获取请求头的值</span></span><br><span class="line">           <span class="type">String</span> value = request.getHeader(name);</span><br><span class="line">           <span class="type">System</span>.out.println(name+<span class="string">"---"</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">host<span class="comment">---localhost:8080</span></span><br><span class="line"><span class="keyword">user</span>-agent<span class="comment">---Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:78.0) Gecko/20100101 Firefox/78.0</span></span><br><span class="line">accept<span class="comment">---text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span></span><br><span class="line">accept-<span class="keyword">language</span><span class="comment">---zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line">accept-<span class="keyword">encoding</span><span class="comment">---gzip, deflate</span></span><br><span class="line"><span class="keyword">connection</span><span class="comment">---keep-alive</span></span><br><span class="line">cookie<span class="comment">---JSESSIONID=C4074C701516CDB3FA95402652CB489D; Phpstorm-d069594e=0d583fa6-ad80-4735-a385-c10cee7ee32f</span></span><br><span class="line">upgrade-insecure-requests<span class="comment">---1</span></span><br></pre></td></tr></table></figure></p><p>如果想要获取单个头信息，使用getHeader()就行</p><p>例如获取user-agent<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo3"</span>,urlPatterns = <span class="string">"/request3"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo3</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//获取user-agent</span></span><br><span class="line">        <span class="type">String</span> <span class="type">UA</span> = request.getHeader(<span class="string">"user-agent"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="type">UA</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">78.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">78.0</span></span><br></pre></td></tr></table></figure></p><p>还可以借此来判断浏览器<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo3"</span>,urlPatterns = <span class="string">"/request3"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo3</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//获取user-agent</span></span><br><span class="line">        <span class="type">String</span> <span class="type">UA</span> = request.getHeader(<span class="string">"user-agent"</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="type">UA</span>.contains(<span class="string">"Chrome"</span>))&#123;</span><br><span class="line">            <span class="type">System</span>.out.println(<span class="string">"Chrome浏览器"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="type">UA</span>.contains(<span class="string">"Firefox"</span>))&#123;</span><br><span class="line">            <span class="type">System</span>.out.println(<span class="string">"Firefox浏览器"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>这样就可以判断出是什么浏览器访问的</p><p>可以使用referer来防盗链<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo4"</span>,urlPatterns = <span class="string">"/request4"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo4</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="type">String</span> referer = request.getHeader(<span class="string">"referer"</span>);</span><br><span class="line">        <span class="type">System</span>.out.println(referer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(referer != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(referer.contains(<span class="string">"/hello"</span>))&#123;</span><br><span class="line">                <span class="type">System</span>.out.println(<span class="string">"安全访问"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="type">System</span>.out.println(<span class="string">"不安全访问"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>如果直接访问就会输出null</p><p>需要通过连接来访问，则运行结果</p><p><img src="/img/JavaWeb/7-23学习日记/0.png" alt="avatar"></p><p>点击访问之后，运行结果<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>localhost:<span class="number">8080</span><span class="regexp">/hello/g</span>et.html</span><br><span class="line">安全访问</span><br></pre></td></tr></table></figure></p><h3 id="获取请求体数据"><a href="#获取请求体数据" class="headerlink" title="获取请求体数据"></a>获取请求体数据</h3><p>请求体只有POST请求方式才会有请求体，在请求体中封装了POST请求的请求参数</p><p>步骤：</p><ol><li>获取流对象 </li><li>再从流对象中拿对象</li></ol><h4 id="获取流对象"><a href="#获取流对象" class="headerlink" title="获取流对象"></a>获取流对象</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BufferedReader </span>getReader()：获取字符输入流，只能操作字符数据</span><br></pre></td></tr></table></figure><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">ServletInputStream</span> <span class="function"><span class="title">getInputStream</span>():获取字节输入流，可以操作所有类型数据</span></span><br></pre></td></tr></table></figure><p>创建regist.html<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/hello/request5"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>通过这个regist.html访问<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.<span class="type">ServletException</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.<span class="type">WebServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServlet</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletRequest</span>;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.<span class="type">HttpServletResponse</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">BufferedReader</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"RequestDemo5"</span>,urlPatterns = <span class="string">"/request5"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo5</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> void doPost(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line">        <span class="comment">//获取请求消息体--请求参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.获取字符流</span></span><br><span class="line">        <span class="type">BufferedReader</span> br=request.getReader();</span><br><span class="line">        <span class="comment">//2.读取数据</span></span><br><span class="line">        <span class="type">String</span> line = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine())!= <span class="literal">null</span> )&#123;</span><br><span class="line">            <span class="type">System</span>.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> void doGet(<span class="type">HttpServletRequest</span> request, <span class="type">HttpServletResponse</span> response) <span class="keyword">throws</span> <span class="type">ServletException</span>, <span class="type">IOException</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=<span class="number">51</span>nd0re1&amp;password=<span class="number">123</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Request&quot;&gt;&lt;a href=&quot;#Request&quot; class=&quot;headerlink&quot; title=&quot;Request&quot;&gt;&lt;/a&gt;Request&lt;/h1&gt;&lt;h2 id=&quot;Reuqest原理&quot;&gt;&lt;a href=&quot;#Reuqest原理&quot; class=&quot;header
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/22-学习日记</title>
    <link href="http://yoursite.com/2020/07/22/PHP-2020-7-22-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/22/PHP-2020-7-22-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-22T14:24:47.000Z</published>
    <updated>2020-07-22T14:30:40.345Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建MySQL表"><a href="#创建MySQL表" class="headerlink" title="创建MySQL表"></a>创建MySQL表</h1><p>数据库中需要有表，使用create table语句在MySQL中创建表</p><p>在创建表前，需要使用use databasename 来选择操作的数据库</p><h2 id="使用-MySQLi-和-PDO-创建-MySQL-表"><a href="#使用-MySQLi-和-PDO-创建-MySQL-表" class="headerlink" title="使用 MySQLi 和 PDO 创建 MySQL 表"></a>使用 MySQLi 和 PDO 创建 MySQL 表</h2><p>在MySQL中创建数据表的格式为</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> myDB;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> MyGuests (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">6</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    firstname <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    lastname <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    reg_date <span class="built_in">TIMESTAMP</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>在PHP中实现基本与创建库一致<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125; </span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 使用 sql 创建数据表</span></span></span><br><span class="line">$sql = "CREATE TABLE MyGuests (</span><br><span class="line">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </span><br><span class="line">firstname VARCHAR(30) NOT NULL,</span><br><span class="line">lastname VARCHAR(30) NOT NULL,</span><br><span class="line">email VARCHAR(50),</span><br><span class="line">reg_date TIMESTAMP</span><br><span class="line"><span class="php">)<span class="string">";</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Table MyGuests created successfully"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . $conn-&gt;error;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure></p><p>面向过程<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDB"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password, $dbname);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 使用 sql 创建数据表</span></span></span><br><span class="line">$sql = "CREATE TABLE MyGuests (</span><br><span class="line">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </span><br><span class="line">firstname VARCHAR(30) NOT NULL,</span><br><span class="line">lastname VARCHAR(30) NOT NULL,</span><br><span class="line">email VARCHAR(50),</span><br><span class="line">reg_date TIMESTAMP</span><br><span class="line"><span class="php">)<span class="string">";</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"数据表 MyGuests 创建成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . mysqli_error($conn);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">mysqli_close($conn);</span></span><br></pre></td></tr></table></figure></p><p>PDO<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php">$dbname = <span class="string">"myDBPDO"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="php">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span></span><br><span class="line"><span class="php">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></span></span><br><span class="line"><span class="php">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">    <span class="comment">// 使用 sql 创建数据表</span></span></span><br><span class="line">    $sql = "CREATE TABLE MyGuests (</span><br><span class="line">    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </span><br><span class="line">    firstname VARCHAR(30) NOT NULL,</span><br><span class="line">    lastname VARCHAR(30) NOT NULL,</span><br><span class="line">    email VARCHAR(50),</span><br><span class="line">    reg_date TIMESTAMP</span><br><span class="line"><span class="php">    )<span class="string">";</span></span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">    <span class="comment">// 使用 exec() ，没有结果返回 </span></span></span><br><span class="line"><span class="php">    $conn-&gt;exec($sql);</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"数据表 MyGuests 创建成功"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(PDOException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">$conn = <span class="keyword">null</span>;</span></span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li><p>基本上和创建数据库是一样的操作，多加上一个创建数据表的操作</p></li><li><p>在创建连接时加上一个dbname参数，来表示use选择数据库的作用</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;创建MySQL表&quot;&gt;&lt;a href=&quot;#创建MySQL表&quot; class=&quot;headerlink&quot; title=&quot;创建MySQL表&quot;&gt;&lt;/a&gt;创建MySQL表&lt;/h1&gt;&lt;p&gt;数据库中需要有表，使用create table语句在MySQL中创建表&lt;/p&gt;
&lt;p&gt;在创建
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/21-学习日记</title>
    <link href="http://yoursite.com/2020/07/21/PHP-2020-7-21-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/21/PHP-2020-7-21-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-21T14:15:00.000Z</published>
    <updated>2020-07-22T14:24:00.891Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h1><p>Mysql使用create语句来创建或删除数据库</p><h2 id="使用MySQLi和PDO创建MySQL数据库"><a href="#使用MySQLi和PDO创建MySQL数据库" class="headerlink" title="使用MySQLi和PDO创建MySQL数据库"></a>使用MySQLi和PDO创建MySQL数据库</h2><p>create databases语句用于在MySQL中创建数据库</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建数据库</span></span></span><br><span class="line"><span class="php">$sql = <span class="string">"CREATE DATABASE myDB"</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . $conn-&gt;error;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$conn-&gt;close();</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库创建成功</span><br></pre></td></tr></table></figure><br>并且数据库中也多了一个叫myDB的数据库</p><p>创建数据库时必须为mysqli对象指定三个参数(servername,username,password)</p><p>如果想更换默认端口3306 可以写为<code>new mysqli(&quot;localhost&quot;, &quot;username&quot;, &quot;password&quot;, port)</code></p><p>以下是面向过程创建 一样的套路<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password);</span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建数据库</span></span></span><br><span class="line"><span class="php">$sql = <span class="string">"CREATE DATABASE myDB"</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . mysqli_error($conn);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">mysqli_close($conn);</span></span><br></pre></td></tr></table></figure></p><p>用PDO创建<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="php">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername"</span>, $username, $password);</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 设置 PDO 错误模式为异常</span></span></span><br><span class="line"><span class="php">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span></span><br><span class="line"><span class="php">    $sql = <span class="string">"CREATE DATABASE myDBPDO"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 使用 exec() ，因为没有结果返回</span></span></span><br><span class="line"><span class="php">    $conn-&gt;exec($sql);</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"数据库创建成功&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(PDOException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$conn = <span class="keyword">null</span>;</span></span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li><p>使用 PDO 的最大好处是在数据库查询过程出现问题时可以使用异常类来 处理问题。如果 try{ } 代码块出现异常，脚本会停止执行并会跳到第一个 catch(){ } 代码块执行代码。 在以上捕获的代码块中我们输出了 SQL 语句并生成错误信息</p></li><li><p>面向对象创建数据库是调用对象的query()方法</p></li><li><p>面向过程创建数据库使用mysqli_query()方法</p></li><li><p>PDO可以设置错误模式为异常，并使用exec()方法来创建数据库setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION)</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;创建数据库&quot;&gt;&lt;a href=&quot;#创建数据库&quot; class=&quot;headerlink&quot; title=&quot;创建数据库&quot;&gt;&lt;/a&gt;创建数据库&lt;/h1&gt;&lt;p&gt;Mysql使用create语句来创建或删除数据库&lt;/p&gt;
&lt;h2 id=&quot;使用MySQLi和PDO创建MySQL数据
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/20-学习日记</title>
    <link href="http://yoursite.com/2020/07/20/PHP-2020-7-20-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/20/PHP-2020-7-20-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-20T12:28:00.000Z</published>
    <updated>2020-07-21T13:16:09.455Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PHP-MySQL"><a href="#PHP-MySQL" class="headerlink" title="PHP MySQL"></a>PHP MySQL</h1><p>通过PHP，可以连接和操作数据库</p><h2 id="PHP-MySQL-1"><a href="#PHP-MySQL-1" class="headerlink" title="PHP+MySQL"></a>PHP+MySQL</h2><p>PHP与MySQL的结合是跨平台的，可以在Windows上和Unix平台上应用</p><h2 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h2><p>PHP5以上版本建议使用以下方式连接MySQL:</p><ul><li>MySQLi extension（i 意为 improved)</li><li>PDO(PHP Data Objects)</li></ul><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>面向对象<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"root"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"root"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</span></span><br></pre></td></tr></table></figure><br>面向过程<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 创建连接</span></span></span><br><span class="line"><span class="php">$conn = mysqli_connect($servername, $username, $password);</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 检测连接</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (!$conn) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</span></span><br></pre></td></tr></table></figure><br>面前PDO<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$servername = <span class="string">"localhost"</span>;</span></span><br><span class="line"><span class="php">$username = <span class="string">"username"</span>;</span></span><br><span class="line"><span class="php">$password = <span class="string">"password"</span>;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="php">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;"</span>, $username, $password);</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"连接成功"</span>; </span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(PDOException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="关闭连接"><a href="#关闭连接" class="headerlink" title="关闭连接"></a>关闭连接</h2><p>面向对象<br><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$conn</span>-&gt;<span class="keyword">close</span>()<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><p>面向过程<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqli<span class="constructor">_close($<span class="params">conn</span>)</span>;</span><br></pre></td></tr></table></figure></p><p>PDO<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$co</span>nn = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.在链接的时候出现了很多问题，大致问题是因为PHP和MySQL的版本问题，我用的是PHP7.2和MySQL8.1.5，由于MySQL版本更新了加密策略<code>caching_sha2_password</code><br>但PHP用的是<code>mysql_native_password</code>，所以需要在mysql的ini配置文件里default_authentication_plugin改为<br>mysql_native_password<br>并且使用alter user更新一次密码</p><p>2.PDO 应用在 12 种不同数据库中， MySQLi 只针对 MySQL 数据库，如果你的项目需要在多种数据库中切换，建议使用 PDO</p><p>3.面向对象连接数据库，需要使用<code>new mysqli($servername, $username, $password)</code></p><p>4.面向过程使用<code>mysqli_connect($servername, $username, $password)</code>来连接</p><p>5.PDO则声明PDO的对象<br><code>new PDO(&quot;mysql:host=$servername;&quot;, $username, $password)</code></p><p>6.关闭连接，面向对象调用对象的close()方法；面向过程使用mysqli_close()方法；PDO则将PDO对象赋值为null</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;PHP-MySQL&quot;&gt;&lt;a href=&quot;#PHP-MySQL&quot; class=&quot;headerlink&quot; title=&quot;PHP MySQL&quot;&gt;&lt;/a&gt;PHP MySQL&lt;/h1&gt;&lt;p&gt;通过PHP，可以连接和操作数据库&lt;/p&gt;
&lt;h2 id=&quot;PHP-MySQL-1&quot;&gt;
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/19-学习日记</title>
    <link href="http://yoursite.com/2020/07/19/PHP-2020-7-19-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/19/PHP-2020-7-19-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-19T09:22:00.000Z</published>
    <updated>2020-07-20T09:36:25.657Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="JSON函数"><a href="#JSON函数" class="headerlink" title="JSON函数"></a>JSON函数</h2><div class="table-container"><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>json_encode</td><td>对变量进行JSON编码</td></tr><tr><td>json_decode</td><td>对JSON格式的字符串进行解码，转为PHP变量</td></tr><tr><td>json_last_error</td><td>返回最后发生错误</td></tr></tbody></table></div><h2 id="json-encode"><a href="#json-encode" class="headerlink" title="json_encode"></a>json_encode</h2><p>PHP json_encode() 用于对变量进行 JSON 编码，该函数如果执行成功返回 JSON 数据，否则返回 FALSE </p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> json_encode ( $value [, $options = <span class="number">0</span> ] )</span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul><li>value 要编码的值，该函数只对UTF-8编码的数据有效</li><li>options 由以下常量组成的二进制掩码JSON_HEX_QUOT, JSON_HEX_TAG, JSON_HEX_AMP, JSON_HEX_APOS, JSON_NUMERIC_CHECK, JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, JSON_FORCE_OBJECT, JSON_PRESERVE_ZERO_FRACTION, JSON_UNESCAPED_UNICODE, JSON_PARTIAL_OUTPUT_ON_ERROR<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">   $arr = <span class="keyword">array</span>(<span class="string">'a'</span> =&gt; <span class="number">1</span>, <span class="string">'b'</span> =&gt; <span class="number">2</span>, <span class="string">'c'</span> =&gt; <span class="number">3</span>, <span class="string">'d'</span> =&gt; <span class="number">4</span>, <span class="string">'e'</span> =&gt; <span class="number">5</span>);</span></span><br><span class="line"><span class="php">   <span class="keyword">echo</span> json_encode($arr);</span></span><br></pre></td></tr></table></figure>运行结果<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"a"</span>:<span class="number">1</span>,<span class="attr">"b"</span>:<span class="number">2</span>,<span class="attr">"c"</span>:<span class="number">3</span>,<span class="attr">"d"</span>:<span class="number">4</span>,<span class="attr">"e"</span>:<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure></li></ul><p>如何将PHP对象转换为JSON格式<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">   <span class="class"><span class="keyword">class</span> <span class="title">Emp</span> </span>&#123;</span></span><br><span class="line"><span class="php">       <span class="keyword">public</span> $name = <span class="string">""</span>;</span></span><br><span class="line"><span class="php">       <span class="keyword">public</span> $hobbies  = <span class="string">""</span>;</span></span><br><span class="line"><span class="php">       <span class="keyword">public</span> $birthdate = <span class="string">""</span>;</span></span><br><span class="line"><span class="php">   &#125;</span></span><br><span class="line"><span class="php">   $e = <span class="keyword">new</span> Emp();</span></span><br><span class="line"><span class="php">   $e-&gt;name = <span class="string">"sachin"</span>;</span></span><br><span class="line"><span class="php">   $e-&gt;hobbies  = <span class="string">"sports"</span>;</span></span><br><span class="line"><span class="php">   $e-&gt;birthdate = date(<span class="string">'m/d/Y h:i:s a'</span>, <span class="string">"8/5/1974 12:20:03 p"</span>);</span></span><br><span class="line"><span class="php">   $e-&gt;birthdate = date(<span class="string">'m/d/Y h:i:s a'</span>, strtotime(<span class="string">"8/5/1974 12:20:03"</span>));</span></span><br><span class="line"></span><br><span class="line"><span class="php">   <span class="keyword">echo</span> json_encode($e);</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"name"</span>:<span class="string">"sachin"</span>,<span class="attr">"hobbies"</span>:<span class="string">"sports"</span>,<span class="attr">"birthdate"</span>:<span class="string">"08\/05\/1974 12:20:03 pm"</span>&#125;</span><br></pre></td></tr></table></figure></p><p>还可以使用JSON_UNESCAPED_UNICODE选项<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">   $arr = <span class="keyword">array</span>(<span class="string">'runoob'</span> =&gt; <span class="string">'菜鸟教程'</span>, <span class="string">'taobao'</span> =&gt; <span class="string">'淘宝网'</span>);</span></span><br><span class="line"><span class="php">   <span class="keyword">echo</span> json_encode($arr); <span class="comment">// 编码中文</span></span></span><br><span class="line"><span class="php">   <span class="keyword">echo</span> PHP_EOL;  <span class="comment">// 换行符</span></span></span><br><span class="line"><span class="php">   <span class="keyword">echo</span> json_encode($arr, JSON_UNESCAPED_UNICODE);  <span class="comment">// 不编码中文</span></span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"runoob"</span>:<span class="string">"\u83dc\u9e1f\u6559\u7a0b"</span>,<span class="attr">"taobao"</span>:<span class="string">"\u6dd8\u5b9d\u7f51"</span>&#125;</span><br><span class="line">&#123;<span class="attr">"runoob"</span>:<span class="string">"菜鸟教程"</span>,<span class="attr">"taobao"</span>:<span class="string">"淘宝网"</span>&#125;</span><br></pre></td></tr></table></figure><br>这个例子就可以看到区别了，如果不加选项的话则会将中文也转译为编码</p><h2 id="json-decode"><a href="#json-decode" class="headerlink" title="json_decode"></a>json_decode</h2><p>json_decode() 函数用于对 JSON 格式的字符串进行解码，并转换为 PHP 变量</p><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mixed</span> json_decode (<span class="variable">$json_string</span> [,<span class="variable">$assoc</span> = <span class="literal">false</span> [, <span class="variable">$depth</span> = <span class="number">512</span> [, <span class="variable">$options</span> = <span class="number">0</span> ]]])</span><br></pre></td></tr></table></figure><h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><ul><li>json_string 待解码的JSON字符串，必须是UTF-8编码数据</li><li>assoc 当该参数为TRUE时，将返回数组，FALSE时返回对象</li><li>depth 整数类型的参数，它指定递归深度</li><li>options 二进制掩码，目前只支持JSON_BIGINT_AS_STRING</li></ul><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">   $json = '&#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>,<span class="string">"c"</span>:<span class="number">3</span>,<span class="string">"d"</span>:<span class="number">4</span>,<span class="string">"e"</span>:<span class="number">5</span>&#125;';</span><br><span class="line"></span><br><span class="line">   var<span class="constructor">_dump(<span class="params">json_decode</span>($<span class="params">json</span>)</span>);</span><br><span class="line">   var<span class="constructor">_dump(<span class="params">json_decode</span>($<span class="params">json</span>, <span class="params">true</span>)</span>);</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span>(stdClass)<span class="meta">#1 (5) &#123;</span></span><br><span class="line">  [<span class="meta"><span class="meta-string">"a"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">1</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"b"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"c"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"d"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">4</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"e"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line">array(<span class="number">5</span>) &#123;</span><br><span class="line">  [<span class="meta"><span class="meta-string">"a"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">1</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"b"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">2</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"c"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"d"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">4</span>)</span><br><span class="line">  [<span class="meta"><span class="meta-string">"e"</span></span>]=&gt;</span><br><span class="line">  <span class="keyword">int</span>(<span class="number">5</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.JSON转PHP使用json_decode</p><p>2.PHP转JSON使用json_encode</p><p>3.json_decode的assoc参数为true时，就返回数组，否则就是对象</p><p>4.json_encode定义的类型是string；json_decode定义的类型是mixed</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;JSON&quot;&gt;&lt;a href=&quot;#JSON&quot; class=&quot;headerlink&quot; title=&quot;JSON&quot;&gt;&lt;/a&gt;JSON&lt;/h1&gt;&lt;h2 id=&quot;JSON函数&quot;&gt;&lt;a href=&quot;#JSON函数&quot; class=&quot;headerlink&quot; title=&quot;JSON函
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/18-学习日记</title>
    <link href="http://yoursite.com/2020/07/18/PHP-2020-7-18-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/18/PHP-2020-7-18-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-18T00:37:32.000Z</published>
    <updated>2020-07-19T00:50:09.568Z</updated>
    
    <content type="html"><![CDATA[<h1 id="高级过滤器"><a href="#高级过滤器" class="headerlink" title="高级过滤器"></a>高级过滤器</h1><h2 id="检测一个数字是否在一个范围内"><a href="#检测一个数字是否在一个范围内" class="headerlink" title="检测一个数字是否在一个范围内"></a>检测一个数字是否在一个范围内</h2><p>使用filter_var()函数来检测一个int型的变量是否在1到200内：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$int = <span class="number">122</span>;</span></span><br><span class="line"><span class="php">$min = <span class="number">1</span>;</span></span><br><span class="line"><span class="php">$max = <span class="number">200</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">if</span> (filter_var($int, FILTER_VALIDATE_INT, <span class="keyword">array</span>(<span class="string">"options"</span> =&gt; <span class="keyword">array</span>(<span class="string">"min_range"</span>=&gt;$min, <span class="string">"max_range"</span>=&gt;$max))) === <span class="keyword">false</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span>(<span class="string">"变量值不在合法范围内"</span>);</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span>(<span class="string">"变量值在合法范围内"</span>);</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量值在合法范围内</span><br></pre></td></tr></table></figure><br>这个地方使用了FILTER_VALIDATE_INT，这个过滤器把值作为整数来验证</p><p>还可以添加选项和标志</p><ul><li>min_range 规定最小整数</li><li>max_range 规定最大整数</li><li>FILTER_FLAG_ALLOW_OCTAL 允许八进制</li><li>FILTER_FLAG_ALLOW_HEX 允许十六进制</li></ul><p>当在数组中规定选项时，选项必须存入一个名为 “options” 的关联多维数组中</p><p>具体使用方法看实例</p><h2 id="检测IPV6地址"><a href="#检测IPV6地址" class="headerlink" title="检测IPV6地址"></a>检测IPV6地址</h2><p>依旧是使用filter_var()函数来检测$ip变量是否为IPV6地址<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$ip</span> = <span class="string">"2001:0db8:85a3:08d3:1319:8a2e:0370:7334"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!filter_var(<span class="variable">$ip</span>, FILTER_VALIDATE_IP, FILTER_FLAG_IPV6) === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="built_in">echo</span>(<span class="string">"<span class="variable">$ip</span> 是一个 IPv6 地址"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">echo</span>(<span class="string">"<span class="variable">$ip</span> 不是一个 IPv6 地址"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2001:0db8:85a3:08d3:1319:8a2e:0370:7334 是一个<span class="built_in"> IPv6 </span>地址</span><br></pre></td></tr></table></figure></p><p>FILTER_VALIDATE_IP 过滤器把值作为 IP 进行验证<br>选项有</p><ul><li>FILTER_FLAG_IPV4 - 要求值是合法的 IPv4 IP</li><li>FILTER_FLAG_IPV6 - 要求值是合法的 IPv6 IP</li><li>FILTER_FLAG_NO_PRIV_RANGE - 要求值是 RFC 指定的私域 IP</li><li>FILTER_FLAG_NO_RES_RANGE - 要求值不在保留的 IP 范围内</li></ul><h2 id="检测URL"><a href="#检测URL" class="headerlink" title="检测URL"></a>检测URL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$url</span> = <span class="string">"http://www.runoob.com"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!filter_var(<span class="variable">$url</span>, FILTER_VALIDATE_URL, FILTER_FLAG_QUERY_REQUIRED) === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="built_in">echo</span>(<span class="string">"<span class="variable">$url</span> 是一个合法的 URL"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">echo</span>(<span class="string">"<span class="variable">$url</span> 不是一个合法的 URL"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//www.runoob.com 不是一个合法的 URL</span></span><br></pre></td></tr></table></figure><br>FILTER_VALIDATE_URL 过滤器把值作为 URL 来验证</p><p>标志</p><ul><li>FILTER_FLAG_SCHEME_REQUIRED - 要求 URL 是 RFC 兼容 URL（比如 <a href="http://example）" target="_blank" rel="noopener">http://example）</a></li><li>FILTER_FLAG_HOST_REQUIRED - 要求 URL 包含主机名（比如 <a href="http://www.example.com）" target="_blank" rel="noopener">http://www.example.com）</a></li><li>FILTER_FLAG_PATH_REQUIRED - 要求 URL 在域名后存在路径（比如 www.example.com/example1/test2/）</li><li>FILTER_FLAG_QUERY_REQUIRED - 要求 URL 存在查询字符串（比如 “example.php?name=Peter&amp;age=37”）</li></ul><h2 id="移除ASCII大于127的字符"><a href="#移除ASCII大于127的字符" class="headerlink" title="移除ASCII大于127的字符"></a>移除ASCII大于127的字符</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$str = <span class="string">"&lt;h1&gt;Hello WorldÆØÅ!&lt;/h1&gt;"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$newstr = filter_var($str, FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH);</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $newstr;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure><br>FILTER_SANITIZE_STRING 过滤器去除或编码不需要的字符。</p><p>该过滤器删除那些对应用程序有潜在危害的数据。它用于去除标签以及删除或编码不需要的字符</p><ul><li>FILTER_FLAG_NO_ENCODE_QUOTES - 该标志不编码引号</li><li>FILTER_FLAG_STRIP_LOW - 去除 ASCII 值在 32 以下的字符</li><li>FILTER_FLAG_STRIP_HIGH - 去除 ASCII 值在 127 以上的字符</li><li>FILTER_FLAG_ENCODE_LOW - 编码 ASCII 值在 32 以下的字符</li><li>FILTER_FLAG_ENCODE_HIGH - 编码 ASCII 值在 127 以上的字符</li><li>FILTER_FLAG_ENCODE_AMP - 把 &amp; 字符编码为 &amp;amp</li></ul><p>更多过滤器请参考<br><a href="https://www.runoob.com/php/php-ref-filter.html" target="_blank" rel="noopener">https://www.runoob.com/php/php-ref-filter.html</a></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.涉及到过滤都使用filter_var()函数</p><p>2.结合简单过滤器和选项可以做到很多操作</p><p>3.在使用FILTER_VALIDATE_INT时，想要使用数组来作为选项，数组名必须为options</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;高级过滤器&quot;&gt;&lt;a href=&quot;#高级过滤器&quot; class=&quot;headerlink&quot; title=&quot;高级过滤器&quot;&gt;&lt;/a&gt;高级过滤器&lt;/h1&gt;&lt;h2 id=&quot;检测一个数字是否在一个范围内&quot;&gt;&lt;a href=&quot;#检测一个数字是否在一个范围内&quot; class=&quot;head
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/17-学习日记</title>
    <link href="http://yoursite.com/2020/07/17/PHP-2020-7-17-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/17/PHP-2020-7-17-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-17T01:57:42.000Z</published>
    <updated>2020-07-19T00:50:13.464Z</updated>
    
    <content type="html"><![CDATA[<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>异常用于在指定的错误发生时改变脚本的正常流程</p><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>PHP5提供了一种新的面向对象地错误处理方法</p><p>异常处理用于在指定的错误(异常)情况发生时改变脚本地正常流程。这种情况被称为异常</p><p>当异常被触发时:</p><ul><li>当前代码状态被保存</li><li>代码执行被切换到预定义的异常处理器函数</li><li>根据情况，处理器也许会从保存的代码状态重新开始执行代码，终止脚本执行，或从代码中另外的位置继续执行脚本</li></ul><p>错误处理方法:</p><ul><li>异常的基本使用</li><li>创建自定义的异常处理器</li><li>多个异常</li><li>重新抛出异常</li><li>设置顶层异常处理器</li></ul><p>异常只能用在错误情况下使用，而不应该被用于一个点跳到另一个点的情况</p><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>当异常被抛出时，其后的代码不会继续执行，PHP会尝试查找匹配的catch代码块</p><p>如果异常没有被捕获，而且又没用set_exception_handler()作相应处理的话，那就会发生一个致命错误，并且输出”Uncaught Exception”的错误消息</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 创建一个有异常处理的函数</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">checkNum</span><span class="params">($number)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>($number&gt;<span class="number">1</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">"Value must be 1 or below"</span>);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">return</span> <span class="keyword">true</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// 触发异常</span></span></span><br><span class="line"><span class="php">checkNum(<span class="number">2</span>);</span></span><br></pre></td></tr></table></figure><p>这个例子触发异常但是没去捕获它，就会得到这样的错误<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Fatal error: Uncaught Exception: Value must be 1 or below in F:<span class="symbol">\d</span>efault<span class="symbol">\P</span>HP_default<span class="symbol">\t</span>est1.php:7</span><br><span class="line">Stack trace:</span><br><span class="line">#0 F:<span class="symbol">\d</span>efault<span class="symbol">\P</span>HP_default<span class="symbol">\t</span>est1.php(13): checkNum(2)</span><br><span class="line">#1 &#123;main&#125;</span><br><span class="line">  thrown in F:<span class="symbol">\d</span>efault<span class="symbol">\P</span>HP_default<span class="symbol">\t</span>est1.php on line 7</span><br></pre></td></tr></table></figure></p><h2 id="Try、throw和catch"><a href="#Try、throw和catch" class="headerlink" title="Try、throw和catch"></a>Try、throw和catch</h2><p>要避免上面实例中出现的错误，我们需要创建适当的代码来处理异常</p><p>适当的处理异常代码应该包括</p><ul><li>Try 使用异常的函数应该位于”try”代码块内。如果没有触发异常，则代码将照常继续执行。但是如果异常被触发，会抛出一个异常</li><li>Throw 里规定如何触发异常。每一个”throw”必须对应至少一个”catch”</li><li>Catch “catch”代码块会捕获异常，并创建一个包含异常信息的对象</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 创建一个有异常处理的函数</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">checkNum</span><span class="params">($number)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>($number&gt;<span class="number">1</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">"变量值必须小于等于 1"</span>);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">return</span> <span class="keyword">true</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 在 try 块 触发异常</span></span></span><br><span class="line"><span class="php"><span class="keyword">try</span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    checkNum(<span class="number">2</span>);</span></span><br><span class="line"><span class="php">    <span class="comment">// 如果抛出异常，以下文本不会输出</span></span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'如果输出该内容，说明 $number 变量'</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="comment">// 捕获异常</span></span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(<span class="keyword">Exception</span> $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'Message: '</span> .$e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Message:</span> <span class="string">变量值必须小于等于</span> <span class="number">1</span></span><br></pre></td></tr></table></figure></p><h3 id="实例解释"><a href="#实例解释" class="headerlink" title="实例解释"></a>实例解释</h3><p>上面的代码解释为</p><ul><li>创建checkNum()函数。它检测数字是否大于1。如果是，则抛出一个异常</li><li>在”try”代码块中调用checkNum()函数</li><li>checkNum()函数中的异常被抛出</li><li>“catch”代码块接收到该异常，并创建一个包含异常信息的对象，通常为$e</li><li>通过从这个exception对象调用$e-&gt;getMessage()，输出来自该异常的错误信息</li></ul><h2 id="创建自定义异常"><a href="#创建自定义异常" class="headerlink" title="创建自定义异常"></a>创建自定义异常</h2><p>创建自定义的异常处理程序非常简单。简单创建一个专门的类，当发生异常时，可调用其函数。该类必须为exception类的子类</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">customException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">errorMessage</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 错误信息</span></span></span><br><span class="line"><span class="php">        $errorMsg = <span class="string">'错误行号 '</span>.<span class="keyword">$this</span>-&gt;getLine().<span class="string">' in '</span>.<span class="keyword">$this</span>-&gt;getFile()</span></span><br><span class="line"><span class="php">            .<span class="string">':'</span>.<span class="string">"\n"</span>.<span class="keyword">$this</span>-&gt;getMessage().<span class="string">' 不是一个合法的 E-Mail 地址'</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $errorMsg;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$email = <span class="string">"someone@example...com"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">try</span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 检测邮箱</span></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>(filter_var($email, FILTER_VALIDATE_EMAIL) === <span class="keyword">FALSE</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 如果是个不合法的邮箱地址，抛出异常</span></span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> customException($email);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">catch</span> (customException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php"><span class="comment">//display custom message</span></span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $e-&gt;errorMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="实例解释-1"><a href="#实例解释-1" class="headerlink" title="实例解释"></a>实例解释</h3><ul><li>该例子通过自定义的exception类来捕获异常</li><li>customException()类作为旧的exception类的子类，继承了exception类的所有属性和方法</li><li>创建errorMessage()函数。如果e-mail地址不合法，则该函数返回一条错误消息</li><li>把$email变量设置为不合法的e-mail地址字符串</li><li>执行”try”代码块，由于e-mail地址不合法，因此抛出一个异常</li><li>“catch”代码块捕获异常，并显示错误消息</li></ul><h2 id="多个异常"><a href="#多个异常" class="headerlink" title="多个异常"></a>多个异常</h2><p>可以为脚本使用多个异常，来检测多种情况<br>可以使用多个if…else代码块，或一个switch代码块，或者嵌套多个异常。这些异常能够使用不同的exception类，返回不同的错误信息<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">customException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">errorMessage</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 错误信息</span></span></span><br><span class="line"><span class="php">        $errorMsg = <span class="string">'错误行号 '</span>.<span class="keyword">$this</span>-&gt;getLine().<span class="string">' in '</span>.<span class="keyword">$this</span>-&gt;getFile()</span></span><br><span class="line"><span class="php">            .<span class="string">':'</span>.<span class="string">"\n"</span>.<span class="keyword">$this</span>-&gt;getMessage().<span class="string">' 不是一个合法的 E-Mail 地址'</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $errorMsg;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$email = <span class="string">"someone@example@.com"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">try</span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 检测邮箱</span></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>(filter_var($email, FILTER_VALIDATE_EMAIL) === <span class="keyword">FALSE</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 如果是个不合法的邮箱地址，抛出异常</span></span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> customException($email);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="comment">// 检测 "example" 是否在邮箱地址中</span></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>(strpos($email, <span class="string">"example"</span>) !== <span class="keyword">FALSE</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">"$email 是 example 邮箱"</span>);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span> (customException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $e-&gt;errorMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span>(<span class="keyword">Exception</span> $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $e-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><br>基本与上个例子一致，不过是使用了判断语句和多个catch来实现了多异常的处理</p><h2 id="重新抛出异常"><a href="#重新抛出异常" class="headerlink" title="重新抛出异常"></a>重新抛出异常</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">customException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">errorMessage</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 错误信息</span></span></span><br><span class="line"><span class="php">        $errorMsg = <span class="keyword">$this</span>-&gt;getMessage().<span class="string">' 不是一个合法的 E-Mail 地址。'</span>;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $errorMsg;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$email = <span class="string">"someone@exampl.com"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">try</span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">try</span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 检测 "example" 是否在邮箱地址中</span></span></span><br><span class="line"><span class="php">        <span class="keyword">if</span>(strpos($email, <span class="string">"example"</span>) !== <span class="keyword">FALSE</span>)</span></span><br><span class="line"><span class="php">        &#123;</span></span><br><span class="line"><span class="php">            <span class="comment">// 如果是个不合法的邮箱地址，抛出异常</span></span></span><br><span class="line"><span class="php">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>($email);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">catch</span>(<span class="keyword">Exception</span> $e)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="comment">// 重新抛出异常</span></span></span><br><span class="line"><span class="php">        <span class="keyword">throw</span> <span class="keyword">new</span> customException($email);</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">catch</span> (customException $e)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 显示自定义信息</span></span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> $e-&gt;errorMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>有时候，当异常被抛出时，希望以不同于标准的方式处理，就可以套娃</p><p>与上面例子几乎无异，不解释了</p><h2 id="设置顶层异常处理器"><a href="#设置顶层异常处理器" class="headerlink" title="设置顶层异常处理器"></a>设置顶层异常处理器</h2><p>set_exception_handler() 函数可设置处理所有未捕获异常的用户定义函数</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">myException</span><span class="params">($exception)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"Exception: "</span> , $exception-&gt;getMessage();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">set_exception_handler(<span class="string">'myException'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="keyword">Exception</span>(<span class="string">'Uncaught Exception occurred'</span>);</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Exception</span>: Uncaught <span class="keyword">Exception</span> occurred</span><br></pre></td></tr></table></figure><br>上面不存在catch代码块，而是触发顶层的异常处理程序。应该使用此函数来捕获所有未捕获的异常</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.需要进行异常处理的代码必须放入try代码块中，以便捕获潜在的异常</p><p>2.每个try或throw代码块必须至少拥有一个对应的catch代码块</p><p>3.使用多个catch代码块可以捕获不同种类的异常</p><p>4.可以在try代码块内的catch代码块中抛出或再次抛出异常</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;异常处理&quot;&gt;&lt;a href=&quot;#异常处理&quot; class=&quot;headerlink&quot; title=&quot;异常处理&quot;&gt;&lt;/a&gt;异常处理&lt;/h1&gt;&lt;p&gt;异常用于在指定的错误发生时改变脚本的正常流程&lt;/p&gt;
&lt;h2 id=&quot;异常&quot;&gt;&lt;a href=&quot;#异常&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/16-学习日记</title>
    <link href="http://yoursite.com/2020/07/16/PHP-2020-7-16-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/16/PHP-2020-7-16-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-16T13:04:29.000Z</published>
    <updated>2020-07-16T13:40:15.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="error"><a href="#error" class="headerlink" title="error"></a>error</h1><p>在PHP中，默认的错误处理很简单。一条错误消息会被发送到浏览器，这条消息带有文件名、行号以及描述错误的消息</p><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>在创建脚本和Web应用程序时，错误处理是一个很重要的部分，如果你的代码缺少错误检测编码，那么程序就很不专业</p><p>错误处理方法为</p><ul><li>简单的”die()”语句</li><li>自定义错误和错误触发器</li><li>错误报告</li></ul><h2 id="die-函数"><a href="#die-函数" class="headerlink" title="die()函数"></a>die()函数</h2><p>打开文本文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$file=fopen(<span class="string">"welcome.txt"</span>,<span class="string">"r"</span>);</span></span><br></pre></td></tr></table></figure><br>如果文件不存在就会得到类似错误<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Warning: fopen(welcome.txt) [function.fopen]: failed to <span class="keyword">open</span> stream:</span><br><span class="line"><span class="keyword">No</span> such <span class="keyword">file</span> or directory <span class="keyword">in</span> /www/runoob/<span class="keyword">test</span>/<span class="keyword">test</span>.php <span class="keyword">on</span> <span class="keyword">line</span> 2</span><br></pre></td></tr></table></figure></p><p>为了避免以上错误，访问之前检测该文件是否存在<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span>(!file_exists(<span class="string">"welcome.txt"</span>))</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>(<span class="string">"文件不存在"</span>);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">else</span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    $file=fopen(<span class="string">"welcome.txt"</span>,<span class="string">"r"</span>);</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件不存在</span><br></pre></td></tr></table></figure></p><h2 id="自定义错误处理器"><a href="#自定义错误处理器" class="headerlink" title="自定义错误处理器"></a>自定义错误处理器</h2><p>创建自定义的错误处理器非常多，很简单地创建一个专用函数，可以在PHP中发生错误时调用该函数</p><p>该函数必须要有能力处理两个参数(error level和eroor message)，可以最多接受五个参数</p><p>语法<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error_function(<span class="name">error_level</span>,error_message,</span><br><span class="line">error_file,error_line,error_context)</span><br></pre></td></tr></table></figure><br>参数 | 描述</p><ul><li>| -<br>error_level | 必需。为用户定义的错误规定错误报告级别。必须是一个数字。<br>error_message | 必需。为用户定义的错误规定错误信息<br>error_file | 可选。规定错误发生的文件名<br>error_line | 可选。规定错误发生的行号<br>error_context | 可选。规定一个数组，包含了当错误发生时在用的每个变量以及它们的值</li></ul><h2 id="错误报告级别"><a href="#错误报告级别" class="headerlink" title="错误报告级别"></a>错误报告级别</h2><p>用户自定义的错误处理程序处理的不同类型的错误</p><div class="table-container"><table><thead><tr><th>值</th><th>常量</th><th>描述</th></tr></thead><tbody><tr><td>2</td><td>E_WARNING</td><td>非致命的run-time错误。不暂停脚本执行</td></tr><tr><td>8</td><td>E_NOTICE</td><td>run-time通知。在脚本发现可能有错误时发生，但也可能在脚本正常运行时发生</td></tr><tr><td>256</td><td>E_USER_ERROR</td><td>致命的用户生成的错误。这类似于程序员使用PHP函数trigger_error()设置的E_ERROR</td></tr><tr><td>512</td><td>E_USER_WARNING</td><td>非致命的用户生成的警告。这类似于程序员使用PHP函数trigger_error()设置的E_WARNING</td></tr><tr><td>1024</td><td>E_USER_NOTICE</td><td>用户生成的通知。这类似于程序员使用PHP函数trigger_error()设置的E_NOTICE</td></tr><tr><td>4096</td><td>E_RECOVERABLE_ERROR</td><td>可捕获的致命错误。类似E_ERROR,但可被用户定义的处理程序捕获</td></tr><tr><td>8191</td><td>E_ALL</td><td>所有错误和警告</td></tr></tbody></table></div><p>现在创建一个处理错误的函数<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">customError</span><span class="params">($errno, $errstr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"脚本结束"</span>;</span><br><span class="line">    <span class="keyword">die</span>();</span><br></pre></td></tr></table></figure><br>上面的代码就是一个简单的错误处理函数，当它被触发时，它会取得错误级别和错误消息。然后它会输出错误级别和消息，并终止脚本</p><h2 id="设立错误处理程序"><a href="#设立错误处理程序" class="headerlink" title="设立错误处理程序"></a>设立错误处理程序</h2><p>对于所有错误来使用我们自定义的错误处理程序<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_error_handler(<span class="string">"customError"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>set_error_handler()仅需要一个参数，可以添加第二个参数来规定错误级别</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 错误处理函数</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">customError</span><span class="params">($errno, $errstr)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 设置错误处理函数</span></span></span><br><span class="line"><span class="php">set_error_handler(<span class="string">"customError"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 触发错误</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span>($test);</span></span><br></pre></td></tr></table></figure><h2 id="触发错误"><a href="#触发错误" class="headerlink" title="触发错误"></a>触发错误</h2><p>在脚本中用户输入数据的位置，当用户的输入无效时触发错误是很有用的，这个任务由trigger_error()函数完成</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$test=<span class="number">2</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($test&gt;<span class="number">1</span>)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    trigger_error(<span class="string">"变量值必须小于等于 1"</span>);</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Notice</span>: 变量值必须小于等于 <span class="number">1</span></span><br><span class="line"><span class="keyword">in</span> /www/test/runoob.php <span class="keyword">on</span> <span class="type">line</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><br>该例子是”test” 变量大于 “1”，就会发生错误</p><p>还可以添加的第二个参数，您能够规定所触发的错误类型</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 错误处理函数</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">customError</span><span class="params">($errno, $errstr)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"脚本结束"</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 设置错误处理函数</span></span></span><br><span class="line"><span class="php">set_error_handler(<span class="string">"customError"</span>,E_USER_WARNING);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 触发错误</span></span></span><br><span class="line"><span class="php">$test=<span class="number">2</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($test&gt;<span class="number">1</span>)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    trigger_error(<span class="string">"变量值必须小于等于 1"</span>,E_USER_WARNING);</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error: </span>[512] 变量值必须小于等于 1</span><br><span class="line">脚本结束</span><br></pre></td></tr></table></figure></p><h2 id="错误记录"><a href="#错误记录" class="headerlink" title="错误记录"></a>错误记录</h2><p>默认的情况下，根据php.ini中的error_log配置，向服务器的记录系统或文件发送错误记录。通过error_log()函数，可以向指定的文件或远程目的地发送错误记录</p><h2 id="通过E-Mail发送错误消息"><a href="#通过E-Mail发送错误消息" class="headerlink" title="通过E-Mail发送错误消息"></a>通过E-Mail发送错误消息</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 错误处理函数</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">customError</span><span class="params">($errno, $errstr)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"已通知网站管理员"</span>;</span></span><br><span class="line"><span class="php">    error_log(<span class="string">"Error: [$errno] $errstr"</span>,<span class="number">1</span>,</span></span><br><span class="line"><span class="php">    <span class="string">"someone@example.com"</span>,<span class="string">"From: webmaster@example.com"</span>);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 设置错误处理函数</span></span></span><br><span class="line"><span class="php">set_error_handler(<span class="string">"customError"</span>,E_USER_WARNING);</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 触发错误</span></span></span><br><span class="line"><span class="php">$test=<span class="number">2</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> ($test&gt;<span class="number">1</span>)</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    trigger_error(<span class="string">"变量值必须小于等于 1"</span>,E_USER_WARNING);</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error: </span>[512] 变量值必须小于等于 1</span><br><span class="line">已通知网站管理员</span><br></pre></td></tr></table></figure><br>接收自以上代码地邮件如下所示<br><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error: </span>[512] 变量值必须小于等于 1</span><br></pre></td></tr></table></figure><br>这个方法不适合所有的错误。常规错误应当通过使用默认的 PHP 记录系统在服务器上进行记录</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.直接使用die()函数来在遇到错误时终结程序运行，往往有时候是不太好的</p><p>2.set_error_handler() 仅需要一个参数，可以添加第二个参数来规定错误级别</p><p>3.触发错误使用trigger_error()函数来进行触发</p><p>4.set_error_handler(error_handler,error_type)其中error_handler是必须的，并且要与错误处理函数名称保持一致，error_type是可选项，可以设置错误级别</p><p>5.通过使用 error_log() 函数，您可以向指定的文件或远程目的地发送错误记录</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;error&quot;&gt;&lt;a href=&quot;#error&quot; class=&quot;headerlink&quot; title=&quot;error&quot;&gt;&lt;/a&gt;error&lt;/h1&gt;&lt;p&gt;在PHP中，默认的错误处理很简单。一条错误消息会被发送到浏览器，这条消息带有文件名、行号以及描述错误的消息&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/15-学习日记</title>
    <link href="http://yoursite.com/2020/07/15/PHP-2020-7-15-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/15/PHP-2020-7-15-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-15T12:24:27.000Z</published>
    <updated>2020-07-15T12:44:22.588Z</updated>
    
    <content type="html"><![CDATA[<h1 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h1><p>PHP允许直接从脚本发送电子邮件</p><h2 id="mail-函数"><a href="#mail-函数" class="headerlink" title="mail()函数"></a>mail()函数</h2><p>mail()函数用于从脚本中发送电子邮件</p><p>语法<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mail</span><span class="params">(to,subject,message,headers,parameters)</span></span></span><br></pre></td></tr></table></figure><br>参数 | 描述</p><ul><li>| -<br>to | 必需。规定email接收者<br>subject | 必需。规定email的主题。注释：该参数不能包含任何新行字符<br>message | 必需。定义要发送的信息。应使用LF(\n)来分隔隔行。每行限制在70个字符内<br>headers | 可选。规定附加的标题，比如From、Cc和Bcc。应当使用CRLF(\r\n)分隔附加的标题<br>parameters | 可选。对邮件发送程序规定额外的参数</li></ul><h2 id="简易E-Mail"><a href="#简易E-Mail" class="headerlink" title="简易E-Mail"></a>简易E-Mail</h2><p>通过PHP发送电子邮件的最简单的方法是发送文本email</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$to = <span class="string">"someone@example.com"</span>;         <span class="comment">// 邮件接收者</span></span></span><br><span class="line"><span class="php">$subject = <span class="string">"Test"</span>;                <span class="comment">// 邮件标题</span></span></span><br><span class="line"><span class="php">$message = <span class="string">"Hello! 这是邮件的内容。"</span>;  <span class="comment">// 邮件正文</span></span></span><br><span class="line"><span class="php">$from = <span class="string">"someonelse@example.com"</span>;   <span class="comment">// 邮件发送者</span></span></span><br><span class="line"><span class="php">$headers = <span class="string">"From:"</span> . $from;         <span class="comment">// 头部信息设置</span></span></span><br><span class="line"><span class="php">mail($to,$subject,$message,$headers);</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"邮件已发送"</span>;</span></span><br></pre></td></tr></table></figure><h2 id="Mail表单"><a href="#Mail表单" class="headerlink" title="Mail表单"></a>Mail表单</h2><p>通过PHP，可以在站点下制作一个反馈表单。下面的实例向指定的e-mail地址发送一条文本消息<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[<span class="string">'email'</span>])) &#123; <span class="comment">// 如果接收到邮箱参数则发送邮件</span></span></span><br><span class="line"><span class="php">    <span class="comment">// 发送邮件</span></span></span><br><span class="line"><span class="php">    $email = $_REQUEST[<span class="string">'email'</span>] ;</span></span><br><span class="line"><span class="php">    $subject = $_REQUEST[<span class="string">'subject'</span>] ;</span></span><br><span class="line"><span class="php">    $message = $_REQUEST[<span class="string">'message'</span>] ;</span></span><br><span class="line"><span class="php">    mail(<span class="string">"someone@example.com"</span>, $subject,</span></span><br><span class="line"><span class="php">    $message, <span class="string">"From:"</span> . $email);</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"邮件发送成功"</span>;</span></span><br><span class="line"><span class="php">&#125; <span class="keyword">else</span> &#123; <span class="comment">// 如果没有邮箱参数则显示表单</span></span></span><br><span class="line">    echo "&lt;form method='post' action='mailform.php'&gt;</span><br><span class="line">    Email: &lt;input name='email' type='text'&gt;&lt;br&gt;</span><br><span class="line">    Subject: &lt;input name='subject' type='text'&gt;&lt;br&gt;</span><br><span class="line">    Message:&lt;br&gt;</span><br><span class="line">    &lt;textarea name='message' rows='15' cols='40'&gt;</span><br><span class="line">    &lt;/textarea&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type='submit'&gt;</span><br><span class="line"><span class="php">    &lt;/form&gt;<span class="string">";</span></span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li>首先，检查是否填写了邮件输入框</li><li>如果未填写，输出HTML表单</li><li>如果已填写，从表单发送电子邮件</li><li>当填写完表单点击提交按钮后，页面重新载入，可以看到邮件输入被重置，同时显示邮件发送成功的消息</li></ul><p>更多mail()函数信息可以参考手册<br><a href="https://www.runoob.com/php/php-ref-mail.html" target="_blank" rel="noopener">https://www.runoob.com/php/php-ref-mail.html</a></p><h2 id="E-mail注入"><a href="#E-mail注入" class="headerlink" title="E-mail注入"></a>E-mail注入</h2><p>就在上面的例子中，其实是存在安全问题</p><p>上面代码存在的问题是：未经授权的用户可以通过输入表单在邮件头部插入数据</p><p>例如插入<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">someone@</span>example.com%<span class="number">0</span>ACc:<span class="symbol">person2@</span>example.com</span><br><span class="line">%<span class="number">0</span>ABcc:<span class="symbol">person3@</span>example.com,<span class="symbol">person3@</span>example.com,</span><br><span class="line"><span class="symbol">anotherperson4@</span>example.com,<span class="symbol">person5@</span>example.com</span><br><span class="line">%<span class="number">0</span>ABTo:<span class="symbol">person6@</span>example.com</span><br></pre></td></tr></table></figure><br>由于是正常语法，mail()函数会把上面的文本放入邮件头部，现在头部就有了额外的Cc: Bcc: To:字段。当用户点击提交时便会发送到上面所有的地址</p><h2 id="防止E-mail注入"><a href="#防止E-mail注入" class="headerlink" title="防止E-mail注入"></a>防止E-mail注入</h2><p>防止最好的方法就是对输入的内容进行验证</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">spamcheck</span><span class="params">($field)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// filter_var() 过滤 e-mail</span></span></span><br><span class="line"><span class="php">    <span class="comment">// 使用 FILTER_SANITIZE_EMAIL</span></span></span><br><span class="line"><span class="php">    $field=filter_var($field, FILTER_SANITIZE_EMAIL);</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">//filter_var() 过滤 e-mail</span></span></span><br><span class="line"><span class="php">    <span class="comment">// 使用 FILTER_VALIDATE_EMAIL</span></span></span><br><span class="line"><span class="php">    <span class="keyword">if</span>(filter_var($field, FILTER_VALIDATE_EMAIL))</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">else</span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">if</span> (<span class="keyword">isset</span>($_REQUEST[<span class="string">'email'</span>]))</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 如果接收到邮箱参数则发送邮件</span></span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 判断邮箱是否合法</span></span></span><br><span class="line"><span class="php">    $mailcheck = spamcheck($_REQUEST[<span class="string">'email'</span>]);</span></span><br><span class="line"><span class="php">    <span class="keyword">if</span> ($mailcheck==<span class="keyword">FALSE</span>)</span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"非法输入"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    <span class="keyword">else</span></span></span><br><span class="line"><span class="php">    &#123;    </span></span><br><span class="line"><span class="php">        <span class="comment">// 发送邮件</span></span></span><br><span class="line"><span class="php">        $email = $_REQUEST[<span class="string">'email'</span>] ;</span></span><br><span class="line"><span class="php">        $subject = $_REQUEST[<span class="string">'subject'</span>] ;</span></span><br><span class="line"><span class="php">        $message = $_REQUEST[<span class="string">'message'</span>] ;</span></span><br><span class="line"><span class="php">        mail(<span class="string">"someone@example.com"</span>, <span class="string">"Subject: $subject"</span>,</span></span><br><span class="line"><span class="php">        $message, <span class="string">"From: $email"</span> );</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"Thank you for using our mail form"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">else</span></span></span><br><span class="line"><span class="php">&#123; </span></span><br><span class="line"><span class="php">    <span class="comment">// 如果没有邮箱参数则显示表单</span></span></span><br><span class="line">    echo "&lt;form method='post' action='mailform.php'&gt;</span><br><span class="line">    Email: &lt;input name='email' type='text'&gt;&lt;br&gt;</span><br><span class="line">    Subject: &lt;input name='subject' type='text'&gt;&lt;br&gt;</span><br><span class="line">    Message:&lt;br&gt;</span><br><span class="line">    &lt;textarea name='message' rows='15' cols='40'&gt;</span><br><span class="line">    &lt;/textarea&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type='submit'&gt;</span><br><span class="line"><span class="php">    &lt;/form&gt;<span class="string">";</span></span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上面这个例子使用了过滤器来对输入进行验证</p><ul><li>FILTER_SANITIZE_EMAIL 过滤器从字符串中删除电子邮件的非法字符</li><li>FILTER_VALIDATE_EMAIL 过滤器验证电子邮件地址的值</li><li>filter_var()通过指定的过滤器过滤，语法为<code>filter_var(variable, filter, options)</code>;如果成功，则返回已过滤的数据，如果失败，则返回 false</li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.电子邮件的发送使用mail()函数进行，可以事先定义好相关变量，必要的变量是to：接收者 subject：主题 message：发送的消息，发送者一般使用from变量 并添加在headers中</p><p>2.也可以使用表单来发送e-mail</p><p>3.编写e-mail表单时，要注意使用过滤器验证用户输入的合法性，不能过分相信用户输入，避免出现安全问题</p><p>4.常见的e-mail过滤器为<code>FILTER_SANITIZE_EMAIL</code> 过滤器从字符串中删除电子邮件的非法字符<br><code>FILTER_VALIDATE_EMAIL</code> 过滤器验证电子邮件地址的值<br>使用filter_var()函数来进行过滤</p><p>5.具体关于Filter的内容可以参考手册<a href="https://www.runoob.com/php/php-filter.html，后面会学到" target="_blank" rel="noopener">https://www.runoob.com/php/php-filter.html，后面会学到</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;电子邮件&quot;&gt;&lt;a href=&quot;#电子邮件&quot; class=&quot;headerlink&quot; title=&quot;电子邮件&quot;&gt;&lt;/a&gt;电子邮件&lt;/h1&gt;&lt;p&gt;PHP允许直接从脚本发送电子邮件&lt;/p&gt;
&lt;h2 id=&quot;mail-函数&quot;&gt;&lt;a href=&quot;#mail-函数&quot; class
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/14-学习日记</title>
    <link href="http://yoursite.com/2020/07/14/PHP-2020-7-14-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/14/PHP-2020-7-14-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-14T12:57:04.000Z</published>
    <updated>2020-07-14T13:07:33.846Z</updated>
    
    <content type="html"><![CDATA[<h1 id="session"><a href="#session" class="headerlink" title="session"></a>session</h1><p>PHP session变量用于存储关于用户会话(session)的信息，或者更改用户会话(session)的设置。Session变量存储单一用户的信息，并且对于应用程序中的所有页面都是可用的</p><h2 id="session变量"><a href="#session变量" class="headerlink" title="session变量"></a>session变量</h2><p>当在计算机上操作某个应用程序(打开，修改，关闭)。这就很想一次会话(session)。计算机知道你是谁，何时打开和关闭程序。但是当网络出现问题时，HTTP地址就无法保持状态，Web服务器就不知道你是谁和干了什么</p><p>session就是为了解决这个问题而存储在服务器上的用户信息，方便用户使用而产生的</p><p>session的工作机制是为每一个访客创建一个唯一的id,基于这个UID来存储变量，UID存储到cookie中，或通过URL传导</p><h2 id="启动session"><a href="#启动session" class="headerlink" title="启动session"></a>启动session</h2><p>在存储到session之前，必须启动会话</p><p>session_start()函数必须位于<code>&lt;html&gt;</code>标签之前</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> session_start(); <span class="meta">?&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>该代码会向服务器注册用户的会话，以便可以开始保存用户信息，同时会分配一个UID</p><h2 id="存储session变量"><a href="#存储session变量" class="headerlink" title="存储session变量"></a>存储session变量</h2><p>存储和取回session变量是使用$_SESSION变量<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">session_start();</span></span><br><span class="line"><span class="php"><span class="comment">// 存储 session 数据</span></span></span><br><span class="line"><span class="php">$_SESSION[<span class="string">'views'</span>]=<span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 检索 session 数据</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">"浏览量："</span>. $_SESSION[<span class="string">'views'</span>];</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">浏览量：<span class="number">1</span></span><br></pre></td></tr></table></figure></p><h2 id="销毁session"><a href="#销毁session" class="headerlink" title="销毁session"></a>销毁session</h2><p>希望删除某些session变量，可以使用unset()或session_destroy()函数</p><p>unset()函数用于释放指定的session变量<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">session_start();</span></span><br><span class="line"><span class="php"><span class="keyword">if</span>(<span class="keyword">isset</span>($_SESSION[<span class="string">'views'</span>]))</span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">unset</span>($_SESSION[<span class="string">'views'</span>]);</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>也可以通过调用session_destroy()函数彻底销毁session<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">session_destroy();</span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.使用session前，需要在<code>&lt;html&gt;</code>标签之前使用session_start()函数</p><p>2.使用session_start()函数之后，服务器便会注册用户的会话，并开始保存用户信息，同时会分配UID</p><p>3.存储session变量使用$_SESSION直接创建和赋值</p><p>4.unset()可以销毁指定的session变量，而调用session_destroy()便会失去所有已存储的session数据</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;session&quot;&gt;&lt;a href=&quot;#session&quot; class=&quot;headerlink&quot; title=&quot;session&quot;&gt;&lt;/a&gt;session&lt;/h1&gt;&lt;p&gt;PHP session变量用于存储关于用户会话(session)的信息，或者更改用户会话(sessi
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/13-学习日记</title>
    <link href="http://yoursite.com/2020/07/13/PHP-2020-7-13-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/13/PHP-2020-7-13-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-13T13:11:56.000Z</published>
    <updated>2020-07-13T13:27:57.025Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>常用于识别用户</p><h2 id="Cookie是什么"><a href="#Cookie是什么" class="headerlink" title="Cookie是什么"></a>Cookie是什么</h2><p>cookie常用于识别用户。cookie是一种服务器留在用户计算机上的小文件。每当同一台计算机通过浏览器请求页面时，这台计算机将会发送cookie,通过PHP，可以创建并取回cookie的值</p><h2 id="创建Cookie"><a href="#创建Cookie" class="headerlink" title="创建Cookie"></a>创建Cookie</h2><p>setcookie()函数用于设置cookie</p><p>setcookie()函数必须位于<code>&lt;html&gt;</code>标签之前</p><p>语法<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="type">name</span>, <span class="keyword">value</span>, expire, <span class="type">path</span>, <span class="keyword">domain</span>);</span><br></pre></td></tr></table></figure></p><p>实例1<br>创建名为user的cookie,并为它赋值runoob。我们也规定了此cookie再一小时后过期<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">setcookie(<span class="string">"user"</span>, <span class="string">"runoob"</span>, time()+<span class="number">3600</span>);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>在发送cookie时，cookie的值会自动进行URL编码，在取回时自动解码(为了防止URL编码，请使用setrawcookie()取而代之）</p><p>实例2<br>您还可以通过另一种方式设置cookie的过期时间<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$expire=time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>;</span></span><br><span class="line"><span class="php">setcookie(<span class="string">"user"</span>, <span class="string">"runoob"</span>, $expire);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br>这个例子过期时间被设置为(60秒*60分*24小时*30天），也就是1个月</p><h2 id="取回Cookie值"><a href="#取回Cookie值" class="headerlink" title="取回Cookie值"></a>取回Cookie值</h2><p>PHP的$_COOKIE变量用于取回cookie的值</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 输出 cookie 值</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $_COOKIE[<span class="string">"user"</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 查看所有 cookie</span></span></span><br><span class="line"><span class="php">print_r($_COOKIE);</span></span><br></pre></td></tr></table></figure><p>取回cookie名为user</p><p>还可以用isset()函数来确认是否已设置cookie<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (<span class="keyword">isset</span>($_COOKIE[<span class="string">"user"</span>]))</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"欢迎 "</span> . $_COOKIE[<span class="string">"user"</span>] . <span class="string">"!&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">else</span></span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">"普通访客!&lt;br&gt;"</span>;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="删除Cookie"><a href="#删除Cookie" class="headerlink" title="删除Cookie"></a>删除Cookie</h2><p>当删除cookie时，应当使过期日期变为过去的时间点<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// 设置 cookie 过期时间为过去 1 小时</span></span></span><br><span class="line"><span class="php">setcookie(<span class="string">"user"</span>, <span class="string">""</span>, time()<span class="number">-3600</span>);</span></span><br></pre></td></tr></table></figure></p><h2 id="浏览器不支持Cookie"><a href="#浏览器不支持Cookie" class="headerlink" title="浏览器不支持Cookie"></a>浏览器不支持Cookie</h2><p>如果有些应用程序需要与不支持cookie的浏览器打交道，那么不得不使用其他方法在应用程序中的页面之间传递信息了</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"welcome.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当点击submit按钮时，便向welcome.php提交了输入</p><p>welcome.php<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">欢迎 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"name"</span>]; <span class="meta">?&gt;</span></span>.<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">你 <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_POST[<span class="string">"age"</span>]; <span class="meta">?&gt;</span></span> 岁了。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.setcookie()函数必须位于<code>&lt;html&gt;</code>标签之前</p><p>2.如果不想让cookie被URL编码，可以用setrawcookie()函数取代</p><p>3.setcookie()中的expire是以秒为单位设置时间的</p><p>4.想要删除cookie，依旧用setcookie()函数，区别就是让它变为过去的时间点</p><p>5.不能是用cookie的浏览器，就可以通过表单的方式来让信息在应用程序的页面之间传递</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Cookie&quot;&gt;&lt;a href=&quot;#Cookie&quot; class=&quot;headerlink&quot; title=&quot;Cookie&quot;&gt;&lt;/a&gt;Cookie&lt;/h1&gt;&lt;p&gt;常用于识别用户&lt;/p&gt;
&lt;h2 id=&quot;Cookie是什么&quot;&gt;&lt;a href=&quot;#Cookie是什么&quot; cl
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/12-学习日记</title>
    <link href="http://yoursite.com/2020/07/12/PHP-2020-7-12-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/12/PHP-2020-7-12-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-12T11:27:41.000Z</published>
    <updated>2020-07-12T11:43:36.093Z</updated>
    
    <content type="html"><![CDATA[<h1 id="包含文件"><a href="#包含文件" class="headerlink" title="包含文件"></a>包含文件</h1><h2 id="include和require"><a href="#include和require" class="headerlink" title="include和require"></a>include和require</h2><p>在PHP中，可以在服务器执行PHP文件之前插入一个文件的内容</p><p>include和require除了处理错误的方式不同之外，在其他方向都是相同的</p><ul><li>require 生成一个致命错误，错误发生后会停止执行</li><li>include 生产一个警告，在错误发生后会继续执行</li></ul><p>如果希望不影响文件执行，推荐使用include</p><p>语法<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">'filename'</span>;</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'filename'</span>;</span><br></pre></td></tr></table></figure></p><h1 id="include和require-1"><a href="#include和require-1" class="headerlink" title="include和require"></a>include和require</h1><p>如果你有一个名为header.php，想在页面中引用这个页头文件，就可以使用include/require<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'header.php'</span>; <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎来到我的主页!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一些文本。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>如果想在所有页面中使用标准菜单文件<br>menu.php<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo '<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/html"</span>&gt;</span>HTML 教程<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/php"</span>&gt;</span>PHP 教程<span class="tag">&lt;/<span class="name">a</span>&gt;</span>';</span><br></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"leftmenu"</span>&gt;</span></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">'menu.php'</span>; <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎来到我的主页!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一些文本。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><p>PHP中使用fopen()函数打开文件</p><h2 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h2><p>使用fopen()即可，第一种参数是打开文件的名称，第二个参数规定了使用哪种模式来打开<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$file=fopen(<span class="string">"welcome.txt"</span>,<span class="string">"r"</span>);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><br>模式 | 描述<br>-|-<br>r | 只读。在文件开头开始<br>r+ | 读/写。在文件开头开始<br>w | 只写。打开并清空文件内容;文件不存在则创建文件<br>w+ | 读/写。打开并清空文件内容;文件不存在则创建文件<br>a | 追加。打开并向文件末尾进行写操作，如果不存在则创建文件<br>a+ | 读/追加。通过向文件末尾写内容，来保持文件内容<br>x | 只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误<br>x+ | 读/写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误</p><h2 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h2><p>fclose()函数用于关闭打开的文件<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$file = <span class="keyword">fopen</span>(<span class="string">"test.txt"</span>,<span class="string">"r"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行一些代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fclose</span>($file);</span><br></pre></td></tr></table></figure></p><h2 id="检测文件末尾-EOF"><a href="#检测文件末尾-EOF" class="headerlink" title="检测文件末尾(EOF)"></a>检测文件末尾(EOF)</h2><p>feof()函数检测是否已到达文件末尾EOF</p><p>在循环遍历未知长度的数据时，feof()函数很有用<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (<span class="name">feof</span>($file)) echo <span class="string">"文件结尾"</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p><h2 id="逐行读取文件"><a href="#逐行读取文件" class="headerlink" title="逐行读取文件"></a>逐行读取文件</h2><p>fgets()函数用于从文件中逐行读取文件</p><p>再调用该函数之后，文件指针会移动到下一行</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$file</span> = fopen(<span class="string">"welcome.txt"</span>, <span class="string">"r"</span>) or <span class="keyword">exit</span>(<span class="string">"无法打开文件!"</span>);</span><br><span class="line"><span class="regexp">//</span> 读取文件每一行，直到文件结尾</span><br><span class="line"><span class="keyword">while</span>(!feof(<span class="variable">$file</span>))</span><br><span class="line">&#123;</span><br><span class="line">    echo fgets(<span class="variable">$file</span>). <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line">fclose(<span class="variable">$file</span>);</span><br></pre></td></tr></table></figure><h2 id="逐行字符读取文件"><a href="#逐行字符读取文件" class="headerlink" title="逐行字符读取文件"></a>逐行字符读取文件</h2><p>fgetc()函数用于从文件中逐字符的读取文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="variable">$file</span>=fopen(<span class="string">"welcome.txt"</span>,<span class="string">"r"</span>) or <span class="keyword">exit</span>(<span class="string">"无法打开文件!"</span>);</span><br><span class="line"><span class="keyword">while</span> (!feof(<span class="variable">$file</span>))</span><br><span class="line">&#123;</span><br><span class="line">    echo fgetc(<span class="variable">$file</span>);</span><br><span class="line">&#125;</span><br><span class="line">fclose(<span class="variable">$file</span>);</span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.推荐直接使用include包含，如果包含文件出现错误，也不会影响所在文件的正常运行，而require包含则会终止运行</p><p>2.文件读取不知道读取文件的行数时，使用feof()函数来参与循环，以实现全部读取</p><p>3.fgets()和fgetc()函数用法差不多，前者直接读取完整一行，后者则是一个字一个字的读取</p><p>4.fopen中常用的参数就是r r+ w w+ 其他不常用，了解就行</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;包含文件&quot;&gt;&lt;a href=&quot;#包含文件&quot; class=&quot;headerlink&quot; title=&quot;包含文件&quot;&gt;&lt;/a&gt;包含文件&lt;/h1&gt;&lt;h2 id=&quot;include和require&quot;&gt;&lt;a href=&quot;#include和require&quot; class=&quot;header
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/11-学习日记</title>
    <link href="http://yoursite.com/2020/07/12/PHP-2020-7-11-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/12/PHP-2020-7-11-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-12T11:05:44.000Z</published>
    <updated>2020-07-12T11:27:02.870Z</updated>
    
    <content type="html"><![CDATA[<h1 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h1><p>一个数组中的值可以是另一个数组</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="comment">// 二维数组:</span></span><br><span class="line">$cars = <span class="built_in">array</span></span><br><span class="line">(</span><br><span class="line">    <span class="built_in">array</span>(<span class="string">"Volvo"</span>,<span class="number">100</span>,<span class="number">96</span>),</span><br><span class="line">    <span class="built_in">array</span>(<span class="string">"BMW"</span>,<span class="number">60</span>,<span class="number">59</span>),</span><br><span class="line">    <span class="built_in">array</span>(<span class="string">"Toyota"</span>,<span class="number">110</span>,<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line">print_r($cars);</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Array</span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; Array</span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; Volvo</span><br><span class="line">            [<span class="number">1</span>] =&gt; <span class="number">100</span></span><br><span class="line">            [<span class="number">2</span>] =&gt; <span class="number">96</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">1</span>] =&gt; Array</span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; BMW</span><br><span class="line">            [<span class="number">1</span>] =&gt; <span class="number">60</span></span><br><span class="line">            [<span class="number">2</span>] =&gt; <span class="number">59</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">2</span>] =&gt; Array</span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; Toyota</span><br><span class="line">            [<span class="number">1</span>] =&gt; <span class="number">110</span></span><br><span class="line">            [<span class="number">2</span>] =&gt; <span class="number">100</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure><br>多维数组是包含一个或多个数组的数组</p><p>在多维数组中，主数组中的每一个元素也可以是一个数组，子数组中的每一个元素也可以是一个数组</p><p>自动分配ID键的多维数组<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$sites = <span class="keyword">array</span></span></span><br><span class="line"><span class="php">(</span></span><br><span class="line"><span class="php">    <span class="string">"runoob"</span>=&gt;<span class="keyword">array</span></span></span><br><span class="line"><span class="php">    (</span></span><br><span class="line"><span class="php">        <span class="string">"菜鸟教程"</span>,</span></span><br><span class="line"><span class="php">        <span class="string">"http://www.runoob.com"</span></span></span><br><span class="line"><span class="php">    ),</span></span><br><span class="line"><span class="php">    <span class="string">"google"</span>=&gt;<span class="keyword">array</span></span></span><br><span class="line"><span class="php">    (</span></span><br><span class="line"><span class="php">        <span class="string">"Google 搜索"</span>,</span></span><br><span class="line"><span class="php">        <span class="string">"http://www.google.com"</span></span></span><br><span class="line"><span class="php">    ),</span></span><br><span class="line"><span class="php">    <span class="string">"taobao"</span>=&gt;<span class="keyword">array</span></span></span><br><span class="line"><span class="php">    (</span></span><br><span class="line"><span class="php">        <span class="string">"淘宝"</span>,</span></span><br><span class="line"><span class="php">        <span class="string">"http://www.taobao.com"</span></span></span><br><span class="line"><span class="php">    )</span></span><br><span class="line"><span class="php">);</span></span><br><span class="line"><span class="php">print_r($sites);</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [runoob] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; 菜鸟教程</span><br><span class="line">            [<span class="number">1</span>] =&gt; http:<span class="comment">//www.runoob.com</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [google] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; Google 搜索</span><br><span class="line">            [<span class="number">1</span>] =&gt; http:<span class="comment">//www.google.com</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [taobao] =&gt; <span class="keyword">Array</span></span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; 淘宝</span><br><span class="line">            [<span class="number">1</span>] =&gt; http:<span class="comment">//www.taobao.com</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>如果想要获得某个值，也很简单<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $sites[<span class="string">'taobao'</span>][<span class="symbol">0</span>]."地址请".$sites[<span class="string">'google'</span>][<span class="symbol">0</span>];</span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">淘宝地址请Google 搜索</span><br></pre></td></tr></table></figure></p><h1 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h1><h2 id="data-函数"><a href="#data-函数" class="headerlink" title="data()函数"></a>data()函数</h2><p>PHP中使用data()函数把时间戳格式化为可读性更好的日期和时间</p><p>语法<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span> <span class="keyword">date</span> ( <span class="keyword">string</span> $format [, <span class="keyword">int</span> $timestamp ] )</span><br></pre></td></tr></table></figure><br>其中format是必须存在的，timestamp是可选的，规定时间戳</p><h2 id="格式化日期"><a href="#格式化日期" class="headerlink" title="格式化日期"></a>格式化日期</h2><p>data()函数中的第一个参数format规定了如何格式化日期和时间</p><ul><li>d 代表天</li><li>m 代表月份</li><li>Y 代表年(四位数)</li></ul><p>还可以插入/,-之类的字符来增加可读性</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y/m/d"</span>) . <span class="string">"\n"</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y.m.d"</span>) . <span class="string">"\n"</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">date</span>(<span class="string">"Y-m-d"</span>);</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>/<span class="number">07</span>/<span class="number">12</span></span><br><span class="line"><span class="number">2020.07</span><span class="number">.12</span></span><br><span class="line"><span class="number">2020</span><span class="number">-07</span><span class="number">-12</span></span><br></pre></td></tr></table></figure></p><div class="table-container"><table><thead><tr><th>format</th><th>说明</th><th>返回值例子</th></tr></thead><tbody><tr><td>d</td><td>月份中的第几天</td><td>01到31</td></tr><tr><td>D</td><td>星期中的第几天</td><td>Mon到Sun</td></tr><tr><td>j</td><td>月份中的第几天，无前导零</td><td>1到31</td></tr><tr><td>l</td><td>星期几 完整格式</td><td>Sunday到Saturday</td></tr><tr><td>w</td><td>星期几 数字表示</td><td>0到6</td></tr><tr><td>z</td><td>年份中的第几天</td><td>0到356</td></tr><tr><td>F</td><td>月份，完整格式</td><td>January到December</td></tr><tr><td>m</td><td>数字表示月份</td><td>01到12</td></tr><tr><td>M</td><td>三个字母缩写月份</td><td>Jan到Dec</td></tr><tr><td>n</td><td>数字表示月份 无前置</td><td>1到12</td></tr><tr><td>Y</td><td>4位数字完整年份</td><td>1999或2003</td></tr><tr><td>y</td><td>2位数字表示年份</td><td>99或03</td></tr><tr><td>g</td><td>小时，12小时 无前置</td><td>1到12</td></tr><tr><td>G</td><td>小时 24小时 无前置</td><td>0到23</td></tr><tr><td>h</td><td>小时 12小时</td><td>01到12</td></tr><tr><td>H</td><td>小时 24小时</td><td>00到23</td></tr><tr><td>s</td><td>秒</td><td>00到59</td></tr></tbody></table></div><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.多维数组基本和C++相似，调用方式也一样，基本不变，参考C++即可</p><p>2.data函数的format参数是必须的，可以加上/ . -等符号来增加可读性</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;多维数组&quot;&gt;&lt;a href=&quot;#多维数组&quot; class=&quot;headerlink&quot; title=&quot;多维数组&quot;&gt;&lt;/a&gt;多维数组&lt;/h1&gt;&lt;p&gt;一个数组中的值可以是另一个数组&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;tab
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/10-学习日记</title>
    <link href="http://yoursite.com/2020/07/10/PHP-2020-7-10-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/10/PHP-2020-7-10-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-10T13:03:29.000Z</published>
    <updated>2020-07-10T13:25:32.262Z</updated>
    
    <content type="html"><![CDATA[<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><p>面向对象已经很熟悉了，基本上就一句话总结，类是虚指，对象是类的实例</p><h2 id="对象内容"><a href="#对象内容" class="headerlink" title="对象内容"></a>对象内容</h2><ul><li>类 − 定义了一件事物的抽象特点。类的定义包含了数据的形式以及对数据的操作</li><li>对象 − 是类的实例</li><li>成员变量 − 定义在类内部的变量。该变量的值对外是不可见的，但是可以通过成员函数访问，在类被实例化为对象后，该变量即可称为对象的属性</li><li>成员函数 − 定义在类的内部，可用于访问对象的数据</li></ul><p>例如<br><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$mercedes</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></span><br><span class="line"><span class="built_in">$bmw</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></span><br><span class="line"><span class="built_in">$audi</span> = <span class="keyword">new</span> Car ()<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><h2 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h2><p>定义类通常语法格式如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">phpClass</span> </span>&#123;</span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $var1;</span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $var2 = <span class="string">"constant string"</span>;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">myfunc</span> <span class="params">($arg1, $arg2)</span> </span>&#123;</span></span><br><span class="line"><span class="php">     [..]</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  [..]</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><br>类使用class关键字后加上类名定义</p><p>类名后的一对大括号内可以定义变量和方法</p><p>类的变量使用var来声明，也可以直接初始化值</p><p>函数定义不变，但是函数只能通过实例化的类来使用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</span></span><br><span class="line"><span class="php">  <span class="comment">/* 成员变量 */</span></span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $url;</span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $title;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="comment">/* 成员函数 */</span></span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span><span class="params">($par)</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">$this</span>-&gt;url = $par;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span><span class="params">($par)</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">$this</span>-&gt;title = $par;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>$this 代表自身的对象</li><li>PHP_EOL为换行符</li></ul><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><p>创建对象使用new关键字来实例化<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$ru</span>noob = <span class="keyword">new</span> Site;</span><br><span class="line"><span class="symbol">$tao</span>bao = <span class="keyword">new</span> Site;</span><br><span class="line"><span class="symbol">$google</span> = <span class="keyword">new</span> Site;</span><br></pre></td></tr></table></figure></p><h3 id="调用成员方法"><a href="#调用成员方法" class="headerlink" title="调用成员方法"></a>调用成员方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用成员函数，设置标题和URL</span></span><br><span class="line">$runoob-&gt;setTitle( <span class="string">"菜鸟教程"</span> );</span><br><span class="line">$taobao-&gt;setTitle( <span class="string">"淘宝"</span> );</span><br><span class="line">$google-&gt;setTitle( <span class="string">"Google 搜索"</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用成员函数，获取标题和URL</span></span><br><span class="line">$runoob-&gt;getTitle();</span><br><span class="line">$taobao-&gt;getTitle();</span><br><span class="line">$google-&gt;getTitle();</span><br></pre></td></tr></table></figure><p>完整演示<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Site</span> </span>&#123;</span></span><br><span class="line"><span class="php">  <span class="comment">/* 成员变量 */</span></span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $url;</span></span><br><span class="line"><span class="php">  <span class="keyword">var</span> $title;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="comment">/* 成员函数 */</span></span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">setUrl</span><span class="params">($par)</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">$this</span>-&gt;url = $par;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span><span class="params">($par)</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">$this</span>-&gt;title = $par;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$runoob = <span class="keyword">new</span> Site;</span></span><br><span class="line"><span class="php">$taobao = <span class="keyword">new</span> Site;</span></span><br><span class="line"><span class="php">$google = <span class="keyword">new</span> Site;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 调用成员函数，设置标题和URL</span></span></span><br><span class="line"><span class="php">$runoob-&gt;setTitle( <span class="string">"菜鸟教程"</span> );</span></span><br><span class="line"><span class="php">$taobao-&gt;setTitle( <span class="string">"淘宝"</span> );</span></span><br><span class="line"><span class="php">$google-&gt;setTitle( <span class="string">"Google 搜索"</span> );</span></span><br><span class="line"></span><br><span class="line"><span class="php">$runoob-&gt;setUrl( <span class="string">'www.runoob.com'</span> );</span></span><br><span class="line"><span class="php">$taobao-&gt;setUrl( <span class="string">'www.taobao.com'</span> );</span></span><br><span class="line"><span class="php">$google-&gt;setUrl( <span class="string">'www.google.com'</span> );</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 调用成员函数，获取标题和URL</span></span></span><br><span class="line"><span class="php">$runoob-&gt;getTitle();</span></span><br><span class="line"><span class="php">$taobao-&gt;getTitle();</span></span><br><span class="line"><span class="php">$google-&gt;getTitle();</span></span><br><span class="line"></span><br><span class="line"><span class="php">$runoob-&gt;getUrl();</span></span><br><span class="line"><span class="php">$taobao-&gt;getUrl();</span></span><br><span class="line"><span class="php">$google-&gt;getUrl();</span></span><br></pre></td></tr></table></figure><br>运行结果<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">菜鸟教程</span><br><span class="line">淘宝</span><br><span class="line"><span class="selector-tag">Google</span> 搜索</span><br><span class="line"><span class="selector-tag">www</span><span class="selector-class">.runoob</span><span class="selector-class">.com</span></span><br><span class="line"><span class="selector-tag">www</span><span class="selector-class">.taobao</span><span class="selector-class">.com</span></span><br><span class="line"><span class="selector-tag">www</span><span class="selector-class">.google</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure></p><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>使用 _construct(mixed $args[,$…])来定义构造函数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">( $par1, $par2 )</span> </span>&#123;</span><br><span class="line">   <span class="keyword">$this</span>-&gt;url = $par1;</span><br><span class="line">   <span class="keyword">$this</span>-&gt;title = $par2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用法与C++一样</p><h2 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h2><p>使用_destructor来定义析构函数<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyDestructableClass</span> </span>&#123;</span></span><br><span class="line"><span class="php">   <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">       <span class="keyword">print</span> <span class="string">"构造函数\n"</span>;</span></span><br><span class="line"><span class="php">       <span class="keyword">$this</span>-&gt;name = <span class="string">"MyDestructableClass"</span>;</span></span><br><span class="line"><span class="php">   &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">   <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">       <span class="keyword">print</span> <span class="string">"销毁 "</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">   &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> MyDestructableClass();</span></span><br></pre></td></tr></table></figure><br>析构函数如果没有特别操作可以不写，系统会自动调用终结对象生命周期</p><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>使用extends关键字来继承一个类，PHP为单继承语言<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 代码部分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>继承的类会拥有被继承类的所有函数和方法，除构造和析构函数</p><h2 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h2><p>如果父类继承的方法不能满足子类的需求，就可以对其进行重写，也可以称为覆盖<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;url . PHP_EOL;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;url;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;title . PHP_EOL;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;title;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h2><p>和C++基本一直，都有三个访问控制</p><ul><li>public 公有</li><li>protected 受保护</li><li>private 私有</li></ul><h3 id="属性的访问控制"><a href="#属性的访问控制" class="headerlink" title="属性的访问控制"></a>属性的访问控制</h3><p>如果使用var定义，则默认为公有<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line">/**</span><br><span class="line"> * Define MyClass</span><br><span class="line"><span class="php"> */</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> $public = <span class="string">'Public'</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">protected</span> $protected = <span class="string">'Protected'</span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> $private = <span class="string">'Private'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> MyClass();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj-&gt;public; <span class="comment">// 这行能被正常执行</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj-&gt;private; <span class="comment">// 这行也会产生一个致命错误</span></span></span><br><span class="line"><span class="php">$obj-&gt;printHello(); <span class="comment">// 输出 Public、Protected 和 Private</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Define MyClass2</span><br><span class="line"><span class="php"> */</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 可以对 public 和 protected 进行重定义，但 private 而不能</span></span></span><br><span class="line"><span class="php">    <span class="keyword">protected</span> $protected = <span class="string">'Protected2'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">printHello</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;public;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;protected;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">$this</span>-&gt;private;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$obj2 = <span class="keyword">new</span> MyClass2();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj2-&gt;public; <span class="comment">// 这行能被正常执行</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj2-&gt;private; <span class="comment">// 未定义 private</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $obj2-&gt;protected; <span class="comment">// 这行会产生一个致命错误</span></span></span><br><span class="line"><span class="php">$obj2-&gt;printHello(); <span class="comment">// 输出 Public、Protected2 和 Undefined</span></span></span><br></pre></td></tr></table></figure></p><h3 id="方法的访问控制"><a href="#方法的访问控制" class="headerlink" title="方法的访问控制"></a>方法的访问控制</h3><p>方法和函数基本一致<br>没有设置关键字，则默认为公有<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line">/**</span><br><span class="line"> * Define MyClass</span><br><span class="line"><span class="php"> */</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 声明一个公有的构造函数</span></span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 声明一个公有的方法</span></span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPublic</span><span class="params">()</span> </span>&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 声明一个受保护的方法</span></span></span><br><span class="line"><span class="php">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">MyProtected</span><span class="params">()</span> </span>&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 声明一个私有的方法</span></span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">MyPrivate</span><span class="params">()</span> </span>&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 此方法为公有</span></span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">Foo</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyPublic();</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyProtected();</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyPrivate();</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$myclass = <span class="keyword">new</span> MyClass;</span></span><br><span class="line"><span class="php">$myclass-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></span></span><br><span class="line"><span class="php">$myclass-&gt;MyProtected(); <span class="comment">// 这行会产生一个致命错误</span></span></span><br><span class="line"><span class="php">$myclass-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></span></span><br><span class="line"><span class="php">$myclass-&gt;Foo(); <span class="comment">// 公有，受保护，私有都可以执行</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Define MyClass2</span><br><span class="line"><span class="php"> */</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span> <span class="keyword">extends</span> <span class="title">MyClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="comment">// 此方法为公有</span></span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">Foo2</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyPublic();</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyProtected();</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;MyPrivate(); <span class="comment">// 这行会产生一个致命错误</span></span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$myclass2 = <span class="keyword">new</span> MyClass2;</span></span><br><span class="line"><span class="php">$myclass2-&gt;MyPublic(); <span class="comment">// 这行能被正常执行</span></span></span><br><span class="line"><span class="php">$myclass2-&gt;Foo2(); <span class="comment">// 公有的和受保护的都可执行，但私有的不行</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;testPrivate();</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;testPublic();</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"Bar::testPublic\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    </span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"Bar::testPrivate\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span> </span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">testPublic</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"Foo::testPublic\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">    </span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">testPrivate</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="string">"Foo::testPrivate\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$myFoo = <span class="keyword">new</span> foo();</span></span><br><span class="line"><span class="php">$myFoo-&gt;test(); <span class="comment">// Bar::testPrivate </span></span></span><br><span class="line"><span class="php">                <span class="comment">// Foo::testPublic</span></span></span><br></pre></td></tr></table></figure></p><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>使用interface来定义接口</p><p>与定义类的方法唯一不同的就是，在接口中的所有方法都是空的，而且必须为公有的，这是接口的特性</p><p>使用implements来实现接口</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 声明一个'iTemplate'接口</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">interface</span> <span class="title">iTemplate</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span><span class="params">($name, $var)</span></span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span><span class="params">($template)</span></span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">// 实现接口</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Template</span> <span class="keyword">implements</span> <span class="title">iTemplate</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">private</span> $vars = <span class="keyword">array</span>();</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setVariable</span><span class="params">($name, $var)</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">$this</span>-&gt;vars[$name] = $var;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getHtml</span><span class="params">($template)</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">foreach</span>(<span class="keyword">$this</span>-&gt;vars <span class="keyword">as</span> $name =&gt; $value) &#123;</span></span><br><span class="line"><span class="php">            $template = str_replace(<span class="string">'&#123;'</span> . $name . <span class="string">'&#125;'</span>, $value, $template);</span></span><br><span class="line"><span class="php">        &#125;</span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> $template;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>可以把在类中始终保持不变的值定义为常量。在定义和使用常量的时候不需要使用$符号</p><p>使用const关键字来定义常量<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">const</span> constant = <span class="string">'常量值'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">showConstant</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span>  <span class="keyword">self</span>::constant . PHP_EOL;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">echo</span> MyClass::constant . PHP_EOL;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$classname = <span class="string">"MyClass"</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $classname::constant . PHP_EOL; <span class="comment">// 自 5.3.0 起</span></span></span><br><span class="line"></span><br><span class="line"><span class="php">$class = <span class="keyword">new</span> MyClass();</span></span><br><span class="line"><span class="php">$class-&gt;showConstant();</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $class::constant . PHP_EOL; <span class="comment">// 自 PHP 5.3.0 起</span></span></span><br></pre></td></tr></table></figure></p><h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>使用abstract关键字来定义抽象类</p><p>抽象方法只能在抽象类中定义，抽象类中可以定义非抽象的方法</p><p>被定义为抽象类，不能实例化为对象，必须通过继承来在子类中实现方法</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php"> <span class="comment">// 强制要求子类定义这些方法</span></span></span><br><span class="line"><span class="php">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span></span>;</span></span><br><span class="line"><span class="php">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span></span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="comment">// 普通方法（非抽象方法）</span></span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">printOut</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">print</span> <span class="keyword">$this</span>-&gt;getValue() . PHP_EOL;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass1</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="string">"ConcreteClass1"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="string">"&#123;$prefix&#125;ConcreteClass1"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass2</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="string">"ConcreteClass2"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">prefixValue</span><span class="params">($prefix)</span> </span>&#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">return</span> <span class="string">"&#123;$prefix&#125;ConcreteClass2"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$class1 = <span class="keyword">new</span> ConcreteClass1;</span></span><br><span class="line"><span class="php">$class1-&gt;printOut();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $class1-&gt;prefixValue(<span class="string">'FOO_'</span>) . PHP_EOL;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$class2 = <span class="keyword">new</span> ConcreteClass2;</span></span><br><span class="line"><span class="php">$class2-&gt;printOut();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $class2-&gt;prefixValue(<span class="string">'FOO_'</span>) . PHP_EOL;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Co<span class="symbol">ncreteClass1</span></span><br><span class="line">FOO_Co<span class="symbol">ncreteClass1</span></span><br><span class="line">Co<span class="symbol">ncreteClass2</span></span><br><span class="line">FOO_Co<span class="symbol">ncreteClass2</span></span><br></pre></td></tr></table></figure></p><h2 id="static关键字"><a href="#static关键字" class="headerlink" title="static关键字"></a>static关键字</h2><p>static就是静态的，使用方法基本就与C++一致，可以直接访问不实例化类</p><p>静态属性不能通过一个类已实例化的对象来访问，静态方法可以</p><p>静态属性一旦定义，值就不可以再改变，并且生命周期只有程序结束时随着程序生命周期结束而结束</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span></span><br><span class="line"><span class="php">  <span class="keyword">public</span> <span class="keyword">static</span> $my_static = <span class="string">'foo'</span>;</span></span><br><span class="line"><span class="php">  </span></span><br><span class="line"><span class="php">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">staticValue</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">     <span class="keyword">return</span> <span class="keyword">self</span>::$my_static;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">print</span> Foo::$my_static . PHP_EOL;</span></span><br><span class="line"><span class="php">$foo = <span class="keyword">new</span> Foo();</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">print</span> $foo-&gt;staticValue() . PHP_EOL;</span></span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">foo</span></span><br><span class="line"><span class="attribute">foo</span></span><br></pre></td></tr></table></figure></p><h2 id="final关键字"><a href="#final关键字" class="headerlink" title="final关键字"></a>final关键字</h2><p>如果父类中有方法被声明为final，则子类无法覆盖该方法</p><p>如果一个类被声明为final，则不能被继承</p><h2 id="调用父类构造方法"><a href="#调用父类构造方法" class="headerlink" title="调用父类构造方法"></a>调用父类构造方法</h2><p>要执行父类的构造方法，需要在子类的构造方法中调用<code>parent::__construct()</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">   function __construct() &#123;</span><br><span class="line">       print <span class="string">"BaseClass 类中构造方法"</span> . <span class="type">PHP_EOL</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">   function __construct() &#123;</span><br><span class="line">       parent::__construct();  <span class="comment">// 子类构造方法不能自动调用父类的构造方法</span></span><br><span class="line">       print <span class="string">"SubClass 类中构造方法"</span> . <span class="type">PHP_EOL</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherSubClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 继承 BaseClass 的构造方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 BaseClass 构造方法</span></span><br><span class="line">$obj = <span class="keyword">new</span> <span class="type">BaseClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 BaseClass、SubClass 构造方法</span></span><br><span class="line">$obj = <span class="keyword">new</span> <span class="type">SubClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 BaseClass 构造方法</span></span><br><span class="line">$obj = <span class="keyword">new</span> <span class="type">OtherSubClass</span>();</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BaseClass </span>类中构造方法</span><br><span class="line"><span class="keyword">BaseClass </span>类中构造方法</span><br><span class="line"><span class="keyword">SubClass </span>类中构造方法</span><br><span class="line"><span class="keyword">BaseClass </span>类中构造方法</span><br></pre></td></tr></table></figure></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.PHP的面向对象基本与C++一致，含义也基本相同，不多说</p><p>2.调用父类的构造函数需要使用<code>parent::__construct()</code></p><p>3.静态属性一旦定义，值就不可以再改变，并且生命周期只有程序结束时随着程序生命周期结束而结束</p><p>4.PHP继承时没有访问控制之分，默认为public，继承父类中除了private的所有属性和方法</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;面向对象&quot;&gt;&lt;a href=&quot;#面向对象&quot; class=&quot;headerlink&quot; title=&quot;面向对象&quot;&gt;&lt;/a&gt;面向对象&lt;/h1&gt;&lt;p&gt;面向对象已经很熟悉了，基本上就一句话总结，类是虚指，对象是类的实例&lt;/p&gt;
&lt;h2 id=&quot;对象内容&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>PHP-2020/7/9-学习日记</title>
    <link href="http://yoursite.com/2020/07/09/PHP-2020-7-9-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/07/09/PHP-2020-7-9-%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-07-09T12:55:35.000Z</published>
    <updated>2020-07-09T13:18:50.191Z</updated>
    
    <content type="html"><![CDATA[<h1 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h1><p>namespace在C++里见过，use namespace std;</p><p>命名空间可以解决两类问题</p><ul><li>用户编写的代码与PHP内部的类/常量/函数或第三方类/函数/常量之间的名字冲突</li><li>为很长的标识符名称创建一个别名或简称，提高代码的可读性</li></ul><h2 id="定义命名空间"><a href="#定义命名空间" class="headerlink" title="定义命名空间"></a>定义命名空间</h2><p>默认情况下，所有常量，函数和类都放在全局空间下，就和PHP支持命名空间之前一样</p><p>命名空间使用namespace关键字来声明。如果一个文件中包含命名空间，它必须在其他所有代码之前声明命名空间</p><p>语法<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span>  </span></span><br><span class="line"><span class="php"><span class="comment">// 定义代码在 'MyProject' 命名空间中  </span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span>;  </span></span><br><span class="line"><span class="php"> </span></span><br><span class="line"><span class="php"><span class="comment">// ... 代码 ...</span></span></span><br></pre></td></tr></table></figure></p><p>你也可以在同一个文件中定义不同的命名空间代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span>  </span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">AnotherProject</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br></pre></td></tr></table></figure></p><p>这种写法一般是不建议的，所以为了提高代码的可读性，使用大括号的形式</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php">    <span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">AnotherProject</span> &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php">    <span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>将全局的非命名空间中的代码与命名空间中的代码组合在一起，只能使用大括号形式的语法。且全局代码必须用一个不带名称的namespace语句加上大括号括起来</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span> &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> &#123; // 全局代码</span></span><br><span class="line"><span class="php">session_start();</span></span><br><span class="line"><span class="php">$a = MyProject\connect();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> MyProject\Connection::start();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><p>在声明命名空间之前唯一合法的代码是用于定义源文件编码方式的declare语句。所有非PHP代码包括空白符都不能出现在命名空间的声明之前<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">declare</span>(encoding=<span class="string">'UTF-8'</span>); <span class="comment">//定义多个命名空间和不包含在命名空间中的代码</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span> &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> &#123; // 全局代码</span></span><br><span class="line"><span class="php">session_start();</span></span><br><span class="line"><span class="php">$a = MyProject\connect();</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> MyProject\Connection::start();</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure></p><p>如果写成这样就会出现语法错误</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span> <span class="keyword">namespace</span> <span class="title">MyProject</span>; <span class="comment">// 命名空间前出现了“&lt;html&gt;” 会致命错误 -　命名空间必须是程序脚本的第一条语句</span></span></span><br></pre></td></tr></table></figure><h2 id="子命名空间"><a href="#子命名空间" class="headerlink" title="子命名空间"></a>子命名空间</h2><p>与目录和文件的关系很像，PHP命名空间也允许指定层次化的命名空间的名称。因此，命名空间的名字可以使用分层次的方式定义</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span>\<span class="title">Sub</span>\<span class="title">Level</span>;  <span class="comment">//声明分层次的单个命名空间</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> CONNECT_OK = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">Connect</span><span class="params">()</span> </span>&#123; <span class="comment">/* ... */</span>  &#125;</span></span><br></pre></td></tr></table></figure><p>类似于目录结构</p><h2 id="命名空间使用"><a href="#命名空间使用" class="headerlink" title="命名空间使用"></a>命名空间使用</h2><p>PHP命名空间中的类名可以通过三种方式引用</p><ul><li><p>非限定名称，或不包含前缀的类名称，例如$a=new foo();或foo::staticmethod();</p></li><li><p>限定名称，或包含前缀的名称，例如$a=new subnamespace\foo();或subnamespace\foo::staticmethod();</p></li><li><p>完全限定名称，或包含了全局前缀操作符的名称，例如,$a=new\currentnamespace\foo();</p></li></ul><p>下面便是三种方式的实例<br>file1.php<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">Foo</span>\<span class="title">Bar</span>\<span class="title">subnamespace</span>; </span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> FOO = <span class="number">1</span>;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">foo</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticmethod</span><span class="params">()</span> </span>&#123;&#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure></p><p>file2.php<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">Foo</span>\<span class="title">Bar</span>;</span></span><br><span class="line"><span class="php"><span class="keyword">include</span> <span class="string">'file1.php'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">const</span> FOO = <span class="number">2</span>;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">foo</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticmethod</span><span class="params">()</span> </span>&#123;&#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">/* 非限定名称 */</span></span></span><br><span class="line"><span class="php">foo(); <span class="comment">// 解析为函数 Foo\Bar\foo</span></span></span><br><span class="line"><span class="php">foo::staticmethod(); <span class="comment">// 解析为类 Foo\Bar\foo ，方法为 staticmethod</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> FOO; <span class="comment">// 解析为常量 Foo\Bar\FOO</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">/* 限定名称 */</span></span></span><br><span class="line"><span class="php">subnamespace\foo(); <span class="comment">// 解析为函数 Foo\Bar\subnamespace\foo</span></span></span><br><span class="line"><span class="php">subnamespace\foo::staticmethod(); <span class="comment">// 解析为类 Foo\Bar\subnamespace\foo,</span></span></span><br><span class="line"><span class="php">                                  <span class="comment">// 以及类的方法 staticmethod</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> subnamespace\FOO; <span class="comment">// 解析为常量 Foo\Bar\subnamespace\FOO</span></span></span><br><span class="line"><span class="php">                                  </span></span><br><span class="line"><span class="php"><span class="comment">/* 完全限定名称 */</span></span></span><br><span class="line"><span class="php">\Foo\Bar\foo(); <span class="comment">// 解析为函数 Foo\Bar\foo</span></span></span><br><span class="line"><span class="php">\Foo\Bar\foo::staticmethod(); <span class="comment">// 解析为类 Foo\Bar\foo, 以及类的方法 staticmethod</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> \Foo\Bar\FOO; <span class="comment">// 解析为常量 Foo\Bar\FOO</span></span></span><br></pre></td></tr></table></figure><br>注意访问任意全局类，函数或常量，都可以使用完全限定名称</p><p>在命名空间内部访问全局类，函数和常量<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">Foo</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">strlen</span><span class="params">()</span> </span>&#123;&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">const</span> INI_ALL = <span class="number">3</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">Exception</span> </span>&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$a = \strlen(<span class="string">'hi'</span>); <span class="comment">// 调用全局函数strlen</span></span></span><br><span class="line"><span class="php">$b = \INI_ALL; <span class="comment">// 访问全局常量 INI_ALL</span></span></span><br><span class="line"><span class="php">$c = <span class="keyword">new</span> \<span class="keyword">Exception</span>(<span class="string">'error'</span>); <span class="comment">// 实例化全局类 Exception</span></span></span><br></pre></td></tr></table></figure></p><h2 id="命名空间和动态语言特征"><a href="#命名空间和动态语言特征" class="headerlink" title="命名空间和动态语言特征"></a>命名空间和动态语言特征</h2><p>PHP命名空间的实现受到其语言自身的动态特征影响。因此，如果要将下面的代码转换到命名空间中，动态访问元素</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">classname</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span>,<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">funcname</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="keyword">__FUNCTION__</span>,<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">const</span> constname = <span class="string">"global"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$a = <span class="string">'classname'</span>;</span></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> $a; <span class="comment">// prints classname::__construct</span></span></span><br><span class="line"><span class="php">$b = <span class="string">'funcname'</span>;</span></span><br><span class="line"><span class="php">$b(); <span class="comment">// prints funcname</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> constant(<span class="string">'constname'</span>), <span class="string">"\n"</span>; <span class="comment">// prints global</span></span></span><br></pre></td></tr></table></figure><p>必须使用完全限定名称（包括命名空间前缀的类名称）。注意因为在动态的类名称、函数名称或常量名称中，限定名称和完全限定名称没有区别，因此其前导的反斜杠是不必要的</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">namespacename</span>;</span></span><br><span class="line"><span class="php"><span class="class"><span class="keyword">class</span> <span class="title">classname</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">    &#123;</span></span><br><span class="line"><span class="php">        <span class="keyword">echo</span> <span class="keyword">__METHOD__</span>,<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">    &#125;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">funcname</span><span class="params">()</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="keyword">__FUNCTION__</span>,<span class="string">"\n"</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="keyword">const</span> constname = <span class="string">"namespaced"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">include</span> <span class="string">'example1.php'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$a = <span class="string">'classname'</span>;</span></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> $a; <span class="comment">// 输出 classname::__construct</span></span></span><br><span class="line"><span class="php">$b = <span class="string">'funcname'</span>;</span></span><br><span class="line"><span class="php">$b(); <span class="comment">// 输出函数名</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> constant(<span class="string">'constname'</span>), <span class="string">"\n"</span>; <span class="comment">// 输出 global</span></span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">/* 如果使用双引号，使用方法为 "\\namespacename\\classname"*/</span></span></span><br><span class="line"><span class="php">$a = <span class="string">'\namespacename\classname'</span>;</span></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> $a; <span class="comment">// 输出 namespacename\classname::__construct</span></span></span><br><span class="line"><span class="php">$a = <span class="string">'namespacename\classname'</span>;</span></span><br><span class="line"><span class="php">$obj = <span class="keyword">new</span> $a; <span class="comment">// 输出 namespacename\classname::__construct</span></span></span><br><span class="line"><span class="php">$b = <span class="string">'namespacename\funcname'</span>;</span></span><br><span class="line"><span class="php">$b(); <span class="comment">// 输出 namespacename\funcname</span></span></span><br><span class="line"><span class="php">$b = <span class="string">'\namespacename\funcname'</span>;</span></span><br><span class="line"><span class="php">$b(); <span class="comment">// 输出 namespacename\funcname</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> constant(<span class="string">'\namespacename\constname'</span>), <span class="string">"\n"</span>; <span class="comment">// 输出 namespaced</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> constant(<span class="string">'namespacename\constname'</span>), <span class="string">"\n"</span>; <span class="comment">// 输出 namespaced</span></span></span><br></pre></td></tr></table></figure><h2 id="namespace关键字和-NAMESPACE-常量"><a href="#namespace关键字和-NAMESPACE-常量" class="headerlink" title="namespace关键字和_NAMESPACE_常量"></a>namespace关键字和_NAMESPACE_常量</h2><p>PHP支持两种抽象的访问当前命名空间内部元素的方法，<strong>NAMESPACE</strong> 魔术常量和namespace关键字。</p><p>常量<strong>NAMESPACE</strong>的值是包含当前命名空间名称的字符串。在全局的，不包括在任何命名空间中的代码，它包含一个空的字符串。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="keyword">echo</span> <span class="string">'"'</span>, <span class="keyword">__NAMESPACE__</span>, <span class="string">'"'</span>; <span class="comment">// 输出 "MyProject"</span></span></span><br></pre></td></tr></table></figure><p>使用_NAMESPACE_动态创建名称<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">MyProject</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">($classname)</span></span></span></span><br><span class="line"><span class="php">&#123;</span></span><br><span class="line"><span class="php">    $a = <span class="keyword">__NAMESPACE__</span> . <span class="string">'\\'</span> . $classname;</span></span><br><span class="line"><span class="php">    <span class="keyword">return</span> <span class="keyword">new</span> $a;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="全局空间"><a href="#全局空间" class="headerlink" title="全局空间"></a>全局空间</h2><p>如果没有定义任何命名空间，所有的类与函数的定义都是在全局空间，与 PHP 引入命名空间概念前一样。在名称前加上前缀 \ 表示该名称是全局空间中的名称，即使该名称位于其它的命名空间中时也是如此。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">namespace</span> <span class="title">A</span>\<span class="title">B</span>\<span class="title">C</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php"><span class="comment">/* 这个函数是 A\B\C\fopen */</span></span></span><br><span class="line"><span class="php"><span class="function"><span class="keyword">function</span> <span class="title">fopen</span><span class="params">()</span> </span>&#123; </span></span><br><span class="line"><span class="php">     <span class="comment">/* ... */</span></span></span><br><span class="line"><span class="php">     $f = \fopen(...); <span class="comment">// 调用全局的fopen函数</span></span></span><br><span class="line"><span class="php">     <span class="keyword">return</span> $f;</span></span><br><span class="line"><span class="php">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>1.命名空间的存在增加了代码的灵活度，可以更好的编写程序</p><p>2.命名空间的使用基本与文件目录相似，都是使用<code>\</code>来进行划分，如果只有一个<code>\</code>那就默认为是全局空间，不加也可以</p><p>3.完全命名空间可以看成是完整的绝对路径，而不完全的基本上可以看成是相对路径</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;命名空间&quot;&gt;&lt;a href=&quot;#命名空间&quot; class=&quot;headerlink&quot; title=&quot;命名空间&quot;&gt;&lt;/a&gt;命名空间&lt;/h1&gt;&lt;p&gt;namespace在C++里见过，use namespace std;&lt;/p&gt;
&lt;p&gt;命名空间可以解决两类问题&lt;/p&gt;
&lt;u
      
    
    </summary>
    
    
      <category term="日常学习" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="PHP" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/PHP/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
  </entry>
  
</feed>
